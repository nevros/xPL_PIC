<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Alarm Cabinent: PIC Code/SMTP.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Alarm Cabinent</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">PIC Code/SMTP.c File Reference</div>  </div>
</div>
<div class="contents">

<p>All things Email.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;TCPIP Stack/TCPIP.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="_main_demo_8h_source.html">MainDemo.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_security_system_8h_source.html">SecuritySystem.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="x_p_l_8h_source.html">xPL.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for SMTP.c:</div>
<div class="dyncontent">
<div class="center"><iframe src="_s_m_t_p_8c__incl.svg" width="854" height="150" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="_s_m_t_p_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#ae53df556829a1f19d4312aef4ed53af9">__SMTPDEMO_C</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#abc843aa264bd8fe2da2104d2bb0e6b90">SM_SMTP_START</a>&#160;&#160;&#160;(0u)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#a145891d81ef63bc56f0b9fdf88fa9af4">SM_SMTP_TO</a>&#160;&#160;&#160;(1u)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#ab02bdbb35616062c8a6b8ceacda13dd2">SM_SMTP_SERVER</a>&#160;&#160;&#160;(2u)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#a4296ece9f5a368f1de465786c198ab35">SM_SMTP_USER</a>&#160;&#160;&#160;(3u)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#a84785a9f08d4feeee843cfdb93393a81">SM_SMTP_PASSWORD</a>&#160;&#160;&#160;(4u)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#ad4c5f8e2818f01110acef98ea0f53edf">SM_SMTP_PORT</a>&#160;&#160;&#160;(5u)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#afdedda48f45b7c31a1d3731c9b90ed48">SM_SMTP_SSL</a>&#160;&#160;&#160;(6u)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#a3746f2a3dca6ddc436e7f0d61e13d0bd">SM_SMTP_ACTIVE</a>&#160;&#160;&#160;(7u)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#a3224932b10e5b3c3366b86d2439b263b">SM_SMTP_INITALALARM</a>&#160;&#160;&#160;(8u)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#a8f57b6bd4f0751253b6d81eee85679aa">SM_SMTP_ARMDISARM</a>&#160;&#160;&#160;(9u)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#a79b7297fb197e1d1fa57757d2b176b31">SM_SMTP_SUCCESS</a>&#160;&#160;&#160;(10u)</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#a3657eec79f7389e841f7abf7b14b4d10">HTTPPrint_SMTP_To</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints who the email is addressed to.  <a href="#a3657eec79f7389e841f7abf7b14b4d10"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#a0757311e35db0e69fc2a849b112e7937">HTTPPrint_SMTP_Server</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints the POP3 sever.  <a href="#a0757311e35db0e69fc2a849b112e7937"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#a37dbbe8a7b4365a689be733d57f324c1">HTTPPrint_SMTP_User</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints the user name to login to the POP3 server.  <a href="#a37dbbe8a7b4365a689be733d57f324c1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#a3190ae95fd7babc451918bb7cf444df4">HTTPPrint_SMTP_Password</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints the password to login to the POP3 server.  <a href="#a3190ae95fd7babc451918bb7cf444df4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#af03f817c26c62e7abeef07acd98db6b4">HTTPPrint_SMTP_Port</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Port number that the POP3 server runs from.  <a href="#af03f817c26c62e7abeef07acd98db6b4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#af1e8f2444504e3af680757da4f2309d3">HTTPPrint_SMTP_Active</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints if email service is active.  <a href="#af1e8f2444504e3af680757da4f2309d3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#a75a3543052b6c130768219356a2ae27d">HTTPPrint_SMTP_OnlyInitalAlarm</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints if emails will only be sent on the first trigger of the alarm.  <a href="#a75a3543052b6c130768219356a2ae27d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#ab4e7e62e22387a3a109f7059fd6b1aa3">HTTPPrint_SMTP_ArmDisarm</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints if emails should be sent on disarm.  <a href="#ab4e7e62e22387a3a109f7059fd6b1aa3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#a4c18819533a6c1917e34ea814831f094">HTTPPrint_SMTPTestOutput</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Prnits test data for P0P3 results.  <a href="#a4c18819533a6c1917e34ea814831f094"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HTTP_IO_RESULT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#a9684d57d301c8de28dba3a1dc22d4708">HTTPPostSMTPConfig</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This function reads an input parameter from the POSTed data, and writes that string to the configuration values for SMTP.  <a href="#a9684d57d301c8de28dba3a1dc22d4708"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#aa3464edbc8a2b00d44aff04588ed10ef">SMTPTaskProcess</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Managers the scheduled sending of emails.  <a href="#aa3464edbc8a2b00d44aff04588ed10ef"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#ae777555850cf9c897f46c8407ce1729f">SMTPQueueEmail</a> (<a class="el" href="_security_system_8h.html#ac565b3414da111ba78aef21e6e4ccc6e">SMTP_SendTypes</a> Email_Type)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Places a new email in the SMTP queue to be processed (sent)  <a href="#ae777555850cf9c897f46c8407ce1729f"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static ROM char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#a9fb825e30b6e8dbfed928256eb6500c8">WhenToSendEmailText</a> []</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Text values of config option 'when to send emails'.  <a href="#a9fb825e30b6e8dbfed928256eb6500c8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_s_m_t_p_task_lists.html">SMTPTaskLists</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#a4a27286a5cf26257930ac713fbd78b3b">SMTPTaskList</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">State machine for sending out emails.  <a href="#a4a27286a5cf26257930ac713fbd78b3b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_t_p_8c.html#a9cbd255a539aaee43372b00cbc47498e">SMPTTestResult</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">testing email  <a href="#a9cbd255a539aaee43372b00cbc47498e"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>All things Email. </p>

<p>Definition in file <a class="el" href="_s_m_t_p_8c_source.html">SMTP.c</a>.</p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="ae53df556829a1f19d4312aef4ed53af9"></a><!-- doxytag: member="SMTP.c::__SMTPDEMO_C" ref="ae53df556829a1f19d4312aef4ed53af9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define __SMTPDEMO_C</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_s_m_t_p_8c_source.html#l00004">4</a> of file <a class="el" href="_s_m_t_p_8c_source.html">SMTP.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3746f2a3dca6ddc436e7f0d61e13d0bd"></a><!-- doxytag: member="SMTP.c::SM_SMTP_ACTIVE" ref="a3746f2a3dca6ddc436e7f0d61e13d0bd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SM_SMTP_ACTIVE&#160;&#160;&#160;(7u)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="_s_m_t_p_8c_source.html#l00228">HTTPPostSMTPConfig()</a>.</p>

</div>
</div>
<a class="anchor" id="a8f57b6bd4f0751253b6d81eee85679aa"></a><!-- doxytag: member="SMTP.c::SM_SMTP_ARMDISARM" ref="a8f57b6bd4f0751253b6d81eee85679aa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SM_SMTP_ARMDISARM&#160;&#160;&#160;(9u)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="_s_m_t_p_8c_source.html#l00228">HTTPPostSMTPConfig()</a>.</p>

</div>
</div>
<a class="anchor" id="a3224932b10e5b3c3366b86d2439b263b"></a><!-- doxytag: member="SMTP.c::SM_SMTP_INITALALARM" ref="a3224932b10e5b3c3366b86d2439b263b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SM_SMTP_INITALALARM&#160;&#160;&#160;(8u)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="_s_m_t_p_8c_source.html#l00228">HTTPPostSMTPConfig()</a>.</p>

</div>
</div>
<a class="anchor" id="a84785a9f08d4feeee843cfdb93393a81"></a><!-- doxytag: member="SMTP.c::SM_SMTP_PASSWORD" ref="a84785a9f08d4feeee843cfdb93393a81" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SM_SMTP_PASSWORD&#160;&#160;&#160;(4u)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="_s_m_t_p_8c_source.html#l00228">HTTPPostSMTPConfig()</a>.</p>

</div>
</div>
<a class="anchor" id="ad4c5f8e2818f01110acef98ea0f53edf"></a><!-- doxytag: member="SMTP.c::SM_SMTP_PORT" ref="ad4c5f8e2818f01110acef98ea0f53edf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SM_SMTP_PORT&#160;&#160;&#160;(5u)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="_s_m_t_p_8c_source.html#l00228">HTTPPostSMTPConfig()</a>.</p>

</div>
</div>
<a class="anchor" id="ab02bdbb35616062c8a6b8ceacda13dd2"></a><!-- doxytag: member="SMTP.c::SM_SMTP_SERVER" ref="ab02bdbb35616062c8a6b8ceacda13dd2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SM_SMTP_SERVER&#160;&#160;&#160;(2u)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="_s_m_t_p_8c_source.html#l00228">HTTPPostSMTPConfig()</a>.</p>

</div>
</div>
<a class="anchor" id="afdedda48f45b7c31a1d3731c9b90ed48"></a><!-- doxytag: member="SMTP.c::SM_SMTP_SSL" ref="afdedda48f45b7c31a1d3731c9b90ed48" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SM_SMTP_SSL&#160;&#160;&#160;(6u)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="_s_m_t_p_8c_source.html#l00228">HTTPPostSMTPConfig()</a>.</p>

</div>
</div>
<a class="anchor" id="abc843aa264bd8fe2da2104d2bb0e6b90"></a><!-- doxytag: member="SMTP.c::SM_SMTP_START" ref="abc843aa264bd8fe2da2104d2bb0e6b90" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SM_SMTP_START&#160;&#160;&#160;(0u)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="_s_m_t_p_8c_source.html#l00228">HTTPPostSMTPConfig()</a>.</p>

</div>
</div>
<a class="anchor" id="a79b7297fb197e1d1fa57757d2b176b31"></a><!-- doxytag: member="SMTP.c::SM_SMTP_SUCCESS" ref="a79b7297fb197e1d1fa57757d2b176b31" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SM_SMTP_SUCCESS&#160;&#160;&#160;(10u)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="_s_m_t_p_8c_source.html#l00228">HTTPPostSMTPConfig()</a>.</p>

</div>
</div>
<a class="anchor" id="a145891d81ef63bc56f0b9fdf88fa9af4"></a><!-- doxytag: member="SMTP.c::SM_SMTP_TO" ref="a145891d81ef63bc56f0b9fdf88fa9af4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SM_SMTP_TO&#160;&#160;&#160;(1u)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="_s_m_t_p_8c_source.html#l00228">HTTPPostSMTPConfig()</a>.</p>

</div>
</div>
<a class="anchor" id="a4296ece9f5a368f1de465786c198ab35"></a><!-- doxytag: member="SMTP.c::SM_SMTP_USER" ref="a4296ece9f5a368f1de465786c198ab35" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SM_SMTP_USER&#160;&#160;&#160;(3u)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="_s_m_t_p_8c_source.html#l00228">HTTPPostSMTPConfig()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a9684d57d301c8de28dba3a1dc22d4708"></a><!-- doxytag: member="SMTP.c::HTTPPostSMTPConfig" ref="a9684d57d301c8de28dba3a1dc22d4708" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HTTP_IO_RESULT HTTPPostSMTPConfig </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function reads an input parameter from the POSTed data, and writes that string to the configuration values for SMTP. </p>

<p>Definition at line <a class="el" href="_s_m_t_p_8c_source.html#l00228">228</a> of file <a class="el" href="_s_m_t_p_8c_source.html">SMTP.c</a>.</p>

<p>References <a class="el" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>, <a class="el" href="_security_system_8h_source.html#l00040">EEDATASTART_XPL</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_hardware_profile_8h_source.html#l00201">putsUART</a>, <a class="el" href="_s_m_t_p_8c.html#a3746f2a3dca6ddc436e7f0d61e13d0bd">SM_SMTP_ACTIVE</a>, <a class="el" href="_s_m_t_p_8c.html#a8f57b6bd4f0751253b6d81eee85679aa">SM_SMTP_ARMDISARM</a>, <a class="el" href="_s_m_t_p_8c.html#a3224932b10e5b3c3366b86d2439b263b">SM_SMTP_INITALALARM</a>, <a class="el" href="_s_m_t_p_8c.html#a84785a9f08d4feeee843cfdb93393a81">SM_SMTP_PASSWORD</a>, <a class="el" href="_s_m_t_p_8c.html#ad4c5f8e2818f01110acef98ea0f53edf">SM_SMTP_PORT</a>, <a class="el" href="_s_m_t_p_8c.html#ab02bdbb35616062c8a6b8ceacda13dd2">SM_SMTP_SERVER</a>, <a class="el" href="_s_m_t_p_8c.html#afdedda48f45b7c31a1d3731c9b90ed48">SM_SMTP_SSL</a>, <a class="el" href="_s_m_t_p_8c.html#abc843aa264bd8fe2da2104d2bb0e6b90">SM_SMTP_START</a>, <a class="el" href="_s_m_t_p_8c.html#a79b7297fb197e1d1fa57757d2b176b31">SM_SMTP_SUCCESS</a>, <a class="el" href="_s_m_t_p_8c.html#a145891d81ef63bc56f0b9fdf88fa9af4">SM_SMTP_TO</a>, <a class="el" href="_s_m_t_p_8c.html#a4296ece9f5a368f1de465786c198ab35">SM_SMTP_USER</a>, <a class="el" href="_security_system_8h_source.html#l00217">xPLConfigs::SMTP_Active</a>, <a class="el" href="_security_system_8h_source.html#l00219">xPLConfigs::SMTP_ArmDisarm</a>, <a class="el" href="_security_system_8h_source.html#l00218">xPLConfigs::SMTP_OnlyInitalAlarm</a>, <a class="el" href="_security_system_8h_source.html#l00213">xPLConfigs::SMTP_Password</a>, <a class="el" href="_security_system_8h_source.html#l00214">xPLConfigs::SMTP_Port</a>, <a class="el" href="_security_system_8h_source.html#l00211">xPLConfigs::SMTP_Server</a>, <a class="el" href="_security_system_8h_source.html#l00210">xPLConfigs::SMTP_To</a>, <a class="el" href="_security_system_8h_source.html#l00212">xPLConfigs::SMTP_User</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="_security_system_8c_source.html#l00136">xPLConfig</a>, and <a class="el" href="x_p_l_8c_source.html#l00194">xPLSaveEEConfig()</a>.</p>

<p>Referenced by <a class="el" href="_h_t_t_p_forms_8c_source.html#l00573">HTTPExecutePost()</a>.</p>
<div class="fragment"><pre class="fragment">                                        {

    BYTE temp[16];
    BYTE *ptr;

    <span class="comment">// Define state machine values</span>
<span class="preprocessor">    #define SM_SMTP_START                       (0u)</span>
<span class="preprocessor"></span><span class="preprocessor">    #define SM_SMTP_TO                          (1u)</span>
<span class="preprocessor"></span><span class="preprocessor">    #define SM_SMTP_SERVER                      (2u)</span>
<span class="preprocessor"></span><span class="preprocessor">    #define SM_SMTP_USER                        (3u)</span>
<span class="preprocessor"></span><span class="preprocessor">    #define SM_SMTP_PASSWORD            (4u)</span>
<span class="preprocessor"></span><span class="preprocessor">    #define SM_SMTP_PORT                        (5u)</span>
<span class="preprocessor"></span><span class="preprocessor">    #define SM_SMTP_SSL                         (6u)</span>
<span class="preprocessor"></span><span class="preprocessor">    #define SM_SMTP_ACTIVE                      (7u)</span>
<span class="preprocessor"></span><span class="preprocessor">    #define SM_SMTP_INITALALARM         (8u)</span>
<span class="preprocessor"></span><span class="preprocessor">    #define SM_SMTP_ARMDISARM           (9u)</span>
<span class="preprocessor"></span><span class="preprocessor">    #define SM_SMTP_SUCCESS                     (10u)</span>
<span class="preprocessor"></span>
    <span class="keywordflow">switch</span>(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.smPost)
    {
        <span class="keywordflow">case</span> <a class="code" href="_s_m_t_p_8c.html#abc843aa264bd8fe2da2104d2bb0e6b90">SM_SMTP_START</a>:
            <span class="comment">// Read the next variable name.  If a complete name is</span>
            <span class="comment">// not found, request more data.  This function will</span>
            <span class="comment">// automatically truncate invalid data to prevent</span>
            <span class="comment">// buffer overflows.</span>

            <span class="keywordflow">if</span>(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.byteCount == 0) {
                                <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.smPost = <a class="code" href="_s_m_t_p_8c.html#a79b7297fb197e1d1fa57757d2b176b31">SM_SMTP_SUCCESS</a>;
                                <span class="keywordflow">break</span>;
                        }

            <span class="keywordflow">if</span>(HTTPReadPostName(temp,16) == HTTP_READ_INCOMPLETE)
                <span class="keywordflow">return</span> HTTP_IO_NEED_DATA;

            <span class="keywordflow">if</span>(!strcmppgm2ram((<span class="keywordtype">char</span>*)temp, (ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;to&quot;</span>))
                <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.smPost = <a class="code" href="_s_m_t_p_8c.html#a145891d81ef63bc56f0b9fdf88fa9af4">SM_SMTP_TO</a>;

            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmppgm2ram((<span class="keywordtype">char</span>*)temp, (ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;server&quot;</span>))
                <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.smPost = <a class="code" href="_s_m_t_p_8c.html#ab02bdbb35616062c8a6b8ceacda13dd2">SM_SMTP_SERVER</a>;

            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmppgm2ram((<span class="keywordtype">char</span>*)temp, (ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;user&quot;</span>))
                <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.smPost = <a class="code" href="_s_m_t_p_8c.html#a4296ece9f5a368f1de465786c198ab35">SM_SMTP_USER</a>;

            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmppgm2ram((<span class="keywordtype">char</span>*)temp, (ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;pw&quot;</span>))
                <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.smPost = <a class="code" href="_s_m_t_p_8c.html#a84785a9f08d4feeee843cfdb93393a81">SM_SMTP_PASSWORD</a>;

            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmppgm2ram((<span class="keywordtype">char</span>*)temp, (ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;port&quot;</span>))
                <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.smPost = <a class="code" href="_s_m_t_p_8c.html#ad4c5f8e2818f01110acef98ea0f53edf">SM_SMTP_PORT</a>;

            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmppgm2ram((<span class="keywordtype">char</span>*)temp, (ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;ssl&quot;</span>))
                <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.smPost = <a class="code" href="_s_m_t_p_8c.html#afdedda48f45b7c31a1d3731c9b90ed48">SM_SMTP_SSL</a>;

            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmppgm2ram((<span class="keywordtype">char</span>*)temp, (ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;active&quot;</span>))
                <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.smPost = <a class="code" href="_s_m_t_p_8c.html#a3746f2a3dca6ddc436e7f0d61e13d0bd">SM_SMTP_ACTIVE</a>;

            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmppgm2ram((<span class="keywordtype">char</span>*)temp, (ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;initalarm&quot;</span>))
                <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.smPost = <a class="code" href="_s_m_t_p_8c.html#a3224932b10e5b3c3366b86d2439b263b">SM_SMTP_INITALALARM</a>;

            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmppgm2ram((<span class="keywordtype">char</span>*)temp, (ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;armdisarm&quot;</span>))
                <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.smPost = <a class="code" href="_s_m_t_p_8c.html#a8f57b6bd4f0751253b6d81eee85679aa">SM_SMTP_ARMDISARM</a>;


            <span class="keywordflow">else</span> {
                        <span class="comment">// Something has gone wrong</span>
<span class="preprocessor">                                #if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Finished POST early due to unexpected name: &quot;</span>);
                                        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(temp);
                                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);
<span class="preprocessor">                                #endif</span>
<span class="preprocessor"></span>
                        <span class="keywordflow">return</span> HTTP_IO_DONE;
                        }
                <span class="keywordflow">break</span>;


        <span class="keywordflow">case</span> <a class="code" href="_s_m_t_p_8c.html#a145891d81ef63bc56f0b9fdf88fa9af4">SM_SMTP_TO</a>:
            memset(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8778223aa7dbf70c6bb0b0be39cb85c1" title="Email address to send messages to.">SMTP_To</a>,<span class="charliteral">&#39;\0&#39;</span>,<span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8778223aa7dbf70c6bb0b0be39cb85c1" title="Email address to send messages to.">SMTP_To</a>));
            <span class="keywordflow">if</span>(HTTPReadPostValue(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8778223aa7dbf70c6bb0b0be39cb85c1" title="Email address to send messages to.">SMTP_To</a> ,<span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8778223aa7dbf70c6bb0b0be39cb85c1" title="Email address to send messages to.">SMTP_To</a>) + 2) == HTTP_READ_INCOMPLETE)
                <span class="keywordflow">return</span> HTTP_IO_NEED_DATA;
            <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.smPost = <a class="code" href="_s_m_t_p_8c.html#abc843aa264bd8fe2da2104d2bb0e6b90">SM_SMTP_START</a>; <span class="comment">// Return to read a new name</span>
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> <a class="code" href="_s_m_t_p_8c.html#ab02bdbb35616062c8a6b8ceacda13dd2">SM_SMTP_SERVER</a>:
                        memset(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8156a5ee6327dc7845895b0fa515526a" title="POP3 server.">SMTP_Server</a>,<span class="charliteral">&#39;\0&#39;</span>,<span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8156a5ee6327dc7845895b0fa515526a" title="POP3 server.">SMTP_Server</a>));
                <span class="keywordflow">if</span>(HTTPReadPostValue(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8156a5ee6327dc7845895b0fa515526a" title="POP3 server.">SMTP_Server</a> ,<span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8156a5ee6327dc7845895b0fa515526a" title="POP3 server.">SMTP_Server</a>) + 2 ) == HTTP_READ_INCOMPLETE)
                <span class="keywordflow">return</span> HTTP_IO_NEED_DATA;
            <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.smPost = <a class="code" href="_s_m_t_p_8c.html#abc843aa264bd8fe2da2104d2bb0e6b90">SM_SMTP_START</a>; <span class="comment">// Return to read a new name</span>
            <span class="keywordflow">break</span>;


        <span class="keywordflow">case</span> <a class="code" href="_s_m_t_p_8c.html#a4296ece9f5a368f1de465786c198ab35">SM_SMTP_USER</a>:
                        memset(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a40dc641766a810ac5d18938b37dd994a" title="POP3 User name.">SMTP_User</a>,<span class="charliteral">&#39;\0&#39;</span>,<span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a40dc641766a810ac5d18938b37dd994a" title="POP3 User name.">SMTP_User</a>));
                <span class="keywordflow">if</span>(HTTPReadPostValue(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a40dc641766a810ac5d18938b37dd994a" title="POP3 User name.">SMTP_User</a> ,<span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a40dc641766a810ac5d18938b37dd994a" title="POP3 User name.">SMTP_User</a>) + 2) == HTTP_READ_INCOMPLETE)
                <span class="keywordflow">return</span> HTTP_IO_NEED_DATA;
            <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.smPost = <a class="code" href="_s_m_t_p_8c.html#abc843aa264bd8fe2da2104d2bb0e6b90">SM_SMTP_START</a>; <span class="comment">// Return to read a new name</span>
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> <a class="code" href="_s_m_t_p_8c.html#a84785a9f08d4feeee843cfdb93393a81">SM_SMTP_PASSWORD</a>:
                memset(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a4277070293a247ee4fde233694fb45df" title="POP3 Password.">SMTP_Password</a>,<span class="charliteral">&#39;\0&#39;</span>,<span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a4277070293a247ee4fde233694fb45df" title="POP3 Password.">SMTP_Password</a>));
                <span class="keywordflow">if</span>(HTTPReadPostValue(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a4277070293a247ee4fde233694fb45df" title="POP3 Password.">SMTP_Password</a> ,<span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a4277070293a247ee4fde233694fb45df" title="POP3 Password.">SMTP_Password</a>) + 2) == HTTP_READ_INCOMPLETE)
                <span class="keywordflow">return</span> HTTP_IO_NEED_DATA;
            <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.smPost = <a class="code" href="_s_m_t_p_8c.html#abc843aa264bd8fe2da2104d2bb0e6b90">SM_SMTP_START</a>; <span class="comment">// Return to read a new name</span>
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> <a class="code" href="_s_m_t_p_8c.html#ad4c5f8e2818f01110acef98ea0f53edf">SM_SMTP_PORT</a>:
                <span class="keywordflow">if</span>(HTTPReadPostValue(temp ,<span class="keyword">sizeof</span>(temp) + 2) == HTTP_READ_INCOMPLETE)
                <span class="keywordflow">return</span> HTTP_IO_NEED_DATA;
            <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#aee37c1d00389d706372a278f1d768ba9" title="Port number.">SMTP_Port</a> = atoi(temp);
                <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.smPost = <a class="code" href="_s_m_t_p_8c.html#abc843aa264bd8fe2da2104d2bb0e6b90">SM_SMTP_START</a>; <span class="comment">// Return to read a new name</span>
            <span class="keywordflow">break</span>;

<span class="comment">/*        case SM_SMTP_SSL:</span>
<span class="comment">                if(HTTPReadPostValue(temp ,sizeof(temp)) == HTTP_READ_INCOMPLETE)</span>
<span class="comment">                return HTTP_IO_NEED_DATA;</span>
<span class="comment">            if(temp[0] == &#39;1&#39;)</span>
<span class="comment">                xPLConfig.SMTP_UseSSL = TRUE;</span>
<span class="comment">            if(temp[0] == &#39;0&#39;)</span>
<span class="comment">                xPLConfig.SMTP_UseSSL = FALSE;</span>
<span class="comment">                curHTTP.smPost = SM_SMTP_START; // Return to read a new name</span>
<span class="comment">            break;</span>
<span class="comment"> */</span>
        <span class="keywordflow">case</span> <a class="code" href="_s_m_t_p_8c.html#a3746f2a3dca6ddc436e7f0d61e13d0bd">SM_SMTP_ACTIVE</a>:
                <span class="keywordflow">if</span>(HTTPReadPostValue(temp ,<span class="keyword">sizeof</span>(temp) + 2) == HTTP_READ_INCOMPLETE)
                <span class="keywordflow">return</span> HTTP_IO_NEED_DATA;
            <span class="keywordflow">if</span>(temp[0] == <span class="charliteral">&#39;1&#39;</span>)
                <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#ad7a2f7ae853ee440f60271813c6d6916" title="Disable emails.">SMTP_Active</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
            <span class="keywordflow">if</span>(temp[0] == <span class="charliteral">&#39;0&#39;</span>)
                <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#ad7a2f7ae853ee440f60271813c6d6916" title="Disable emails.">SMTP_Active</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.smPost = <a class="code" href="_s_m_t_p_8c.html#abc843aa264bd8fe2da2104d2bb0e6b90">SM_SMTP_START</a>; <span class="comment">// Return to read a new name</span>
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> <a class="code" href="_s_m_t_p_8c.html#a3224932b10e5b3c3366b86d2439b263b">SM_SMTP_INITALALARM</a>:
                <span class="keywordflow">if</span>(HTTPReadPostValue(temp ,<span class="keyword">sizeof</span>(temp) + 2) == HTTP_READ_INCOMPLETE)
                <span class="keywordflow">return</span> HTTP_IO_NEED_DATA;
            <span class="keywordflow">if</span>(temp[0] == <span class="charliteral">&#39;1&#39;</span>)
                <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8beaa9013aba813e75cdea886e6636d8" title="Only send emails on the inital alarm.">SMTP_OnlyInitalAlarm</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
            <span class="keywordflow">if</span>(temp[0] == <span class="charliteral">&#39;0&#39;</span>)
                <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8beaa9013aba813e75cdea886e6636d8" title="Only send emails on the inital alarm.">SMTP_OnlyInitalAlarm</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.smPost = <a class="code" href="_s_m_t_p_8c.html#abc843aa264bd8fe2da2104d2bb0e6b90">SM_SMTP_START</a>; <span class="comment">// Return to read a new name</span>
            <span class="keywordflow">break</span>;


        <span class="keywordflow">case</span> <a class="code" href="_s_m_t_p_8c.html#a8f57b6bd4f0751253b6d81eee85679aa">SM_SMTP_ARMDISARM</a>:
                <span class="keywordflow">if</span>(HTTPReadPostValue(temp ,<span class="keyword">sizeof</span>(temp) + 2) == HTTP_READ_INCOMPLETE)
                <span class="keywordflow">return</span> HTTP_IO_NEED_DATA;
            <span class="keywordflow">if</span>(temp[0] == <span class="charliteral">&#39;1&#39;</span>)
                <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a01d912d78612ae09e83da0487f415069" title="Send emails on all arm and disarm events.">SMTP_ArmDisarm</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
            <span class="keywordflow">if</span>(temp[0] == <span class="charliteral">&#39;0&#39;</span>)
                <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a01d912d78612ae09e83da0487f415069" title="Send emails on all arm and disarm events.">SMTP_ArmDisarm</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.smPost = <a class="code" href="_s_m_t_p_8c.html#abc843aa264bd8fe2da2104d2bb0e6b90">SM_SMTP_START</a>; <span class="comment">// Return to read a new name</span>
        <span class="comment">//    break;</span>

                <span class="comment">// The POST is only accepted after the SM_SMTP_ARMDISARM, it will fail if this is missing</span>
                <span class="comment">// dont like this design but it should never be an issue</span>


             <span class="keywordflow">case</span> <a class="code" href="_s_m_t_p_8c.html#a79b7297fb197e1d1fa57757d2b176b31">SM_SMTP_SUCCESS</a>:
<span class="preprocessor">                        #if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Finished POST correctly\r\n&quot;</span>);
<span class="preprocessor">                        #endif</span>
<span class="preprocessor"></span>
                        <span class="comment">// now we save all of it</span>
                        <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(&amp;<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>, <a class="code" href="_security_system_8h.html#ae33a92f4e46c1d70d59e71bd1eecc209">EEDATASTART_XPL</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>));

                <span class="keywordflow">return</span> HTTP_IO_DONE; <span class="comment">// we are complete</span>


    } <span class="comment">// switch(curHTTP.smPost)</span>

    <span class="keywordflow">return</span> HTTP_IO_WAITING;

} <span class="comment">//  HTTPPostSMTPConfig</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_s_m_t_p_8c_a9684d57d301c8de28dba3a1dc22d4708_cgraph.svg" width="510" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_s_m_t_p_8c_a9684d57d301c8de28dba3a1dc22d4708_icgraph.svg" width="510" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="af1e8f2444504e3af680757da4f2309d3"></a><!-- doxytag: member="SMTP.c::HTTPPrint_SMTP_Active" ref="af1e8f2444504e3af680757da4f2309d3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HTTPPrint_SMTP_Active </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prints if email service is active. </p>

<p>Definition at line <a class="el" href="_s_m_t_p_8c_source.html#l00148">148</a> of file <a class="el" href="_s_m_t_p_8c_source.html">SMTP.c</a>.</p>

<p>References <a class="el" href="_security_system_8h_source.html#l00217">xPLConfigs::SMTP_Active</a>, and <a class="el" href="_security_system_8c_source.html#l00136">xPLConfig</a>.</p>
<div class="fragment"><pre class="fragment">                                  {

        TCPPut(sktHTTP, (<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#ad7a2f7ae853ee440f60271813c6d6916" title="Disable emails.">SMTP_Active</a>?<span class="charliteral">&#39;1&#39;</span>:<span class="charliteral">&#39;0&#39;</span>));
        <span class="keywordflow">return</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab4e7e62e22387a3a109f7059fd6b1aa3"></a><!-- doxytag: member="SMTP.c::HTTPPrint_SMTP_ArmDisarm" ref="ab4e7e62e22387a3a109f7059fd6b1aa3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HTTPPrint_SMTP_ArmDisarm </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prints if emails should be sent on disarm. </p>

<p>Definition at line <a class="el" href="_s_m_t_p_8c_source.html#l00162">162</a> of file <a class="el" href="_s_m_t_p_8c_source.html">SMTP.c</a>.</p>

<p>References <a class="el" href="_security_system_8h_source.html#l00219">xPLConfigs::SMTP_ArmDisarm</a>, and <a class="el" href="_security_system_8c_source.html#l00136">xPLConfig</a>.</p>
<div class="fragment"><pre class="fragment">                                     {

        TCPPut(sktHTTP, (<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a01d912d78612ae09e83da0487f415069" title="Send emails on all arm and disarm events.">SMTP_ArmDisarm</a>?<span class="charliteral">&#39;1&#39;</span>:<span class="charliteral">&#39;0&#39;</span>));
        <span class="keywordflow">return</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a75a3543052b6c130768219356a2ae27d"></a><!-- doxytag: member="SMTP.c::HTTPPrint_SMTP_OnlyInitalAlarm" ref="a75a3543052b6c130768219356a2ae27d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HTTPPrint_SMTP_OnlyInitalAlarm </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prints if emails will only be sent on the first trigger of the alarm. </p>

<p>Definition at line <a class="el" href="_s_m_t_p_8c_source.html#l00155">155</a> of file <a class="el" href="_s_m_t_p_8c_source.html">SMTP.c</a>.</p>

<p>References <a class="el" href="_security_system_8h_source.html#l00218">xPLConfigs::SMTP_OnlyInitalAlarm</a>, and <a class="el" href="_security_system_8c_source.html#l00136">xPLConfig</a>.</p>
<div class="fragment"><pre class="fragment">                                           {

        TCPPut(sktHTTP, (<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8beaa9013aba813e75cdea886e6636d8" title="Only send emails on the inital alarm.">SMTP_OnlyInitalAlarm</a>?<span class="charliteral">&#39;1&#39;</span>:<span class="charliteral">&#39;0&#39;</span>));
        <span class="keywordflow">return</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3190ae95fd7babc451918bb7cf444df4"></a><!-- doxytag: member="SMTP.c::HTTPPrint_SMTP_Password" ref="a3190ae95fd7babc451918bb7cf444df4" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HTTPPrint_SMTP_Password </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prints the password to login to the POP3 server. </p>

<p>Definition at line <a class="el" href="_s_m_t_p_8c_source.html#l00091">91</a> of file <a class="el" href="_s_m_t_p_8c_source.html">SMTP.c</a>.</p>

<p>References <a class="el" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>, <a class="el" href="_security_system_8h_source.html#l00213">xPLConfigs::SMTP_Password</a>, and <a class="el" href="_security_system_8c_source.html#l00136">xPLConfig</a>.</p>
<div class="fragment"><pre class="fragment">                                    {

        <span class="comment">// Set a flag to indicate not finished</span>
        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.callbackPos = 1;

        <span class="comment">// Make sure there&#39;s enough output space</span>
        <span class="keywordflow">if</span>(TCPIsPutReady(sktHTTP) &lt; <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a4277070293a247ee4fde233694fb45df" title="POP3 Password.">SMTP_Password</a>))
                <span class="keywordflow">return</span>;

        TCPPutArray(sktHTTP, <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a4277070293a247ee4fde233694fb45df" title="POP3 Password.">SMTP_Password</a>, strlen(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a4277070293a247ee4fde233694fb45df" title="POP3 Password.">SMTP_Password</a>));

        <span class="comment">// Indicate that we&#39;re done</span>
        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.callbackPos = 0x00;
        <span class="keywordflow">return</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af03f817c26c62e7abeef07acd98db6b4"></a><!-- doxytag: member="SMTP.c::HTTPPrint_SMTP_Port" ref="af03f817c26c62e7abeef07acd98db6b4" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HTTPPrint_SMTP_Port </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Port number that the POP3 server runs from. </p>

<p>Definition at line <a class="el" href="_s_m_t_p_8c_source.html#l00108">108</a> of file <a class="el" href="_s_m_t_p_8c_source.html">SMTP.c</a>.</p>

<p>References <a class="el" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>, <a class="el" href="_security_system_8h_source.html#l00214">xPLConfigs::SMTP_Port</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00031">Tempdigits</a>, and <a class="el" href="_security_system_8c_source.html#l00136">xPLConfig</a>.</p>
<div class="fragment"><pre class="fragment">                                {

        <span class="keywordtype">char</span> <a class="code" href="_h_t_t_p_variables_8c.html#a4a12a73a2ac88a3f8232f8fd13a932b4" title="used for int conversions">Tempdigits</a>[6];

        <span class="comment">// Set a flag to indicate not finished</span>
        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.callbackPos = 1;

        <span class="comment">// Make sure there&#39;s enough output space</span>
        <span class="keywordflow">if</span>(TCPIsPutReady(sktHTTP) &lt; <span class="keyword">sizeof</span>(Tempdigits))
                <span class="keywordflow">return</span>;

        uitoa(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#aee37c1d00389d706372a278f1d768ba9" title="Port number.">SMTP_Port</a>,  Tempdigits);
        TCPPutArray(sktHTTP, Tempdigits, strlen((<span class="keywordtype">char</span>*)Tempdigits));

        <span class="comment">// Indicate that we&#39;re done</span>
        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.callbackPos = 0x00;
        <span class="keywordflow">return</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0757311e35db0e69fc2a849b112e7937"></a><!-- doxytag: member="SMTP.c::HTTPPrint_SMTP_Server" ref="a0757311e35db0e69fc2a849b112e7937" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HTTPPrint_SMTP_Server </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prints the POP3 sever. </p>

<p>Definition at line <a class="el" href="_s_m_t_p_8c_source.html#l00057">57</a> of file <a class="el" href="_s_m_t_p_8c_source.html">SMTP.c</a>.</p>

<p>References <a class="el" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>, <a class="el" href="_security_system_8h_source.html#l00211">xPLConfigs::SMTP_Server</a>, and <a class="el" href="_security_system_8c_source.html#l00136">xPLConfig</a>.</p>
<div class="fragment"><pre class="fragment">                                  {

        <span class="comment">// Set a flag to indicate not finished</span>
        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.callbackPos = 1;

        <span class="comment">// Make sure there&#39;s enough output space</span>
        <span class="keywordflow">if</span>(TCPIsPutReady(sktHTTP) &lt; <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8156a5ee6327dc7845895b0fa515526a" title="POP3 server.">SMTP_Server</a>))
                <span class="keywordflow">return</span>;

        TCPPutArray(sktHTTP, <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8156a5ee6327dc7845895b0fa515526a" title="POP3 server.">SMTP_Server</a>, strlen(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8156a5ee6327dc7845895b0fa515526a" title="POP3 server.">SMTP_Server</a>));

        <span class="comment">// Indicate that we&#39;re done</span>
        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.callbackPos = 0x00;
        <span class="keywordflow">return</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3657eec79f7389e841f7abf7b14b4d10"></a><!-- doxytag: member="SMTP.c::HTTPPrint_SMTP_To" ref="a3657eec79f7389e841f7abf7b14b4d10" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HTTPPrint_SMTP_To </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prints who the email is addressed to. </p>
<p>P R I V A T E P R O T O T Y P E S </p>

<p>Definition at line <a class="el" href="_s_m_t_p_8c_source.html#l00039">39</a> of file <a class="el" href="_s_m_t_p_8c_source.html">SMTP.c</a>.</p>

<p>References <a class="el" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>, <a class="el" href="_security_system_8h_source.html#l00210">xPLConfigs::SMTP_To</a>, and <a class="el" href="_security_system_8c_source.html#l00136">xPLConfig</a>.</p>
<div class="fragment"><pre class="fragment">                              {

        <span class="comment">// Set a flag to indicate not finished</span>
        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.callbackPos = 1;

        <span class="comment">// Make sure there&#39;s enough output space</span>
        <span class="keywordflow">if</span>(TCPIsPutReady(sktHTTP) &lt; <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8778223aa7dbf70c6bb0b0be39cb85c1" title="Email address to send messages to.">SMTP_To</a>))
                <span class="keywordflow">return</span>;

        TCPPutArray(sktHTTP, <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8778223aa7dbf70c6bb0b0be39cb85c1" title="Email address to send messages to.">SMTP_To</a>, strlen(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8778223aa7dbf70c6bb0b0be39cb85c1" title="Email address to send messages to.">SMTP_To</a>));

        <span class="comment">// Indicate that we&#39;re done</span>
        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.callbackPos = 0x00;
        <span class="keywordflow">return</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a37dbbe8a7b4365a689be733d57f324c1"></a><!-- doxytag: member="SMTP.c::HTTPPrint_SMTP_User" ref="a37dbbe8a7b4365a689be733d57f324c1" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HTTPPrint_SMTP_User </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prints the user name to login to the POP3 server. </p>

<p>Definition at line <a class="el" href="_s_m_t_p_8c_source.html#l00074">74</a> of file <a class="el" href="_s_m_t_p_8c_source.html">SMTP.c</a>.</p>

<p>References <a class="el" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>, <a class="el" href="_security_system_8h_source.html#l00212">xPLConfigs::SMTP_User</a>, and <a class="el" href="_security_system_8c_source.html#l00136">xPLConfig</a>.</p>
<div class="fragment"><pre class="fragment">                                {

        <span class="comment">// Set a flag to indicate not finished</span>
        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.callbackPos = 1;

        <span class="comment">// Make sure there&#39;s enough output space</span>
        <span class="keywordflow">if</span>(TCPIsPutReady(sktHTTP) &lt; <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a40dc641766a810ac5d18938b37dd994a" title="POP3 User name.">SMTP_User</a>))
                <span class="keywordflow">return</span>;

        TCPPutArray(sktHTTP, <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a40dc641766a810ac5d18938b37dd994a" title="POP3 User name.">SMTP_User</a>, strlen(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a40dc641766a810ac5d18938b37dd994a" title="POP3 User name.">SMTP_User</a>));

        <span class="comment">// Indicate that we&#39;re done</span>
        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.callbackPos = 0x00;
        <span class="keywordflow">return</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4c18819533a6c1917e34ea814831f094"></a><!-- doxytag: member="SMTP.c::HTTPPrint_SMTPTestOutput" ref="a4c18819533a6c1917e34ea814831f094" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HTTPPrint_SMTPTestOutput </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prnits test data for P0P3 results. </p>

<p>Definition at line <a class="el" href="_s_m_t_p_8c_source.html#l00170">170</a> of file <a class="el" href="_s_m_t_p_8c_source.html">SMTP.c</a>.</p>

<p>References <a class="el" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00030">SMPTTestResult</a>, <a class="el" href="_security_system_8h_source.html#l00060">SMTP_TEST_DONE</a>, and <a class="el" href="_h_t_t_p_variables_8c_source.html#l00031">Tempdigits</a>.</p>
<div class="fragment"><pre class="fragment">                                     {



        <span class="keywordtype">char</span> <a class="code" href="_h_t_t_p_variables_8c.html#a4a12a73a2ac88a3f8232f8fd13a932b4" title="used for int conversions">Tempdigits</a>[6];

        <span class="comment">// Set a flag to indicate not finished</span>
        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.callbackPos = 1;

        <span class="comment">// Make sure there&#39;s enough output space</span>
        <span class="keywordflow">if</span>(TCPIsPutReady(sktHTTP) &lt; 17)
                <span class="keywordflow">return</span>;

        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8h.html#a9cbd255a539aaee43372b00cbc47498e" title="used for testing email">SMPTTestResult</a> == SMTP_SUCCESS)
                TCPPutROMString(sktHTTP, (ROM BYTE*)<span class="stringliteral">&quot;Successful&quot;</span>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_security_system_8h.html#a9cbd255a539aaee43372b00cbc47498e" title="used for testing email">SMPTTestResult</a> == SMTP_RESOLVE_ERROR)
                TCPPutROMString(sktHTTP, (ROM BYTE*)<span class="stringliteral">&quot;DNS error&quot;</span>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_security_system_8h.html#a9cbd255a539aaee43372b00cbc47498e" title="used for testing email">SMPTTestResult</a> == SMTP_CONNECT_ERROR)
                TCPPutROMString(sktHTTP, (ROM BYTE*)<span class="stringliteral">&quot;Connection error&quot;</span>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_security_system_8h.html#a9cbd255a539aaee43372b00cbc47498e" title="used for testing email">SMPTTestResult</a> == 554)
                TCPPutROMString(sktHTTP, (ROM BYTE*)<span class="stringliteral">&quot;Transaction failed&quot;</span>);              
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_security_system_8h.html#a9cbd255a539aaee43372b00cbc47498e" title="used for testing email">SMPTTestResult</a> == 550)
                TCPPutROMString(sktHTTP, (ROM BYTE*)<span class="stringliteral">&quot;Requested action not taken: mailbox unavailable&quot;</span>);
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_security_system_8h.html#a9cbd255a539aaee43372b00cbc47498e" title="used for testing email">SMPTTestResult</a> == 552)
                TCPPutROMString(sktHTTP, (ROM BYTE*)<span class="stringliteral">&quot;Requested mail action aborted: exceeded storage allocation&quot;</span>);              
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_security_system_8h.html#a9cbd255a539aaee43372b00cbc47498e" title="used for testing email">SMPTTestResult</a> == 553)
                TCPPutROMString(sktHTTP, (ROM BYTE*)<span class="stringliteral">&quot;Requested action not taken: mailbox name not allowed&quot;</span>);            
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_security_system_8h.html#a9cbd255a539aaee43372b00cbc47498e" title="used for testing email">SMPTTestResult</a> == 530)
                TCPPutROMString(sktHTTP, (ROM BYTE*)<span class="stringliteral">&quot;Access denied&quot;</span>);           
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_security_system_8h.html#a9cbd255a539aaee43372b00cbc47498e" title="used for testing email">SMPTTestResult</a> == 535)
                TCPPutROMString(sktHTTP, (ROM BYTE*)<span class="stringliteral">&quot;SMTP Authentication unsuccessful/Bad username or password&quot;</span>);       
                
        <span class="keywordflow">else</span> {
                uitoa(<a class="code" href="_security_system_8h.html#a9cbd255a539aaee43372b00cbc47498e" title="used for testing email">SMPTTestResult</a>,  Tempdigits);
                TCPPutROMString(sktHTTP, (ROM BYTE*)<span class="stringliteral">&quot;Error# &quot;</span>);
                TCPPutArray(sktHTTP, Tempdigits, strlen((<span class="keywordtype">char</span>*)Tempdigits));
        }

        <span class="comment">// Indicate that we&#39;re done</span>
        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.callbackPos = 0x00;
        <a class="code" href="_security_system_8h.html#a9cbd255a539aaee43372b00cbc47498e" title="used for testing email">SMPTTestResult</a> = <a class="code" href="_security_system_8h.html#a9b173d9d938f8987dbfbcbc284e1f3d1">SMTP_TEST_DONE</a>;

        <span class="keywordflow">return</span>;

}
</pre></div>
</div>
</div>
<a class="anchor" id="ae777555850cf9c897f46c8407ce1729f"></a><!-- doxytag: member="SMTP.c::SMTPQueueEmail" ref="ae777555850cf9c897f46c8407ce1729f" args="(SMTP_SendTypes Email_Type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SMTPQueueEmail </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_security_system_8h.html#ac565b3414da111ba78aef21e6e4ccc6e">SMTP_SendTypes</a>&#160;</td>
          <td class="paramname"><em>Email_Type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Places a new email in the SMTP queue to be processed (sent) </p>

<p>Definition at line <a class="el" href="_s_m_t_p_8c_source.html#l00613">613</a> of file <a class="el" href="_s_m_t_p_8c_source.html">SMTP.c</a>.</p>

<p>References <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8h_source.html#l00311">SMTPTaskLists::FreePosition</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_hardware_profile_8h_source.html#l00201">putsUART</a>, <a class="el" href="_security_system_8h_source.html#l00217">xPLConfigs::SMTP_Active</a>, <a class="el" href="_security_system_8h_source.html#l00304">SMTPTaskStack::SMTP_SendType</a>, <a class="el" href="_security_system_8h_source.html#l00297">SMTP_SM_InQ</a>, <a class="el" href="_security_system_8h_source.html#l00305">SMTPTaskStack::SMTP_State</a>, <a class="el" href="_security_system_8h_source.html#l00057">SMTPSMSIZE</a>, <a class="el" href="_security_system_8h_source.html#l00312">SMTPTaskLists::Task</a>, and <a class="el" href="_security_system_8c_source.html#l00136">xPLConfig</a>.</p>

<p>Referenced by <a class="el" href="_h_t_t_p_forms_8c_source.html#l00028">HTTPExecuteGet()</a>, <a class="el" href="_security_system_8c_source.html#l00193">SchemaInit()</a>, <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>, and <a class="el" href="_security_system_8c_source.html#l00916">StateChangeToAlarming()</a>.</p>
<div class="fragment"><pre class="fragment">                                                 {

        <span class="keywordtype">char</span> TempString[3];

        <span class="comment">// If emails are not active, drop out and do nothing</span>
        <span class="keywordflow">if</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#ad7a2f7ae853ee440f60271813c6d6916" title="Disable emails.">SMTP_Active</a> == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
                <span class="keywordflow">return</span>;

<span class="preprocessor">        #if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Email placed in queue \r\n  - SMTP task position&quot;</span>);
                uitoa(<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#a252586a850ff6e288645a8a42adb50a6" title="Task number that is free to create a new task in.">FreePosition</a>,  TempString);
                <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(TempString);
                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);
<span class="preprocessor">        #endif</span>
<span class="preprocessor"></span>
        <a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#af739e294f161d72b2129fc97ff54555a" title="an array of the tasks, see SMTPTaskStack">Task</a>[<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#a252586a850ff6e288645a8a42adb50a6" title="Task number that is free to create a new task in.">FreePosition</a>].<a class="code" href="struct_s_m_t_p_task_stack.html#ad7d5f9f143e2b81309862ac4e9375751" title="Type of email to be sent.">SMTP_SendType</a> = Email_Type;
        <a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#af739e294f161d72b2129fc97ff54555a" title="an array of the tasks, see SMTPTaskStack">Task</a>[<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#a252586a850ff6e288645a8a42adb50a6" title="Task number that is free to create a new task in.">FreePosition</a>].<a class="code" href="struct_s_m_t_p_task_stack.html#a79e69c016dcf680ccb574f0c9c88ed31" title="Current state of the task (State Machine)">SMTP_State</a> = <a class="code" href="_security_system_8h.html#abb997235328abd40ef9f7185debb4e3ba51e3f81d22665d7ef84b971a484335bf">SMTP_SM_InQ</a>;

        <span class="comment">// Increaments the Free position, ready for the next task.</span>
        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#a252586a850ff6e288645a8a42adb50a6" title="Task number that is free to create a new task in.">FreePosition</a> &lt; (<a class="code" href="_security_system_8h.html#a3d9716c1403629a6282a6ad8a7300326">SMTPSMSIZE</a>-1))
                <a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#a252586a850ff6e288645a8a42adb50a6" title="Task number that is free to create a new task in.">FreePosition</a>++;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#a252586a850ff6e288645a8a42adb50a6" title="Task number that is free to create a new task in.">FreePosition</a> &gt;= (<a class="code" href="_security_system_8h.html#a3d9716c1403629a6282a6ad8a7300326">SMTPSMSIZE</a>-1))
                <a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#a252586a850ff6e288645a8a42adb50a6" title="Task number that is free to create a new task in.">FreePosition</a> =0;


} <span class="comment">//SMTPQueueEmail</span>
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_s_m_t_p_8c_ae777555850cf9c897f46c8407ce1729f_icgraph.svg" width="1254" height="243" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa3464edbc8a2b00d44aff04588ed10ef"></a><!-- doxytag: member="SMTP.c::SMTPTaskProcess" ref="aa3464edbc8a2b00d44aff04588ed10ef" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SMTPTaskProcess </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Managers the scheduled sending of emails. </p>

<p>Definition at line <a class="el" href="_s_m_t_p_8c_source.html#l00412">412</a> of file <a class="el" href="_s_m_t_p_8c_source.html">SMTP.c</a>.</p>

<p>References <a class="el" href="_security_system_8h_source.html#l00310">SMTPTaskLists::CurentTask</a>, <a class="el" href="_security_system_8h_source.html#l00012">DEVICEDESCLENGTH</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8h_source.html#l00311">SMTPTaskLists::FreePosition</a>, <a class="el" href="_security_system_8c_source.html#l00035">i2Count</a>, <a class="el" href="_security_system_8c_source.html#l00039">LastZoneAlarmed</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_hardware_profile_8h_source.html#l00201">putsUART</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00030">SMPTTestResult</a>, <a class="el" href="_security_system_8h_source.html#l00217">xPLConfigs::SMTP_Active</a>, <a class="el" href="_security_system_8h_source.html#l00290">SMTP_Alarmed</a>, <a class="el" href="_security_system_8h_source.html#l00288">SMTP_Arm</a>, <a class="el" href="_security_system_8h_source.html#l00289">SMTP_Disarm</a>, <a class="el" href="_security_system_8h_source.html#l00292">SMTP_InternetRestored</a>, <a class="el" href="_security_system_8h_source.html#l00213">xPLConfigs::SMTP_Password</a>, <a class="el" href="_security_system_8h_source.html#l00214">xPLConfigs::SMTP_Port</a>, <a class="el" href="_security_system_8h_source.html#l00291">SMTP_Reset</a>, <a class="el" href="_security_system_8h_source.html#l00304">SMTPTaskStack::SMTP_SendType</a>, <a class="el" href="_security_system_8h_source.html#l00211">xPLConfigs::SMTP_Server</a>, <a class="el" href="_security_system_8h_source.html#l00299">SMTP_SM_Done</a>, <a class="el" href="_security_system_8h_source.html#l00297">SMTP_SM_InQ</a>, <a class="el" href="_security_system_8h_source.html#l00298">SMTP_SM_Working</a>, <a class="el" href="_security_system_8h_source.html#l00305">SMTPTaskStack::SMTP_State</a>, <a class="el" href="_security_system_8h_source.html#l00287">SMTP_Test</a>, <a class="el" href="_security_system_8h_source.html#l00210">xPLConfigs::SMTP_To</a>, <a class="el" href="_security_system_8h_source.html#l00212">xPLConfigs::SMTP_User</a>, <a class="el" href="_security_system_8h_source.html#l00057">SMTPSMSIZE</a>, <a class="el" href="_security_system_8h_source.html#l00312">SMTPTaskLists::Task</a>, <a class="el" href="_security_system_8c_source.html#l00037">UserID</a>, and <a class="el" href="_security_system_8c_source.html#l00136">xPLConfig</a>.</p>

<p>Referenced by <a class="el" href="x_p_l_8c_source.html#l00263">XPLTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                           {

<span class="preprocessor">#if defined(STACK_USE_SMTP_CLIENT)</span>
<span class="preprocessor"></span>
<span class="keyword">static</span> BYTE RAMStringBody[50];
<span class="keywordtype">char</span> DeviceDesc[<a class="code" href="_security_system_8h.html#a61145d9f711460b73af75ef123fc76f6">DEVICEDESCLENGTH</a>];
<span class="keywordtype">int</span> ReturnResult;

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <span class="keywordtype">char</span> TempString[4]; <span class="comment">// prints the status of the SMTP task machine</span>
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
<span class="comment">// Manages the Current Task and keeps it up to date.</span>
<span class="keywordflow">if</span> (<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#af739e294f161d72b2129fc97ff54555a" title="an array of the tasks, see SMTPTaskStack">Task</a>[<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#ab9904ec94e50af81ee513e8b34173db0" title="Task number being processed by the stack at the moment.">CurentTask</a>].<a class="code" href="struct_s_m_t_p_task_stack.html#a79e69c016dcf680ccb574f0c9c88ed31" title="Current state of the task (State Machine)">SMTP_State</a> == <a class="code" href="_security_system_8h.html#abb997235328abd40ef9f7185debb4e3ba3da8cf88892b271e88d8defa9dff74c1">SMTP_SM_Done</a>) {
        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#a252586a850ff6e288645a8a42adb50a6" title="Task number that is free to create a new task in.">FreePosition</a> == <a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#ab9904ec94e50af81ee513e8b34173db0" title="Task number being processed by the stack at the moment.">CurentTask</a>) {
                <span class="keywordflow">return</span>;
        }
        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#ab9904ec94e50af81ee513e8b34173db0" title="Task number being processed by the stack at the moment.">CurentTask</a> &lt; (<a class="code" href="_security_system_8h.html#a3d9716c1403629a6282a6ad8a7300326">SMTPSMSIZE</a>-1))
                <a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#ab9904ec94e50af81ee513e8b34173db0" title="Task number being processed by the stack at the moment.">CurentTask</a>++;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#ab9904ec94e50af81ee513e8b34173db0" title="Task number being processed by the stack at the moment.">CurentTask</a> &gt;= (<a class="code" href="_security_system_8h.html#a3d9716c1403629a6282a6ad8a7300326">SMTPSMSIZE</a>-1))
                <a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#ab9904ec94e50af81ee513e8b34173db0" title="Task number being processed by the stack at the moment.">CurentTask</a> =0;
        <span class="keywordflow">return</span>;
}

<span class="comment">//Check to see if emails are active</span>
<span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#ad7a2f7ae853ee440f60271813c6d6916" title="Disable emails.">SMTP_Active</a> == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) {
        <span class="comment">// Do nothing in this case</span>
<span class="preprocessor">        #if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Doing nothing with SMTP task as SMTP is not active\r\n&quot;</span>);
<span class="preprocessor">        #endif</span>
<span class="preprocessor"></span>        <a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#af739e294f161d72b2129fc97ff54555a" title="an array of the tasks, see SMTPTaskStack">Task</a>[<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#ab9904ec94e50af81ee513e8b34173db0" title="Task number being processed by the stack at the moment.">CurentTask</a>].<a class="code" href="struct_s_m_t_p_task_stack.html#a79e69c016dcf680ccb574f0c9c88ed31" title="Current state of the task (State Machine)">SMTP_State</a> = <a class="code" href="_security_system_8h.html#abb997235328abd40ef9f7185debb4e3ba3da8cf88892b271e88d8defa9dff74c1">SMTP_SM_Done</a>;
        <span class="keywordflow">return</span>;
}

<span class="comment">/*  Sample code</span>
<span class="comment">        // Increaments the Free position, ready for the next task.</span>
<span class="comment">        if (SMTPTaskList.FreePosition &lt; (SMTPSMSIZE-1))</span>
<span class="comment">                SMTPTaskList.FreePosition++;</span>
<span class="comment">        else if(SMTPTaskList.FreePosition &gt;= (SMTPSMSIZE-1))</span>
<span class="comment">                SMTPTaskList.FreePosition =0;</span>
<span class="comment">*/</span>


        <span class="keywordflow">switch</span>(<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#af739e294f161d72b2129fc97ff54555a" title="an array of the tasks, see SMTPTaskStack">Task</a>[<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#ab9904ec94e50af81ee513e8b34173db0" title="Task number being processed by the stack at the moment.">CurentTask</a>].<a class="code" href="struct_s_m_t_p_task_stack.html#a79e69c016dcf680ccb574f0c9c88ed31" title="Current state of the task (State Machine)">SMTP_State</a> ) {

                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#abb997235328abd40ef9f7185debb4e3ba51e3f81d22665d7ef84b971a484335bf">SMTP_SM_InQ</a>:

                        <span class="keywordflow">if</span>(SMTPBeginUsage()) {

                                <span class="comment">// Note that these strings must stay allocated in</span>
                                <span class="comment">// memory until SMTPIsBusy() returns FALSE.  To</span>
                                <span class="comment">// guarantee that the C compiler does not reuse this</span>
                                <span class="comment">// memory, you must allocate the strings as static.</span>

                                memset(RAMStringBody, <span class="charliteral">&#39;\0&#39;</span>,50);

                                SMTPClient.To.szRAM = <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8778223aa7dbf70c6bb0b0be39cb85c1" title="Email address to send messages to.">SMTP_To</a>;
                                SMTPClient.From.szROM = (ROM BYTE*) <span class="stringliteral">&quot;\&quot;Alarm System\&quot; &lt;no-reply@redspartan.com.au&gt;&quot;</span>;
                                SMTPClient.ROMPointers.From = 1;
                                SMTPClient.Server.szRAM = <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8156a5ee6327dc7845895b0fa515526a" title="POP3 server.">SMTP_Server</a>;
                                SMTPClient.Username.szRAM = <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a40dc641766a810ac5d18938b37dd994a" title="POP3 User name.">SMTP_User</a>;
                                SMTPClient.Password.szRAM = <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a4277070293a247ee4fde233694fb45df" title="POP3 Password.">SMTP_Password</a>;
                                SMTPClient.ServerPort = <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#aee37c1d00389d706372a278f1d768ba9" title="Port number.">SMTP_Port</a>;
                                <span class="comment">//#if defined(STACK_USE_SSL)</span>
                                <span class="comment">//      SMTPClient.UseSSL = FALSE; //xPLConfig.SMTP_UseSSL;</span>
                                <span class="comment">//#endif</span>

                                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#af739e294f161d72b2129fc97ff54555a" title="an array of the tasks, see SMTPTaskStack">Task</a>[<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#ab9904ec94e50af81ee513e8b34173db0" title="Task number being processed by the stack at the moment.">CurentTask</a>].<a class="code" href="struct_s_m_t_p_task_stack.html#ad7d5f9f143e2b81309862ac4e9375751" title="Type of email to be sent.">SMTP_SendType</a> == <a class="code" href="_security_system_8h.html#adf08ba7d4e8e4395881e05cb2fabde71ab3c9d4bf0dca93207eab351655af17df">SMTP_Test</a>) {
                                        SMTPClient.Subject.szROM = (ROM BYTE*)<span class="stringliteral">&quot;This is a test email&quot;</span>;
                                        SMTPClient.ROMPointers.Subject = 1;
                                        SMTPClient.Body.szROM = (ROM BYTE*)<span class="stringliteral">&quot;If you see this message the test worked\r\nHave a nice day :)\r\n&quot;</span>;
                                        SMTPClient.ROMPointers.Body = 1;
                                }

                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#af739e294f161d72b2129fc97ff54555a" title="an array of the tasks, see SMTPTaskStack">Task</a>[<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#ab9904ec94e50af81ee513e8b34173db0" title="Task number being processed by the stack at the moment.">CurentTask</a>].<a class="code" href="struct_s_m_t_p_task_stack.html#ad7d5f9f143e2b81309862ac4e9375751" title="Type of email to be sent.">SMTP_SendType</a> == <a class="code" href="_security_system_8h.html#adf08ba7d4e8e4395881e05cb2fabde71a621558074564a0ac1ed2b6cbcd0a8fc6">SMTP_Arm</a>) {
                                        SMTPClient.Subject.szROM = (ROM BYTE*)<span class="stringliteral">&quot;System Armed&quot;</span>;
                                        SMTPClient.ROMPointers.Subject = 1;
                                        memcpypgm2ram(RAMStringBody, (ROM <span class="keywordtype">void</span>*)<span class="stringliteral">&quot;Armed by user:&quot;</span>,14);
                                        strcat(RAMStringBody, <a class="code" href="_security_system_8c.html#af1c18f7532835833de15218c3aa5d146" title="Name of user.">UserID</a>);
                                        SMTPClient.Body.szRAM = RAMStringBody;
                                }
                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#af739e294f161d72b2129fc97ff54555a" title="an array of the tasks, see SMTPTaskStack">Task</a>[<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#ab9904ec94e50af81ee513e8b34173db0" title="Task number being processed by the stack at the moment.">CurentTask</a>].<a class="code" href="struct_s_m_t_p_task_stack.html#ad7d5f9f143e2b81309862ac4e9375751" title="Type of email to be sent.">SMTP_SendType</a> == <a class="code" href="_security_system_8h.html#adf08ba7d4e8e4395881e05cb2fabde71a24aa6860db5441d0687ad842d9e4f86f">SMTP_Disarm</a>) {
                                        SMTPClient.Subject.szROM = (ROM BYTE*)<span class="stringliteral">&quot;System Disarmed&quot;</span>;
                                        SMTPClient.ROMPointers.Subject = 1;
                                        memcpypgm2ram(RAMStringBody, (ROM <span class="keywordtype">void</span>*)<span class="stringliteral">&quot;Disarmed by user:&quot;</span>,17);
                                        strcat(RAMStringBody, <a class="code" href="_security_system_8c.html#af1c18f7532835833de15218c3aa5d146" title="Name of user.">UserID</a>);
                                        SMTPClient.Body.szRAM = RAMStringBody;
                                }

                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#af739e294f161d72b2129fc97ff54555a" title="an array of the tasks, see SMTPTaskStack">Task</a>[<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#ab9904ec94e50af81ee513e8b34173db0" title="Task number being processed by the stack at the moment.">CurentTask</a>].<a class="code" href="struct_s_m_t_p_task_stack.html#ad7d5f9f143e2b81309862ac4e9375751" title="Type of email to be sent.">SMTP_SendType</a> == <a class="code" href="_security_system_8h.html#adf08ba7d4e8e4395881e05cb2fabde71aeefaacd7ffe9237ff8436559742579b7">SMTP_Alarmed</a>) {
                                        SMTPClient.Subject.szROM = (ROM BYTE*)<span class="stringliteral">&quot;Alarm has been triggered&quot;</span>;
                                        SMTPClient.ROMPointers.Subject = 1;
                                        memcpypgm2ram(RAMStringBody, (ROM <span class="keywordtype">void</span>*)<span class="stringliteral">&quot;Zone number:&quot;</span>,12);
                                        uitoa(<a class="code" href="_security_system_8c.html#ab4811cda05bf084486e0e786e68498ea" title="The last zone to change to alarmed state. used in SMTP.c.">LastZoneAlarmed</a>,  DeviceDesc);
                                        strcat(RAMStringBody, DeviceDesc);
                                        memcpypgm2ram(RAMStringBody, (ROM <span class="keywordtype">void</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>,2);

                                        memcpypgm2ram(RAMStringBody, (ROM <span class="keywordtype">void</span>*)<span class="stringliteral">&quot;Zone description:&quot;</span>,17);
                                        <a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a> = <a class="code" href="_security_system_8h.html#a61145d9f711460b73af75ef123fc76f6">DEVICEDESCLENGTH</a>;
                                        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#ab4811cda05bf084486e0e786e68498ea" title="The last zone to change to alarmed state. used in SMTP.c.">LastZoneAlarmed</a> != 0)
                                                <a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a> += (<a class="code" href="_security_system_8c.html#ab4811cda05bf084486e0e786e68498ea" title="The last zone to change to alarmed state. used in SMTP.c.">LastZoneAlarmed</a>) * <a class="code" href="_security_system_8h.html#a61145d9f711460b73af75ef123fc76f6">DEVICEDESCLENGTH</a> + 1;
                                        XEEReadArray ((DWORD) <a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a>, DeviceDesc , (BYTE) <a class="code" href="_security_system_8h.html#a61145d9f711460b73af75ef123fc76f6">DEVICEDESCLENGTH</a>);
                                        strncat(RAMStringBody, DeviceDesc, <a class="code" href="_security_system_8h.html#a61145d9f711460b73af75ef123fc76f6">DEVICEDESCLENGTH</a>);
                                        memcpypgm2ram(RAMStringBody, (ROM <span class="keywordtype">void</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>,2);

                                        SMTPClient.Body.szRAM = RAMStringBody;
                                }

                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#af739e294f161d72b2129fc97ff54555a" title="an array of the tasks, see SMTPTaskStack">Task</a>[<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#ab9904ec94e50af81ee513e8b34173db0" title="Task number being processed by the stack at the moment.">CurentTask</a>].<a class="code" href="struct_s_m_t_p_task_stack.html#ad7d5f9f143e2b81309862ac4e9375751" title="Type of email to be sent.">SMTP_SendType</a> == <a class="code" href="_security_system_8h.html#adf08ba7d4e8e4395881e05cb2fabde71aee6aa005c1fc5d9f46f5aca5dd3660bc">SMTP_Reset</a>) {
                                        SMTPClient.Subject.szROM = (ROM BYTE*)<span class="stringliteral">&quot;Device restarted&quot;</span>;
                                        SMTPClient.ROMPointers.Subject = 1;
                                        SMTPClient.Body.szROM = (ROM BYTE*)<span class="stringliteral">&quot;The device has been restarted. It is not known why. \r\nCurrently Disarmed&quot;</span>;
                                        SMTPClient.ROMPointers.Body = 1;

                                }

                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#af739e294f161d72b2129fc97ff54555a" title="an array of the tasks, see SMTPTaskStack">Task</a>[<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#ab9904ec94e50af81ee513e8b34173db0" title="Task number being processed by the stack at the moment.">CurentTask</a>].<a class="code" href="struct_s_m_t_p_task_stack.html#ad7d5f9f143e2b81309862ac4e9375751" title="Type of email to be sent.">SMTP_SendType</a> == <a class="code" href="_security_system_8h.html#adf08ba7d4e8e4395881e05cb2fabde71ac80b1dbf6a5e492ce85ff9440d60c0ac">SMTP_InternetRestored</a>) {
                                        SMTPClient.Subject.szROM = (ROM BYTE*)<span class="stringliteral">&quot;Internet has been restored&quot;</span>;
                                        SMTPClient.ROMPointers.Subject = 1;
                                        SMTPClient.Body.szROM = (ROM BYTE*)<span class="stringliteral">&quot;Connection to the net was lost, it is back now.&quot;</span>;
                                        SMTPClient.ROMPointers.Body = 1;
                                }

                                <span class="keywordflow">else</span> {
                                        SMTPClient.Subject.szROM = (ROM BYTE*)<span class="stringliteral">&quot;Internal error with SMTP&quot;</span>;
                                        SMTPClient.ROMPointers.Subject = 1;
                                        SMTPClient.Body.szROM = (ROM BYTE*)<span class="stringliteral">&quot;You are seeing this message because something is broken. Get Help!&quot;</span>;
                                        SMTPClient.ROMPointers.Body = 1;
                                }


                                <span class="comment">// inform the SMTP Stack that email is ready for consumption</span>
                                SMTPSendMail();

                                <span class="comment">// inc the task state</span>
                                <a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#af739e294f161d72b2129fc97ff54555a" title="an array of the tasks, see SMTPTaskStack">Task</a>[<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#ab9904ec94e50af81ee513e8b34173db0" title="Task number being processed by the stack at the moment.">CurentTask</a>].<a class="code" href="struct_s_m_t_p_task_stack.html#a79e69c016dcf680ccb574f0c9c88ed31" title="Current state of the task (State Machine)">SMTP_State</a> = <a class="code" href="_security_system_8h.html#abb997235328abd40ef9f7185debb4e3bab4dd2e486984f59e46471623da30664b">SMTP_SM_Working</a>;

<span class="preprocessor">                                #if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;email built\r\n&quot;</span>);
<span class="preprocessor">                                #endif</span>
<span class="preprocessor"></span>
                        }


                        <span class="keywordflow">else</span> {
                                <span class="comment">// Something went wrong</span>
                                <a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#af739e294f161d72b2129fc97ff54555a" title="an array of the tasks, see SMTPTaskStack">Task</a>[<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#ab9904ec94e50af81ee513e8b34173db0" title="Task number being processed by the stack at the moment.">CurentTask</a>].<a class="code" href="struct_s_m_t_p_task_stack.html#a79e69c016dcf680ccb574f0c9c88ed31" title="Current state of the task (State Machine)">SMTP_State</a> = <a class="code" href="_security_system_8h.html#abb997235328abd40ef9f7185debb4e3ba3da8cf88892b271e88d8defa9dff74c1">SMTP_SM_Done</a>;
<span class="preprocessor">                                #if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;email failed to start\r\n&quot;</span>);
<span class="preprocessor">                                #endif</span>
<span class="preprocessor"></span>
                        }
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#abb997235328abd40ef9f7185debb4e3bab4dd2e486984f59e46471623da30664b">SMTP_SM_Working</a>:
                        <span class="keywordflow">if</span>(!SMTPIsBusy()) {

                                <a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#af739e294f161d72b2129fc97ff54555a" title="an array of the tasks, see SMTPTaskStack">Task</a>[<a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#ab9904ec94e50af81ee513e8b34173db0" title="Task number being processed by the stack at the moment.">CurentTask</a>].<a class="code" href="struct_s_m_t_p_task_stack.html#a79e69c016dcf680ccb574f0c9c88ed31" title="Current state of the task (State Machine)">SMTP_State</a> = <a class="code" href="_security_system_8h.html#abb997235328abd40ef9f7185debb4e3ba3da8cf88892b271e88d8defa9dff74c1">SMTP_SM_Done</a>;

<span class="preprocessor">                                #if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;email completed\r\n&quot;</span>);
<span class="preprocessor">                                #endif</span>
<span class="preprocessor"></span>
                                ReturnResult = (int)SMTPEndUsage();

                                <a class="code" href="_security_system_8h.html#a9cbd255a539aaee43372b00cbc47498e" title="used for testing email">SMPTTestResult</a> = ReturnResult;

<span class="preprocessor">                                #if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;email Response code: &quot;</span>);
                                        ultoa (ReturnResult, TempString);
                                        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(TempString);
                                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);
<span class="preprocessor">                                #endif</span>
<span class="preprocessor"></span>
                        }<span class="comment">///SMTPIsBusy</span>
<span class="comment"></span>                        <span class="keywordflow">else</span> {
                                <span class="comment">// Email in progress</span>

                        }

                        <span class="keywordflow">break</span>;

        } <span class="comment">//switch</span>


<span class="preprocessor">#endif //#if defined(STACK_USE_SMTP_CLIENT)</span>
<span class="preprocessor"></span>} <span class="comment">//void SMTPTaskProcess(void)</span>
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_s_m_t_p_8c_aa3464edbc8a2b00d44aff04588ed10ef_icgraph.svg" width="502" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a9cbd255a539aaee43372b00cbc47498e"></a><!-- doxytag: member="SMTP.c::SMPTTestResult" ref="a9cbd255a539aaee43372b00cbc47498e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="_s_m_t_p_8c.html#a9cbd255a539aaee43372b00cbc47498e">SMPTTestResult</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>testing email </p>
<p>used for testing email </p>

<p>Definition at line <a class="el" href="_s_m_t_p_8c_source.html#l00030">30</a> of file <a class="el" href="_s_m_t_p_8c_source.html">SMTP.c</a>.</p>

<p>Referenced by <a class="el" href="_h_t_t_p_forms_8c_source.html#l00028">HTTPExecuteGet()</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00170">HTTPPrint_SMTPTestOutput()</a>, <a class="el" href="_security_system_8c_source.html#l00193">SchemaInit()</a>, and <a class="el" href="_s_m_t_p_8c_source.html#l00412">SMTPTaskProcess()</a>.</p>

</div>
</div>
<a class="anchor" id="a4a27286a5cf26257930ac713fbd78b3b"></a><!-- doxytag: member="SMTP.c::SMTPTaskList" ref="a4a27286a5cf26257930ac713fbd78b3b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_s_m_t_p_task_lists.html">SMTPTaskLists</a> <a class="el" href="_s_m_t_p_8c.html#a4a27286a5cf26257930ac713fbd78b3b">SMTPTaskList</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>State machine for sending out emails. </p>

<p>Definition at line <a class="el" href="_s_m_t_p_8c_source.html#l00027">27</a> of file <a class="el" href="_s_m_t_p_8c_source.html">SMTP.c</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00193">SchemaInit()</a>.</p>

</div>
</div>
<a class="anchor" id="a9fb825e30b6e8dbfed928256eb6500c8"></a><!-- doxytag: member="SMTP.c::WhenToSendEmailText" ref="a9fb825e30b6e8dbfed928256eb6500c8" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROM char* <a class="el" href="_s_m_t_p_8c.html#a9fb825e30b6e8dbfed928256eb6500c8">WhenToSendEmailText</a>[]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment">
        {
                <span class="stringliteral">&quot;No Emails&quot;</span>,
                <span class="stringliteral">&quot;Latchkey Only&quot;</span>,
                <span class="stringliteral">&quot;Inital Alarm&quot;</span>,
                <span class="stringliteral">&quot;All Alarms&quot;</span>,
                <span class="stringliteral">&quot;Every Event&quot;</span>
        }
</pre></div>
<p>Text values of config option 'when to send emails'. </p>
<p>D E C L A R A T I O N S </p>

<p>Definition at line <a class="el" href="_s_m_t_p_8c_source.html#l00017">17</a> of file <a class="el" href="_s_m_t_p_8c_source.html">SMTP.c</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Mon Apr 25 2011 23:31:10 for Alarm Cabinent by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
