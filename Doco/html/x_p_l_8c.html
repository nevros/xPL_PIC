<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Alarm Cabinent: PIC Code/xPL.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Alarm Cabinent</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">PIC Code/xPL.c File Reference</div>  </div>
</div>
<div class="contents">

<p>xPL Framework  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;TCPIP Stack/TCPIP.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="x_p_l_8h_source.html">xPL.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_security_system_8h_source.html">SecuritySystem.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for xPL.c:</div>
<div class="dyncontent">
<div class="center"><iframe src="x_p_l_8c__incl.svg" width="659" height="150" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="x_p_l_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#a07f019fb7de86ef4bfe4cab422be0969">XPLHeartBeatTiming</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#a41c59f641ff95b999e66c0d45117b73d">XPLProcessUDPMsg</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#af740a9e5684491e3dcbe5b0198f98860">XPLProcessUDPMsgHeader</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#abc8f282f2ce56cb62d7e149120130c72">XPLSendHeartBeat</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#a5f8892113a09c41986fc7240b315c01e">xPLProcessMsgCompair</a> (rom char *ValidResult, int MaxSize, char TermChar)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#a9abaa084202354fa039c0dbfadc23e09">xPLProcessSaveValue</a> (char TermChar, char *Result, int MaxSize)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#a3b166aa60e7a002cfcc3f6e34982fa73">xPLProcessMsgChar</a> (char Expected)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#aa11ae2e433086c0ebc95c02a17a779d3">xPLProcess_MsgField</a> (rom char **ValidOptions, int ArraySize, unsigned short int *Result, char TermChar)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#a091a12042a9d63dc524ce896fbc04b46">xPLInit</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#a31c1c8faace74e23f37a03b7292f7981">xPLLoadEEConfig</a> (void *p, int Start_Address, int Data_Size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a> (void *p, int Start_Address, int Data_Size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#a86d914c966f337c4e3a6fda46a945d11">XPLTasks</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a> (<a class="el" href="x_p_l_8h.html#ae920acc0dd05f63aa5435d5ae4066ae1">xPL_MessageTypes</a> xPL_MSG_Type, BOOL isBroadCast, <a class="el" href="x_p_l_8h.html#a9393a512bb6ecf7aa03d47d6a1d62e34">xPL_SchemaClasss</a> SchemaClass, <a class="el" href="x_p_l_8h.html#a44c7fcbdaccb766382c5eee977cbce00">xPL_SchemaTypess</a> SchemaType)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#ace930888808081ff410b21e68caa146e">xPLFindArrayInKVP</a> (rom char **ValidOptions, int ArraySize, int *Result, char *TheValue)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#a7c4561dc703960b7f5d24ec72ff34ba5">SaveKVP</a> (char *TheKey, char *TheValue)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e">xPLMsgKey</a> [xPLMSGKEYLENGTH]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Security, were most of it is at.  <a href="#ab1bd647d7b5e8841a1378eedabb62c2e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db">xPLMsgValue</a> [xPLMSGVALUELENGTH]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Used as a temp storage for processing messages, holds the value of a key value pair.  <a href="#a65d6c76d15acf1f33b1d8778f79881db"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static rom char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#a1dd6432e80a0807b69740c019706f65a">xPL_My_Vendor_ID</a> [] = {&quot;oden&quot;}</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">xPL device name, vendor ID  <a href="#a1dd6432e80a0807b69740c019706f65a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static rom char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#ad5d50e36a6ab5a49373f9fa26238f9e5">xPL_My_Device_ID</a> [] = {&quot;pir&quot;}</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">xPL device name, device ID  <a href="#ad5d50e36a6ab5a49373f9fa26238f9e5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">rom char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#acfb9cbdd568e102081516ecd213fda75">Default_xPL_My_Instance_ID</a> [] = {&quot;thefirst&quot;}</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">xPL device name, instance ID  <a href="#acfb9cbdd568e102081516ecd213fda75"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static ROM char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#a98630ff8d5b11060cc360fce4b678cf0">xPLmessageTypeText</a> []</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">xPL Message Types  <a href="#a98630ff8d5b11060cc360fce4b678cf0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static ROM char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#a4d0cdcf92bbfac9444b15f5f1e2adc3f">xPLHeaderKeyText</a> []</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">xPL Header contents, this data is mandatory for the message to be valid  <a href="#a4d0cdcf92bbfac9444b15f5f1e2adc3f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static ROM char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#a783f46ab4e10f3c6f9d240cf5f71cb54">xPLschemaClassText</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static ROM char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#aecfa57b2c3083178cd21d2ddd4acfb18">xPLschemaTypeText</a> []</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">xPL Schema's (type) that are supported by this application. The first 6 are mandatory for any xPL device, add functionality after these entries.  <a href="#aecfa57b2c3083178cd21d2ddd4acfb18"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#ae1b47e463d46f60bf5a1b65fd132eb18">xPLConfiguerd</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">True if the device has received all needed configuration details from the hub.  <a href="#ae1b47e463d46f60bf5a1b65fd132eb18"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">TICK&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#ad8f3ec7ac77de10d1b0f6eeff4969996">xPLHeartbeatIntervalCount</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Time since last Heartbeat was sent.  <a href="#ad8f3ec7ac77de10d1b0f6eeff4969996"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">TICK&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#a57f931c642b9abb18f2b6d3441a90a16">xPLNotConfiguredTimer</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Time spent in not configured state.  <a href="#a57f931c642b9abb18f2b6d3441a90a16"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">UDP_SOCKET&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659">XPLSocket</a> = INVALID_UDP_SOCKET</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Declares the Microchip IP socket that will be used for processing xPL messages.  <a href="#a8a7b0f54b3a08b018c41f0355a79e659"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structx_p_l_received_messages.html">xPLReceivedMessages</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>xPL Framework </p>

<p>Definition in file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="a7c4561dc703960b7f5d24ec72ff34ba5"></a><!-- doxytag: member="xPL.c::SaveKVP" ref="a7c4561dc703960b7f5d24ec72ff34ba5" args="(char *TheKey, char *TheValue)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL SaveKVP </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>TheKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>TheValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Loads a Key and a Value from the UDP message. Populates this into variables.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">char</td><td>* TheKey, location to save the data for the key </td></tr>
    <tr><td class="paramname">char</td><td>* TheValue, location to save the data for the value </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>BOOL, true if processed as expected </dd></dl>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00969">969</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>References <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_hardware_profile_8h_source.html#l00201">putsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00022">xPLMSGKEYLENGTH</a>, and <a class="el" href="x_p_l_8h_source.html#l00023">xPLMSGVALUELENGTH</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l01642">SchemaProcessUDPMsg()</a>.</p>
<div class="fragment"><pre class="fragment">                                              {

        <span class="keywordtype">int</span> <span class="keywordtype">short</span> <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>;
        <span class="keywordtype">char</span> NextChar;

        <span class="comment">// clear out any old data</span>
        memset (TheKey, <span class="charliteral">&#39;\0&#39;</span>, <a class="code" href="x_p_l_8h.html#a8093f823771092ea99bef8d0b1ce5454">xPLMSGKEYLENGTH</a>);
        memset (TheValue, <span class="charliteral">&#39;\0&#39;</span>, <a class="code" href="x_p_l_8h.html#aae5a87b8c5b796965aa8548462ed8f39">xPLMSGVALUELENGTH</a>);

        <span class="comment">// Load character by character</span>
        <span class="keywordflow">for</span> (iCount =0; iCount &lt; <a class="code" href="x_p_l_8h.html#a8093f823771092ea99bef8d0b1ce5454">xPLMSGKEYLENGTH</a>; iCount++) {
                UDPGet(&amp;NextChar);
                <span class="keywordflow">if</span>(NextChar &gt;= <span class="charliteral">&#39;A&#39;</span> &amp;&amp; NextChar &lt;= <span class="charliteral">&#39;Z&#39;</span>)
                        NextChar -= <span class="charliteral">&#39;A&#39;</span> - <span class="charliteral">&#39;a&#39;</span>; <span class="comment">//Convert to lower case for the key but we dont want to do that for the value</span>
                <span class="keywordflow">if</span> (NextChar == <span class="charliteral">&#39;=&#39;</span>) <span class="keywordflow">break</span>;
                <span class="keywordflow">if</span> (NextChar == <span class="charliteral">&#39;}&#39;</span>) <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                TheKey[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>] = NextChar;
        } <span class="comment">// for key</span>


<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;TheKey = &quot;</span>);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(TheKey);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

        <span class="keywordflow">for</span> (iCount =0; iCount &lt; <a class="code" href="x_p_l_8h.html#aae5a87b8c5b796965aa8548462ed8f39">xPLMSGVALUELENGTH</a>; iCount++) {
                UDPGet(&amp;NextChar);
                <span class="keywordflow">if</span> (NextChar == <span class="charliteral">&#39;\n&#39;</span>) <span class="keywordflow">break</span>;
                <span class="keywordflow">if</span> (NextChar == <span class="charliteral">&#39;}&#39;</span>) <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                TheValue[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>] = NextChar;
        } <span class="comment">// for key</span>


<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; TheValue = &quot;</span>);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(TheValue);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

        <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;

}
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="x_p_l_8c_a7c4561dc703960b7f5d24ec72ff34ba5_icgraph.svg" width="1120" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ace930888808081ff410b21e68caa146e"></a><!-- doxytag: member="xPL.c::xPLFindArrayInKVP" ref="ace930888808081ff410b21e68caa146e" args="(rom char **ValidOptions, int ArraySize, int *Result, char *TheValue)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL xPLFindArrayInKVP </td>
          <td>(</td>
          <td class="paramtype">rom char **&#160;</td>
          <td class="paramname"><em>ValidOptions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ArraySize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>Result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>TheValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>searches though an array looking for a match to TheValue. When a match is found it will return the position in the array</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">rom</td><td>char **ValidOptions, array of posible matches </td></tr>
    <tr><td class="paramname">ArraySize,size</td><td>of ValidOptions </td></tr>
    <tr><td class="paramname">*Result,position</td><td>in array where match was found </td></tr>
    <tr><td class="paramname">char</td><td>* TheValue, text to be searched </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>BOOL, true if processed as expected and match was found </dd></dl>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00938">938</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>References <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, and <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l01642">SchemaProcessUDPMsg()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                             {

        <span class="keywordtype">int</span> CountBufferChars;

        <span class="comment">// cycle thought the array to see if there is a match</span>
        <span class="keywordflow">for</span>(<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>=0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; ArraySize; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++)
        {

                CountBufferChars = <span class="keyword">sizeof</span>(ValidOptions[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>]);
                <span class="keywordflow">if</span> (strncmppgm2ram(TheValue, ValidOptions[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>],CountBufferChars) ==0)
                { <span class="comment">// a match was found</span>
                        *Result = <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>;
                        <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                }
        }

        <span class="comment">// no match was found</span>
        <span class="keywordflow">return</span> 0;
}
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="x_p_l_8c_ace930888808081ff410b21e68caa146e_icgraph.svg" width="1203" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a07f019fb7de86ef4bfe4cab422be0969"></a><!-- doxytag: member="xPL.c::XPLHeartBeatTiming" ref="a07f019fb7de86ef4bfe4cab422be0969" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XPLHeartBeatTiming </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>xPLConfiguerd </p>
</p>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00224">224</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>References <a class="el" href="_security_system_8h_source.html#l00202">xPLConfigs::xPL_Heartbeat_Interval</a>, <a class="el" href="x_p_l_8h_source.html#l00011">XPL_NOTCONFIGUREDHBINTERVAL</a>, <a class="el" href="x_p_l_8h_source.html#l00012">XPL_NOTCONFIGUREDNOHUBHBINTERVAL</a>, <a class="el" href="_security_system_8c_source.html#l00136">xPLConfig</a>, <a class="el" href="x_p_l_8c_source.html#l00074">xPLConfiguerd</a>, <a class="el" href="x_p_l_8c_source.html#l00077">xPLHeartbeatIntervalCount</a>, <a class="el" href="x_p_l_8c_source.html#l00079">xPLNotConfiguredTimer</a>, and <a class="el" href="x_p_l_8c_source.html#l00300">XPLSendHeartBeat()</a>.</p>

<p>Referenced by <a class="el" href="x_p_l_8c_source.html#l00263">XPLTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                              {
        <span class="keywordflow">if</span> (TickGet() &gt; <a class="code" href="x_p_l_8c.html#ad8f3ec7ac77de10d1b0f6eeff4969996" title="Time since last Heartbeat was sent.">xPLHeartbeatIntervalCount</a>) {
                <span class="keywordflow">if</span>(!<a class="code" href="x_p_l_8c.html#ae1b47e463d46f60bf5a1b65fd132eb18" title="True if the device has received all needed configuration details from the hub.">xPLConfiguerd</a>) {
                        <span class="keywordflow">if</span>(<a class="code" href="x_p_l_8c.html#a57f931c642b9abb18f2b6d3441a90a16" title="Time spent in not configured state.">xPLNotConfiguredTimer</a> &gt; TickGet()) {
                                <span class="comment">// Not configured</span>
                                <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a7111b59426453cce173352e2d7ef9dc3" title="Interval of the xPL heatbeat message in seconds.">xPL_Heartbeat_Interval</a> = <a class="code" href="x_p_l_8h.html#ab1f7fbd37b06dc5c6c44c93ff353ee46">XPL_NOTCONFIGUREDHBINTERVAL</a>; <span class="comment">// added to change interval if a hub appears after timer expires</span>
                        }
                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="x_p_l_8c.html#a57f931c642b9abb18f2b6d3441a90a16" title="Time spent in not configured state.">xPLNotConfiguredTimer</a> &lt; TickGet()) {
                                <span class="comment">// Not configured and no hub time out has been reached</span>
                                <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a7111b59426453cce173352e2d7ef9dc3" title="Interval of the xPL heatbeat message in seconds.">xPL_Heartbeat_Interval</a> = <a class="code" href="x_p_l_8h.html#a555a6ebd5a0b576771968d1a61a33c2a">XPL_NOTCONFIGUREDNOHUBHBINTERVAL</a>;
                        }
                } <span class="comment">///xPLConfiguerd</span>
<span class="comment"></span>
                <a class="code" href="x_p_l_8c.html#ad8f3ec7ac77de10d1b0f6eeff4969996" title="Time since last Heartbeat was sent.">xPLHeartbeatIntervalCount</a> = TickGet() + (<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a7111b59426453cce173352e2d7ef9dc3" title="Interval of the xPL heatbeat message in seconds.">xPL_Heartbeat_Interval</a>*(TICK_SECOND*60));
                <span class="comment">// Send HB message</span>
                <a class="code" href="x_p_l_8c.html#abc8f282f2ce56cb62d7e149120130c72">XPLSendHeartBeat</a>();

        } <span class="comment">//&lt;= TickGet() &gt; xPLHeartbeatIntervalCount</span>
}<span class="comment">// void XPLHeartBeatTiming</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="x_p_l_8c_a07f019fb7de86ef4bfe4cab422be0969_cgraph.svg" width="782" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="x_p_l_8c_a07f019fb7de86ef4bfe4cab422be0969_icgraph.svg" width="523" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a091a12042a9d63dc524ce896fbc04b46"></a><!-- doxytag: member="xPL.c::xPLInit" ref="a091a12042a9d63dc524ce896fbc04b46" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL xPLInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initiates the xPL stack. This must be called before <a class="el" href="x_p_l_8c.html#a86d914c966f337c4e3a6fda46a945d11">XPLTasks()</a> or things will go wrong </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns true if a socket was selected. </dd></dl>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00109">109</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>References <a class="el" href="x_p_l_8c_source.html#l00023">Default_xPL_My_Instance_ID</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_security_system_8c_source.html#l00193">SchemaInit()</a>, <a class="el" href="_security_system_8h_source.html#l00202">xPLConfigs::xPL_Heartbeat_Interval</a>, <a class="el" href="_security_system_8h_source.html#l00203">xPLConfigs::xPL_My_Instance_ID</a>, <a class="el" href="x_p_l_8h_source.html#l00011">XPL_NOTCONFIGUREDHBINTERVAL</a>, <a class="el" href="x_p_l_8h_source.html#l00013">XPL_NOTCONFIGUREDTIMEOUT</a>, <a class="el" href="_security_system_8c_source.html#l00136">xPLConfig</a>, <a class="el" href="x_p_l_8c_source.html#l00074">xPLConfiguerd</a>, <a class="el" href="x_p_l_8c_source.html#l00077">xPLHeartbeatIntervalCount</a>, and <a class="el" href="x_p_l_8c_source.html#l00079">xPLNotConfiguredTimer</a>.</p>

<p>Referenced by <a class="el" href="_main_demo_8c_source.html#l00072">main()</a>.</p>
<div class="fragment"><pre class="fragment">                   {

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;xPLInit called\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        <span class="comment">// Load the schema init</span>
        <a class="code" href="x_p_l_8c.html#ae1b47e463d46f60bf5a1b65fd132eb18" title="True if the device has received all needed configuration details from the hub.">xPLConfiguerd</a> = <a class="code" href="_security_system_8c.html#aea89a2e5b007623f49cb6117afc947ec">SchemaInit</a>();

        <span class="comment">// set default values when not configured</span>
        <span class="keywordflow">if</span>(!<a class="code" href="x_p_l_8c.html#ae1b47e463d46f60bf5a1b65fd132eb18" title="True if the device has received all needed configuration details from the hub.">xPLConfiguerd</a>) {
                <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a7111b59426453cce173352e2d7ef9dc3" title="Interval of the xPL heatbeat message in seconds.">xPL_Heartbeat_Interval</a> = <a class="code" href="x_p_l_8h.html#ab1f7fbd37b06dc5c6c44c93ff353ee46">XPL_NOTCONFIGUREDHBINTERVAL</a>;
                <a class="code" href="x_p_l_8c.html#a57f931c642b9abb18f2b6d3441a90a16" title="Time spent in not configured state.">xPLNotConfiguredTimer</a> = TickGet() + (<a class="code" href="x_p_l_8h.html#a0f6c3b736b6ae28f9cb7914ebf5be460">XPL_NOTCONFIGUREDTIMEOUT</a> * TICK_SECOND);
                memset(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a9c46c7c2fe40ff45c5a12adb588bf4d5" title="xPL instance name of this device">xPL_My_Instance_ID</a>,<span class="charliteral">&#39;\0&#39;</span>, 17);
                strcpypgm2ram(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a9c46c7c2fe40ff45c5a12adb588bf4d5" title="xPL instance name of this device">xPL_My_Instance_ID</a>, <a class="code" href="x_p_l_8c.html#acfb9cbdd568e102081516ecd213fda75" title="xPL device name, instance ID">Default_xPL_My_Instance_ID</a>);

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;xPLInit detected device not configured\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }

        <span class="comment">// Log output if device is configured</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <span class="keywordflow">if</span> (<a class="code" href="x_p_l_8c.html#ae1b47e463d46f60bf5a1b65fd132eb18" title="True if the device has received all needed configuration details from the hub.">xPLConfiguerd</a>) <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;xPLInit detected the device is configured\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        <span class="comment">// Kick the heart beat timer off</span>
        <a class="code" href="x_p_l_8c.html#ad8f3ec7ac77de10d1b0f6eeff4969996" title="Time since last Heartbeat was sent.">xPLHeartbeatIntervalCount</a> = TickGet() + (<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a7111b59426453cce173352e2d7ef9dc3" title="Interval of the xPL heatbeat message in seconds.">xPL_Heartbeat_Interval</a>*(TICK_SECOND*60));

        <span class="comment">// Return with sucess</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;All init processes completed, ready to go \r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        <span class="keywordflow">return</span> 1;

}<span class="comment">//end UserInit</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="x_p_l_8c_a091a12042a9d63dc524ce896fbc04b46_cgraph.svg" width="880" height="259" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="x_p_l_8c_a091a12042a9d63dc524ce896fbc04b46_icgraph.svg" width="222" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a31c1c8faace74e23f37a03b7292f7981"></a><!-- doxytag: member="xPL.c::xPLLoadEEConfig" ref="a31c1c8faace74e23f37a03b7292f7981" args="(void *p, int Start_Address, int Data_Size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL xPLLoadEEConfig </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>Start_Address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>Data_Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00157">157</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>References <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, and <a class="el" href="_security_system_8h_source.html#l00013">XPLEECONFIGVERSION</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00193">SchemaInit()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                {

    BYTE c;
    BYTE *dest=(BYTE *)p;

    XEEBeginRead(Start_Address);
    c = XEERead();
    XEEEndRead();
    <span class="keywordflow">if</span>(c == <a class="code" href="_security_system_8h.html#aaad19aa5437f84c85f9e2535098af81c">XPLEECONFIGVERSION</a>)     <span class="comment">// When a record is saved, first byte is written to indicate a valid record was saved.</span>
    {
        <span class="comment">// We have valid config data to load</span>
        XEEBeginRead(Start_Address + 1);
        <span class="keywordflow">for</span> ( c = 0; c &lt; (<span class="keywordtype">unsigned</span> int) Data_Size; c++ )
            *dest++ = XEERead();
        XEEEndRead();
        <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
    }
    <span class="keywordflow">else</span>
    {
                <span class="comment">// There is no config data to load</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;The config version did not return correctly. Load failed\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
                <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
        }

}
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="x_p_l_8c_a31c1c8faace74e23f37a03b7292f7981_icgraph.svg" width="664" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa11ae2e433086c0ebc95c02a17a779d3"></a><!-- doxytag: member="xPL.c::xPLProcess_MsgField" ref="aa11ae2e433086c0ebc95c02a17a779d3" args="(rom char **ValidOptions, int ArraySize, unsigned short int *Result, char TermChar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL xPLProcess_MsgField </td>
          <td>(</td>
          <td class="paramtype">rom char **&#160;</td>
          <td class="paramname"><em>ValidOptions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ArraySize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short int *&#160;</td>
          <td class="paramname"><em>Result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>TermChar</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Takes a data from the buffer and determines if it matches a value in the supplied ROM array. If the terminator character does not appear before the maximum size is reached then the result will be fales (fail)</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">rom</td><td>char **ValidOptions, looks for a match with on of the values stored in this array </td></tr>
    <tr><td class="paramname">ArraySize,maximum</td><td>size of the expected value </td></tr>
    <tr><td class="paramname">unsigned</td><td>short int *Result, The position in the array where the match was found </td></tr>
    <tr><td class="paramname">char</td><td>TermChar, terminator character </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>BOOL, true if processed as expected and match was found </dd></dl>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00829">829</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>References <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_hardware_profile_8h_source.html#l00203">putcUART</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_hardware_profile_8h_source.html#l00201">putsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, and <a class="el" href="x_p_l_8c_source.html#l00016">xPLMsgValue</a>.</p>

<p>Referenced by <a class="el" href="x_p_l_8c_source.html#l00496">XPLProcessUDPMsgHeader()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                                            {

        <span class="keywordtype">char</span> NextChar;
        <span class="keywordtype">int</span> CountBufferChars =0;

        <span class="comment">// Collect characters until terminator is found or max size is reached.</span>
        UDPGet(&amp;NextChar);
        <span class="keywordflow">while</span> ((NextChar != TermChar) &amp;&amp; (NextChar != <span class="charliteral">&#39;\n&#39;</span> ) &amp;&amp; ( CountBufferChars &lt; 127) ) {
                <span class="keywordflow">if</span>(NextChar &gt;= <span class="charliteral">&#39;A&#39;</span> &amp;&amp; NextChar &lt;= <span class="charliteral">&#39;Z&#39;</span>)
                        NextChar -= <span class="charliteral">&#39;A&#39;</span> - <span class="charliteral">&#39;a&#39;</span>;
                <span class="comment">//tolower(NextChar); // Convert to lower case</span>
                <a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a>[CountBufferChars] = NextChar;
                CountBufferChars++;
                UDPGet(&amp;NextChar);
        }
        <a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a>[CountBufferChars] = <span class="charliteral">&#39;\0&#39;</span>;

        <span class="comment">// cycle thought the array to see if there is a match</span>
        <span class="keywordflow">for</span>(<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>=0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; ArraySize; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                <span class="keywordflow">if</span> (strncmppgm2ram(<a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a>, ValidOptions[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>], CountBufferChars) ==0) { <span class="comment">// a match was found</span>
                        *Result = <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>;
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; - xPLProcess_MsgField, int match: &quot;</span>);
                        <a class="code" href="_hardware_profile_8h.html#a35a0c78b8926c6695d170f9f6ff47c61">putcUART</a>(<span class="charliteral">&#39;0&#39;</span>+ iCount);
                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; With Result:&quot;</span>);
                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*) ValidOptions[iCount]);
                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                        <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                }

        }

        <span class="comment">// no match was found</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; - xPLProcess_MsgField,No match found with string:&quot;</span>);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(<a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a>);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        <span class="keywordflow">return</span> 0;

}
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="x_p_l_8c_aa11ae2e433086c0ebc95c02a17a779d3_icgraph.svg" width="1262" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3b166aa60e7a002cfcc3f6e34982fa73"></a><!-- doxytag: member="xPL.c::xPLProcessMsgChar" ref="a3b166aa60e7a002cfcc3f6e34982fa73" args="(char Expected)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL xPLProcessMsgChar </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>Expected</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Check one character from the input source</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">char</td><td>Expected, the char that is expected to be in the buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>BOOL, True if the value are the same </dd></dl>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00802">802</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>References <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, and <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>.</p>

<p>Referenced by <a class="el" href="x_p_l_8c_source.html#l00496">XPLProcessUDPMsgHeader()</a>.</p>
<div class="fragment"><pre class="fragment">                                      {

        <span class="keywordtype">char</span> NextChar;
        UDPGet(&amp;NextChar);
        <span class="keywordflow">if</span>(NextChar &gt;= <span class="charliteral">&#39;A&#39;</span> &amp;&amp; NextChar &lt;= <span class="charliteral">&#39;Z&#39;</span>)
                NextChar -= <span class="charliteral">&#39;A&#39;</span> - <span class="charliteral">&#39;a&#39;</span>;  <span class="comment">//Convert to lower case</span>
        <span class="keywordflow">if</span> (NextChar == Expected)
                <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
        <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;

}
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="x_p_l_8c_a3b166aa60e7a002cfcc3f6e34982fa73_icgraph.svg" width="1251" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5f8892113a09c41986fc7240b315c01e"></a><!-- doxytag: member="xPL.c::xPLProcessMsgCompair" ref="a5f8892113a09c41986fc7240b315c01e" args="(rom char *ValidResult, int MaxSize, char TermChar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL xPLProcessMsgCompair </td>
          <td>(</td>
          <td class="paramtype">rom char *&#160;</td>
          <td class="paramname"><em>ValidResult</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>MaxSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>TermChar</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Compairs data in the input buffer to a string to see if they are a match.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">rom</td><td>char *ValidResult, string we are looking for </td></tr>
    <tr><td class="paramname">MaxSize,max</td><td>chars to process, </td></tr>
    <tr><td class="paramname">char</td><td>TermChar, character that terminates matching </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>BOOL, was correct data received </dd></dl>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00884">884</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>References <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_hardware_profile_8h_source.html#l00203">putcUART</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, and <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>.</p>

<p>Referenced by <a class="el" href="x_p_l_8c_source.html#l00415">XPLProcessUDPMsg()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                              {
        <span class="keywordtype">char</span> NextChar;

        <span class="comment">// Collect characters until terminator is found or max size is reached.</span>
        UDPGet(&amp;NextChar);
        <span class="keywordflow">while</span> ((NextChar != TermChar) &amp;&amp; (NextChar != <span class="charliteral">&#39;\n&#39;</span> ) &amp;&amp; ( <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; MaxSize) ) {
                <span class="keywordflow">if</span>(NextChar &gt;= <span class="charliteral">&#39;A&#39;</span> &amp;&amp; NextChar &lt;= <span class="charliteral">&#39;Z&#39;</span>)
                        NextChar -= <span class="charliteral">&#39;A&#39;</span> - <span class="charliteral">&#39;a&#39;</span>;  <span class="comment">//Convert to lower case</span>
                <span class="keywordflow">if</span>(!(NextChar==ValidResult[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>])) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; - xPLProcessMsgCompair, No Match. iCount:&quot;</span>);
                        <a class="code" href="_hardware_profile_8h.html#a35a0c78b8926c6695d170f9f6ff47c61">putcUART</a>(<span class="charliteral">&#39;0&#39;</span>+ iCount);
                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Compaired to:&quot;</span>);
                        <a class="code" href="_hardware_profile_8h.html#a35a0c78b8926c6695d170f9f6ff47c61">putcUART</a>((<span class="keywordtype">char</span>)ValidResult);
                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; no match on char:&quot;</span>);
                        <a class="code" href="_hardware_profile_8h.html#a35a0c78b8926c6695d170f9f6ff47c61">putcUART</a>((<span class="keywordtype">char</span>)NextChar);
                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                        <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                }

                iCount++;
                UDPGet(&amp;NextChar);
        }

        <span class="keywordflow">if</span>      (iCount == 1) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; - xPLProcessMsgCompair, No Match. iCount:&quot;</span>);
                <a class="code" href="_hardware_profile_8h.html#a35a0c78b8926c6695d170f9f6ff47c61">putcUART</a>(<span class="charliteral">&#39;0&#39;</span>+ iCount);
                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Compaired to:&quot;</span>);
                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>(ValidResult);
                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; no match as it was to short&quot;</span>);
                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
                <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>; <span class="comment">// First char was a terminator</span>
        }

        <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
}
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="x_p_l_8c_a5f8892113a09c41986fc7240b315c01e_icgraph.svg" width="870" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9abaa084202354fa039c0dbfadc23e09"></a><!-- doxytag: member="xPL.c::xPLProcessSaveValue" ref="a9abaa084202354fa039c0dbfadc23e09" args="(char TermChar, char *Result, int MaxSize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL xPLProcessSaveValue </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>TermChar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>MaxSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Extracts data out of the buffer and populates the result into the pointer can converts to lower case. If the terminator character does not appear before the maximum size is reached then the result will be fales (fail)</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">char</td><td>TermChar, character that will terminate data collection </td></tr>
    <tr><td class="paramname">char</td><td>*Result, pointer where the data will come from </td></tr>
    <tr><td class="paramname">MaxSize,maximum</td><td>size of the data </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>BOOL, was the value correctly saved </dd></dl>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00757">757</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>References <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_hardware_profile_8h_source.html#l00203">putcUART</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_hardware_profile_8h_source.html#l00201">putsUART</a>, and <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>.</p>

<p>Referenced by <a class="el" href="x_p_l_8c_source.html#l00496">XPLProcessUDPMsgHeader()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                   {

        <span class="keywordtype">char</span> NextChar;
        <span class="keywordtype">int</span> CountBufferChars;

        <span class="keywordflow">for</span>(CountBufferChars = 0; CountBufferChars &lt;= MaxSize; CountBufferChars++) {
                UDPGet(&amp;NextChar);
                <span class="keywordflow">if</span>(NextChar &gt;= <span class="charliteral">&#39;A&#39;</span> &amp;&amp; NextChar &lt;= <span class="charliteral">&#39;Z&#39;</span>)
                        NextChar -= <span class="charliteral">&#39;A&#39;</span> - <span class="charliteral">&#39;a&#39;</span>; <span class="comment">//Convert to lower case</span>
                <span class="keywordflow">if</span>((NextChar == TermChar) || (NextChar == <span class="charliteral">&#39;\n&#39;</span>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;xPLProcessSaveValue: &quot;</span>);
                        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(Result);
                        <span class="keywordflow">if</span>((NextChar == TermChar) &amp;&amp; (NextChar != <span class="charliteral">&#39;\n&#39;</span>)) {
                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Correctly ended by term char:&quot;</span>);
                                <a class="code" href="_hardware_profile_8h.html#a35a0c78b8926c6695d170f9f6ff47c61">putcUART</a>((BYTE)NextChar);
                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; \r\n&quot;</span>);
                        }
                        <span class="keywordflow">if</span>(NextChar == <span class="charliteral">&#39;\n&#39;</span>) <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Ended by New Line\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
                        <span class="keywordflow">if</span>(NextChar == TermChar) <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>; <span class="comment">// term character found but we have data</span>
                        <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                } <span class="comment">// term chars</span>

                Result[CountBufferChars] = NextChar;

        } <span class="comment">// for</span>

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;xPLProcessSaveValue: &quot;</span>);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(Result);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; ended by max size\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>; <span class="comment">// reached the max number of characters</span>
} <span class="comment">//xPLProcessSaveValue</span>
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="x_p_l_8c_a9abaa084202354fa039c0dbfadc23e09_icgraph.svg" width="1267" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a41c59f641ff95b999e66c0d45117b73d"></a><!-- doxytag: member="xPL.c::XPLProcessUDPMsg" ref="a41c59f641ff95b999e66c0d45117b73d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XPLProcessUDPMsg </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Processes a received xPL message and determines what to do with it.</p>
<p>If the message was not handled here (if config or HBeat related) the message will be passed to <a class="el" href="_security_system_8c.html#a3baecc6556e5cc7af0d59d0216aa217c">SchemaProcessUDPMsg()</a> if is directed to this device, or is a broadcast.</p>
<p><a class="el" href="_security_system_8c.html#a3baecc6556e5cc7af0d59d0216aa217c">SchemaProcessUDPMsg()</a> is where the implemented device process received messages. </p>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00415">415</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>References <a class="el" href="x_p_l_8h_source.html#l00006">BOOL</a>, <a class="el" href="x_p_l_8h_source.html#l00051">Class_HBeat</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_hardware_profile_8h_source.html#l00203">putcUART</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_security_system_8c_source.html#l01642">SchemaProcessUDPMsg()</a>, <a class="el" href="x_p_l_8h_source.html#l00081">To_All</a>, <a class="el" href="x_p_l_8h_source.html#l00082">To_Other</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00062">Type_Request</a>, <a class="el" href="x_p_l_8h_source.html#l00044">xPL_COMMAND</a>, <a class="el" href="x_p_l_8h_source.html#l00088">xPLReceivedMessages::xPL_MessageType</a>, <a class="el" href="x_p_l_8h_source.html#l00089">xPLReceivedMessages::xPL_MsgDestination</a>, <a class="el" href="x_p_l_8h_source.html#l00013">XPL_NOTCONFIGUREDTIMEOUT</a>, <a class="el" href="x_p_l_8h_source.html#l00090">xPLReceivedMessages::xPL_SchemaClass</a>, <a class="el" href="x_p_l_8h_source.html#l00091">xPLReceivedMessages::xPL_SchemaTypes</a>, <a class="el" href="x_p_l_8c_source.html#l00074">xPLConfiguerd</a>, <a class="el" href="x_p_l_8c_source.html#l00077">xPLHeartbeatIntervalCount</a>, <a class="el" href="x_p_l_8c_source.html#l00079">xPLNotConfiguredTimer</a>, <a class="el" href="x_p_l_8c_source.html#l00884">xPLProcessMsgCompair()</a>, and <a class="el" href="x_p_l_8c_source.html#l00496">XPLProcessUDPMsgHeader()</a>.</p>

<p>Referenced by <a class="el" href="x_p_l_8c_source.html#l00263">XPLTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                            {
        <a class="code" href="x_p_l_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a> SchemaToProcessMSG = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
        <span class="keywordtype">int</span> intRandomNumber;


        <span class="keywordflow">if</span> (<a class="code" href="x_p_l_8c.html#af740a9e5684491e3dcbe5b0198f98860">XPLProcessUDPMsgHeader</a>() == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>) {
                <span class="keywordflow">if</span> (<a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#ab389803873f6bde1cdd2e89c436ac34c">xPL_MsgDestination</a> == <a class="code" href="x_p_l_8h.html#a8e8eafaa87afd5b6b2a4b1ffef4ff043ac6954561847676d9a090ef204ef1d5c4">To_Other</a>)
                        SchemaToProcessMSG = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;

                <span class="comment">// If a xPL message has been received keep the not configured timer from expiring</span>
                <span class="keywordflow">if</span> (!<a class="code" href="x_p_l_8c.html#ae1b47e463d46f60bf5a1b65fd132eb18" title="True if the device has received all needed configuration details from the hub.">xPLConfiguerd</a>)
                        <a class="code" href="x_p_l_8c.html#a57f931c642b9abb18f2b6d3441a90a16" title="Time spent in not configured state.">xPLNotConfiguredTimer</a> = TickGet() + (<a class="code" href="x_p_l_8h.html#a0f6c3b736b6ae28f9cb7914ebf5be460">XPL_NOTCONFIGUREDTIMEOUT</a>*TICK_SECOND);


<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Message type: &quot;</span>);
                <a class="code" href="_hardware_profile_8h.html#a35a0c78b8926c6695d170f9f6ff47c61">putcUART</a>(<span class="charliteral">&#39;0&#39;</span>+ <a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#ab3916949b107421952fde901d14b9ce8">xPL_MessageType</a>);
                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Schema Class: &quot;</span>);
                <a class="code" href="_hardware_profile_8h.html#a35a0c78b8926c6695d170f9f6ff47c61">putcUART</a>(<span class="charliteral">&#39;0&#39;</span>+ <a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#a59a980a83b46913e7f350229a3499710">xPL_SchemaClass</a>);
                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Schema Type: &quot;</span>);
                <a class="code" href="_hardware_profile_8h.html#a35a0c78b8926c6695d170f9f6ff47c61">putcUART</a>(<span class="charliteral">&#39;0&#39;</span>+ <a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#acc1f47c8a31f619f2c3b15db4f95285f">xPL_SchemaTypes</a>);
                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Destination: &quot;</span>);
                <a class="code" href="_hardware_profile_8h.html#a35a0c78b8926c6695d170f9f6ff47c61">putcUART</a>(<span class="charliteral">&#39;0&#39;</span>+ <a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#ab389803873f6bde1cdd2e89c436ac34c">xPL_MsgDestination</a>);
                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
                <span class="comment">// Heat Beat request</span>
                <span class="keywordflow">if</span> ((<a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#ab3916949b107421952fde901d14b9ce8">xPL_MessageType</a> == <a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57a6750270f22d27565cbd9dc5f7ff983cf">xPL_COMMAND</a>) &amp;&amp; (<a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#ab389803873f6bde1cdd2e89c436ac34c">xPL_MsgDestination</a> == <a class="code" href="x_p_l_8h.html#a8e8eafaa87afd5b6b2a4b1ffef4ff043a9aa5a9edf3f541fc5670950c23601672">To_All</a> )) {
                        <span class="comment">//</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Heart beat request,&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                        <span class="keywordflow">if</span> ((<a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#a59a980a83b46913e7f350229a3499710">xPL_SchemaClass</a> == <a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba44befdda86d7f36ef171a2385f3ad3b5">Class_HBeat</a>) &amp;&amp; (<a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#acc1f47c8a31f619f2c3b15db4f95285f">xPL_SchemaTypes</a> == <a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a12ea3a88f0bdd182c98dfc1ad5f68867">Type_Request</a>)) {
                                <span class="comment">// Device discovery request</span>
                                SchemaToProcessMSG = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                                <span class="keywordflow">if</span>((<a class="code" href="x_p_l_8c.html#a5f8892113a09c41986fc7240b315c01e">xPLProcessMsgCompair</a> ((rom <span class="keywordtype">char</span> *)<span class="stringliteral">&quot;command&quot;</span>, 8, <span class="charliteral">&#39;=&#39;</span>)) &amp;&amp; (<a class="code" href="x_p_l_8c.html#a5f8892113a09c41986fc7240b315c01e">xPLProcessMsgCompair</a> ((rom <span class="keywordtype">char</span> *)<span class="stringliteral">&quot;request&quot;</span>, 8, <span class="charliteral">&#39;\n&#39;</span>))) {
                                        <span class="comment">//generate a random number between 2-6 seconds, and produces bheat within that time.</span>
                                        intRandomNumber = (rand() / 6553) + 2;
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; HBeat sent in &quot;</span>);
                                        <a class="code" href="_hardware_profile_8h.html#a35a0c78b8926c6695d170f9f6ff47c61">putcUART</a>(<span class="charliteral">&#39;0&#39;</span>+ intRandomNumber);
                                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; seconds \r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                        <a class="code" href="x_p_l_8c.html#ad8f3ec7ac77de10d1b0f6eeff4969996" title="Time since last Heartbeat was sent.">xPLHeartbeatIntervalCount</a> = intRandomNumber*(TICK_SECOND);
                                } <span class="comment">// command request</span>
                        } <span class="comment">// hbeat request</span>

                } <span class="comment">// xPL_COMMAND &amp; To_All</span>

                <span class="keywordflow">if</span> (SchemaToProcessMSG) {
                        <span class="comment">//</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Message going to Schema to process \r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                        <a class="code" href="_security_system_8c.html#a3baecc6556e5cc7af0d59d0216aa217c">SchemaProcessUDPMsg</a>();
                }

                <span class="keywordflow">else</span> {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;skips schema, processing stopped\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
                }



        } <span class="comment">//XPLProcessUDPMsgHeader() = TRUE</span>

} <span class="comment">// XPLProcessUDPMsg</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="x_p_l_8c_a41c59f641ff95b999e66c0d45117b73d_cgraph.svg" width="1966" height="1430" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="x_p_l_8c_a41c59f641ff95b999e66c0d45117b73d_icgraph.svg" width="515" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="af740a9e5684491e3dcbe5b0198f98860"></a><!-- doxytag: member="xPL.c::XPLProcessUDPMsgHeader" ref="af740a9e5684491e3dcbe5b0198f98860" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL XPLProcessUDPMsgHeader </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Takes the contents out of the buffer byte by byte to determine if it is a valid xPL message. Will also populate xPLReceivedMessage with details about the message.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000009">Todo:</a></b></dt><dd>refactoring this section might be a good idea one day</dd></dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>BOOL, True if the message is valid </dd></dl>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00496">496</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>References <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_hardware_profile_8h_source.html#l00203">putcUART</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_hardware_profile_8h_source.html#l00201">putsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00093">xPLReceivedMessages::SourceDeviceID</a>, <a class="el" href="x_p_l_8h_source.html#l00094">xPLReceivedMessages::SourceInstanceID</a>, <a class="el" href="x_p_l_8h_source.html#l00092">xPLReceivedMessages::SourceVendor</a>, <a class="el" href="x_p_l_8h_source.html#l00081">To_All</a>, <a class="el" href="x_p_l_8h_source.html#l00080">To_Me</a>, <a class="el" href="x_p_l_8h_source.html#l00082">To_Other</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00088">xPLReceivedMessages::xPL_MessageType</a>, <a class="el" href="x_p_l_8h_source.html#l00089">xPLReceivedMessages::xPL_MsgDestination</a>, <a class="el" href="x_p_l_8c_source.html#l00021">xPL_My_Device_ID</a>, <a class="el" href="_security_system_8h_source.html#l00203">xPLConfigs::xPL_My_Instance_ID</a>, <a class="el" href="x_p_l_8c_source.html#l00019">xPL_My_Vendor_ID</a>, <a class="el" href="x_p_l_8h_source.html#l00090">xPLReceivedMessages::xPL_SchemaClass</a>, <a class="el" href="x_p_l_8h_source.html#l00014">XPL_SCHEMACLASS_SIZE</a>, <a class="el" href="x_p_l_8h_source.html#l00015">XPL_SCHEMATYPE_SIZE</a>, <a class="el" href="x_p_l_8h_source.html#l00091">xPLReceivedMessages::xPL_SchemaTypes</a>, <a class="el" href="_security_system_8c_source.html#l00136">xPLConfig</a>, <a class="el" href="x_p_l_8c_source.html#l00034">xPLHeaderKeyText</a>, <a class="el" href="x_p_l_8c_source.html#l00026">xPLmessageTypeText</a>, <a class="el" href="x_p_l_8c_source.html#l00014">xPLMsgKey</a>, <a class="el" href="x_p_l_8h_source.html#l00022">xPLMSGKEYLENGTH</a>, <a class="el" href="x_p_l_8c_source.html#l00829">xPLProcess_MsgField()</a>, <a class="el" href="x_p_l_8c_source.html#l00802">xPLProcessMsgChar()</a>, <a class="el" href="x_p_l_8c_source.html#l00757">xPLProcessSaveValue()</a>, <a class="el" href="x_p_l_8c_source.html#l00044">xPLschemaClassText</a>, and <a class="el" href="x_p_l_8c_source.html#l00052">xPLschemaTypeText</a>.</p>

<p>Referenced by <a class="el" href="x_p_l_8c_source.html#l00415">XPLProcessUDPMsg()</a>.</p>
<div class="fragment"><pre class="fragment">                                  {

        <span class="keywordtype">char</span> UDPchar;
        <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> HeaderType;
        <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> HeaderCount;

        memset(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>,  <span class="charliteral">&#39;\0&#39;</span>, <a class="code" href="x_p_l_8h.html#a8093f823771092ea99bef8d0b1ce5454">xPLMSGKEYLENGTH</a>);

        <span class="comment">// ## Message type, terminated by \n</span>
        <span class="keywordflow">if</span> (<a class="code" href="x_p_l_8c.html#aa11ae2e433086c0ebc95c02a17a779d3">xPLProcess_MsgField</a>( <a class="code" href="x_p_l_8c.html#a98630ff8d5b11060cc360fce4b678cf0" title="xPL Message Types">xPLmessageTypeText</a>, 3, &amp;HeaderType, <span class="charliteral">&#39;\n&#39;</span>) == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Error in header type. Message rejected \r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                <span class="keywordflow">return</span> 0;
        }
        <a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#ab3916949b107421952fde901d14b9ce8">xPL_MessageType</a> = HeaderType;
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Header message type is &quot;</span>);
        uitoa((WORD)<a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#ab3916949b107421952fde901d14b9ce8">xPL_MessageType</a>, (BYTE*)UDPchar);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a> ((BYTE*)UDPchar);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*) <a class="code" href="x_p_l_8c.html#a98630ff8d5b11060cc360fce4b678cf0" title="xPL Message Types">xPLmessageTypeText</a>[HeaderType]);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*) <span class="stringliteral">&quot;\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

        <span class="comment">// ## Next 2 characters should always be {\n</span>
        <span class="keywordflow">if</span> ((<a class="code" href="x_p_l_8c.html#a3b166aa60e7a002cfcc3f6e34982fa73">xPLProcessMsgChar</a>(<span class="charliteral">&#39;{&#39;</span>) == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) || (<a class="code" href="x_p_l_8c.html#a3b166aa60e7a002cfcc3f6e34982fa73">xPLProcessMsgChar</a>(<span class="charliteral">&#39;\n&#39;</span>) == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Missing new line character. Message rejected \r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                <span class="keywordflow">return</span> 0;
        }

        <span class="comment">// ## Cycle though the 3 header Fields, they can be out of order.</span>
        <span class="keywordflow">for</span> (HeaderCount = 0; HeaderCount &lt;= (<span class="keywordtype">unsigned</span> int)3; HeaderCount++)
        {
                <span class="comment">// Collect the header Field and determine what type it is (HeaderType)</span>
                <span class="keywordflow">if</span> (<a class="code" href="x_p_l_8c.html#aa11ae2e433086c0ebc95c02a17a779d3">xPLProcess_MsgField</a>(<a class="code" href="x_p_l_8c.html#a4d0cdcf92bbfac9444b15f5f1e2adc3f" title="xPL Header contents, this data is mandatory for the message to be valid">xPLHeaderKeyText</a>, 4, &amp;HeaderType, <span class="charliteral">&#39;=&#39;</span>) == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Unknown header feild. Message rejected \r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                        <span class="keywordflow">return</span> 0; <span class="comment">// no match found</span>
                }
                <span class="comment">//====Begin HOP ====</span>
                <span class="keywordflow">if</span> (HeaderType == (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) 0) {
                        <span class="keywordflow">if</span> (<a class="code" href="x_p_l_8c.html#a9abaa084202354fa039c0dbfadc23e09">xPLProcessSaveValue</a>(<span class="charliteral">&#39;\n&#39;</span>, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>, 2)) <span class="comment">//  max Field size is one, set 2 just in case</span>
                        { }
                }<span class="comment">//HeaderType == 0 = HOP</span>

                <span class="comment">//====Begin Source ====</span>
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (HeaderType == (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)1) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Begin decoding the Source \r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
                        memset(<a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#a57a9d6908f04926f0ed1da650b66f6f3" title="xPL Vendor name of where the message came from (source)">SourceVendor</a>,  <span class="charliteral">&#39;\0&#39;</span>, 8);
                        memset(<a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#a0692cf278a31870e2c2a4f5e0440d088" title="xPL Device name from the message source device">SourceDeviceID</a>, <span class="charliteral">&#39;\0&#39;</span>, 8);
                        memset(<a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#ac47f4d73f815a87c1bbd1b6f9734dc9d" title="xPL Instance name from the message source device">SourceInstanceID</a>, <span class="charliteral">&#39;\0&#39;</span>, 16);

                        <span class="keywordflow">if</span>(<a class="code" href="x_p_l_8c.html#a9abaa084202354fa039c0dbfadc23e09">xPLProcessSaveValue</a>(<span class="charliteral">&#39;-&#39;</span>, <a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#a57a9d6908f04926f0ed1da650b66f6f3" title="xPL Vendor name of where the message came from (source)">SourceVendor</a>, 9) == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Error in Source, Vendor. Message rejected \r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                <span class="keywordflow">return</span> 0; <span class="comment">// empty Field</span>
                        }


                        <span class="keywordflow">if</span>(<a class="code" href="x_p_l_8c.html#a9abaa084202354fa039c0dbfadc23e09">xPLProcessSaveValue</a>(<span class="charliteral">&#39;.&#39;</span>, <a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#a0692cf278a31870e2c2a4f5e0440d088" title="xPL Device name from the message source device">SourceDeviceID</a>, 9) == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Error in Source, Device. Message rejected \r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                <span class="keywordflow">return</span> 0; <span class="comment">// empty Field</span>
                        }

                        <span class="keywordflow">if</span>(<a class="code" href="x_p_l_8c.html#a9abaa084202354fa039c0dbfadc23e09">xPLProcessSaveValue</a>(<span class="charliteral">&#39;\n&#39;</span>, <a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#ac47f4d73f815a87c1bbd1b6f9734dc9d" title="xPL Instance name from the message source device">SourceInstanceID</a>, 17) == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Error in Source, Instance. Message rejected \r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                <span class="keywordflow">return</span> 0; <span class="comment">// empty Field</span>
                        }

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Message Source - Vendor:&quot;</span>);
                        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(<a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#a57a9d6908f04926f0ed1da650b66f6f3" title="xPL Vendor name of where the message came from (source)">SourceVendor</a>);
                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Device:&quot;</span>);
                        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(<a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#a0692cf278a31870e2c2a4f5e0440d088" title="xPL Device name from the message source device">SourceDeviceID</a>);
                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Instance:&quot;</span>);
                        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(<a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#ac47f4d73f815a87c1bbd1b6f9734dc9d" title="xPL Instance name from the message source device">SourceInstanceID</a>);
                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

                }<span class="comment">//HeaderType == 1 = SOURCE</span>


                <span class="comment">//====Begin Target====</span>
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (HeaderType == (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)2) {
                        <span class="comment">//</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Begin decoding the Target \r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
                        memset(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>,  <span class="charliteral">&#39;\0&#39;</span>, <a class="code" href="x_p_l_8h.html#a8093f823771092ea99bef8d0b1ce5454">xPLMSGKEYLENGTH</a>);
                        <span class="keywordflow">if</span>(<a class="code" href="x_p_l_8c.html#a9abaa084202354fa039c0dbfadc23e09">xPLProcessSaveValue</a>(<span class="charliteral">&#39;-&#39;</span>, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>, 16) == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) {
                                <span class="keywordflow">if</span> (stricmppgm2ram(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>, (ROM BYTE *)<span class="stringliteral">&quot;*&quot;</span>) == 0) {
                                        <span class="comment">// The message is a broadcast</span>
                                        <a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#ab389803873f6bde1cdd2e89c436ac34c">xPL_MsgDestination</a> = <a class="code" href="x_p_l_8h.html#a8e8eafaa87afd5b6b2a4b1ffef4ff043a9aa5a9edf3f541fc5670950c23601672">To_All</a>;
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Broadcasted message, value: &quot;</span>);
                                        <a class="code" href="_hardware_profile_8h.html#a35a0c78b8926c6695d170f9f6ff47c61">putcUART</a>(<span class="charliteral">&#39;0&#39;</span> + <a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#ab389803873f6bde1cdd2e89c436ac34c">xPL_MsgDestination</a> );
                                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                } <span class="comment">// broadcast message</span>
                                <span class="keywordflow">else</span> {
                                        <span class="comment">// Message is just an error</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Error in Target. Message rejected \r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                        <span class="keywordflow">return</span> 0; <span class="comment">// empty Field</span>
                                } <span class="comment">// error in message</span>
                        } <span class="comment">// xPLProcessSaveValue</span>


                        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(stricmppgm2ram(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>, <a class="code" href="x_p_l_8c.html#a1dd6432e80a0807b69740c019706f65a" title="xPL device name, vendor ID">xPL_My_Vendor_ID</a>) == 0 ) {
                                memset(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>,  <span class="charliteral">&#39;\0&#39;</span>, <a class="code" href="x_p_l_8h.html#a8093f823771092ea99bef8d0b1ce5454">xPLMSGKEYLENGTH</a>);
                                <span class="keywordflow">if</span>(<a class="code" href="x_p_l_8c.html#a9abaa084202354fa039c0dbfadc23e09">xPLProcessSaveValue</a>(<span class="charliteral">&#39;.&#39;</span>, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>, 16) == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) {
                                        <span class="comment">// There is an error in the target message</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Error in Target Vendor. Message rejected \r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
                                        <span class="keywordflow">return</span> 0; <span class="comment">// empty Field</span>
                                }<span class="comment">//xPLProcessSaveValue</span>

                                <span class="keywordflow">if</span>(stricmppgm2ram(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>, <a class="code" href="x_p_l_8c.html#ad5d50e36a6ab5a49373f9fa26238f9e5" title="xPL device name, device ID">xPL_My_Device_ID</a>) == 0 ) {
                                        memset(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>,  <span class="charliteral">&#39;\0&#39;</span>, <a class="code" href="x_p_l_8h.html#a8093f823771092ea99bef8d0b1ce5454">xPLMSGKEYLENGTH</a>);
                                        <span class="keywordflow">if</span>(<a class="code" href="x_p_l_8c.html#a9abaa084202354fa039c0dbfadc23e09">xPLProcessSaveValue</a>(<span class="charliteral">&#39;\n&#39;</span>, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>, 16) == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) { <span class="comment">// will this error if device ID length = 16?</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Error in Target, Device. Message rejected \r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                                <span class="keywordflow">return</span> 0; <span class="comment">// empty Field</span>
                                        }


                                        <span class="keywordflow">if</span>(strcmp(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>, <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a9c46c7c2fe40ff45c5a12adb588bf4d5" title="xPL instance name of this device">xPL_My_Instance_ID</a>) == 0 ) {
                                                <a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#ab389803873f6bde1cdd2e89c436ac34c">xPL_MsgDestination</a> = <a class="code" href="x_p_l_8h.html#a8e8eafaa87afd5b6b2a4b1ffef4ff043a3f4644701fe4498e5659a493d4e8ef16">To_Me</a>;
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Message directed to me &quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                        }
                                        <span class="keywordflow">else</span> {
                                                <a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#ab389803873f6bde1cdd2e89c436ac34c">xPL_MsgDestination</a> = <a class="code" href="x_p_l_8h.html#a8e8eafaa87afd5b6b2a4b1ffef4ff043ac6954561847676d9a090ef204ef1d5c4">To_Other</a>;
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Message to Other &quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                        } <span class="comment">//xPLConfig.xPL_My_Instance_ID</span>
                                }
                                <span class="keywordflow">else</span> {
                                        <a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#ab389803873f6bde1cdd2e89c436ac34c">xPL_MsgDestination</a> = <a class="code" href="x_p_l_8h.html#a8e8eafaa87afd5b6b2a4b1ffef4ff043ac6954561847676d9a090ef204ef1d5c4">To_Other</a>;
                                        <span class="keywordflow">if</span>(<a class="code" href="x_p_l_8c.html#a9abaa084202354fa039c0dbfadc23e09">xPLProcessSaveValue</a>(<span class="charliteral">&#39;\n&#39;</span>, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>, 16) == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) { <span class="comment">// will this error if device ID length = 16?</span>
                                        }

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Message to Other &quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                } <span class="comment">// xPL_My_Device_ID</span>

                        } <span class="comment">// else if(strcmppgm2ram(xPLMsgKey, xPL_My_Vendor_ID) == 0 )</span>
                        <span class="keywordflow">else</span> {

                                <span class="keywordflow">if</span>(<a class="code" href="x_p_l_8c.html#a9abaa084202354fa039c0dbfadc23e09">xPLProcessSaveValue</a>(<span class="charliteral">&#39;.&#39;</span>, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>, 16) == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) {}
                                <span class="keywordflow">if</span>(<a class="code" href="x_p_l_8c.html#a9abaa084202354fa039c0dbfadc23e09">xPLProcessSaveValue</a>(<span class="charliteral">&#39;\n&#39;</span>, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>, 16) == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) {
                                        <span class="comment">// will this error if device ID length = 16</span>
                                }

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Message to Other \r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                        } <span class="comment">// xPL_My_Vendor_ID</span>

                } <span class="comment">//HeaderType = 2 = TARGET</span>


                <span class="comment">//====Begin End of body ====</span>

                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (HeaderType == (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)3) <span class="keywordflow">break</span>;

                <span class="keywordflow">else</span> {
                        <span class="comment">// Something went wrong with the HeaderType as this should not happen</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n #ERROR# Error in HeaderType section of XPLProcessUDPMsgHeader\r\n&quot;</span>);
                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Header type: &quot;</span>);
                        <a class="code" href="_hardware_profile_8h.html#a35a0c78b8926c6695d170f9f6ff47c61">putcUART</a>(<span class="charliteral">&#39;0&#39;</span>+ HeaderType);
                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; \r\n&quot;</span>);

<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                        <span class="keywordflow">return</span> 0;
                }

        } <span class="comment">//for</span>



        <span class="comment">// Collect the class</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Begin decoding the Schema Class \r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        <span class="keywordflow">if</span> (<a class="code" href="x_p_l_8c.html#aa11ae2e433086c0ebc95c02a17a779d3">xPLProcess_MsgField</a>(<a class="code" href="x_p_l_8c.html#a783f46ab4e10f3c6f9d240cf5f71cb54">xPLschemaClassText</a>, <a class="code" href="x_p_l_8h.html#a5cae8ff681d0a9465b29afa961ca05b3">XPL_SCHEMACLASS_SIZE</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> *) <a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#a59a980a83b46913e7f350229a3499710">xPL_SchemaClass</a> ,<span class="charliteral">&#39;.&#39;</span>) == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; error is schema class. Message rejected.\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                <span class="keywordflow">return</span> 0; <span class="comment">// no match found</span>
        }

        <span class="comment">// Collect the type</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Begin decoding the Schema Type \r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        <span class="keywordflow">if</span> (<a class="code" href="x_p_l_8c.html#aa11ae2e433086c0ebc95c02a17a779d3">xPLProcess_MsgField</a>(<a class="code" href="x_p_l_8c.html#aecfa57b2c3083178cd21d2ddd4acfb18" title="xPL Schema&#39;s (type) that are supported by this application. The first 6 are mandatory for any xPL dev...">xPLschemaTypeText</a>, <a class="code" href="x_p_l_8h.html#ada0cec3179b4e933705178e947fa46ed">XPL_SCHEMATYPE_SIZE</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> *)<a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#acc1f47c8a31f619f2c3b15db4f95285f">xPL_SchemaTypes</a>, <span class="charliteral">&#39;\n&#39;</span>) == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; error is schema type. Message rejected.\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                <span class="keywordflow">return</span> 0; <span class="comment">// no match found</span>
        }


        <span class="comment">// Next 2 characters should always be {\n</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Open the body of the message { NewLine \r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        <span class="keywordflow">if</span> ((<a class="code" href="x_p_l_8c.html#a3b166aa60e7a002cfcc3f6e34982fa73">xPLProcessMsgChar</a>(<span class="charliteral">&#39;{&#39;</span>) == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) || (<a class="code" href="x_p_l_8c.html#a3b166aa60e7a002cfcc3f6e34982fa73">xPLProcessMsgChar</a>(<span class="charliteral">&#39;\n&#39;</span>) == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)) {
                <span class="comment">//</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; expected end of header. Message rejected.\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                <span class="keywordflow">return</span> 0; <span class="comment">// no match found</span>
        }



        <span class="comment">// We made it :) The packet seems valid</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Message accepted.\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;

} <span class="comment">//XPLProcessUDPMsgHeader</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="x_p_l_8c_af740a9e5684491e3dcbe5b0198f98860_cgraph.svg" width="598" height="192" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="x_p_l_8c_af740a9e5684491e3dcbe5b0198f98860_icgraph.svg" width="896" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1099a7d6ccfe562deba149fd4acef424"></a><!-- doxytag: member="xPL.c::xPLSaveEEConfig" ref="a1099a7d6ccfe562deba149fd4acef424" args="(void *p, int Start_Address, int Data_Size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void xPLSaveEEConfig </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>Start_Address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>Data_Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00194">194</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>References <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, and <a class="el" href="_security_system_8h_source.html#l00013">XPLEECONFIGVERSION</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l02162">bypassArea()</a>, <a class="el" href="_security_system_8c_source.html#l02108">bypassZone()</a>, <a class="el" href="_security_system_8c_source.html#l02311">EnableArea()</a>, <a class="el" href="_security_system_8c_source.html#l02226">EnableZone()</a>, <a class="el" href="_h_t_t_p_forms_8c_source.html#l00028">HTTPExecuteGet()</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00228">HTTPPostSMTPConfig()</a>, <a class="el" href="_security_system_8c_source.html#l02048">IsolateArea()</a>, <a class="el" href="_security_system_8c_source.html#l01995">IsolateZone()</a>, and <a class="el" href="_security_system_8c_source.html#l01642">SchemaProcessUDPMsg()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                 {

    BYTE c;
    BYTE *src=(BYTE *)p;

    XEEBeginWrite(Start_Address);
    XEEWrite(<a class="code" href="_security_system_8h.html#aaad19aa5437f84c85f9e2535098af81c">XPLEECONFIGVERSION</a>); <span class="comment">// When a record is saved, first byte is written to indicate a valid record was saved.</span>
    XEEEndWrite();
        <span class="keywordflow">while</span>(XEEIsBusy());

        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Saving starting&quot;</span>);

    <span class="keywordflow">for</span>(<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 1; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; Data_Size; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                XEEBeginWrite(Start_Address + <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>);
                XEEWrite(*src++);
                <span class="keywordflow">while</span>(XEEIsBusy());
                XEEEndWrite();
                <span class="keywordflow">while</span>(XEEIsBusy());
        }<span class="comment">// iCount</span>

        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;end\r\n&quot;</span>);
}
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="x_p_l_8c_a1099a7d6ccfe562deba149fd4acef424_icgraph.svg" width="1190" height="592" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="abde6ae0f37ef47bee8e881bba8502169"></a><!-- doxytag: member="xPL.c::XPLSendHeader" ref="abde6ae0f37ef47bee8e881bba8502169" args="(xPL_MessageTypes xPL_MSG_Type, BOOL isBroadCast, xPL_SchemaClasss SchemaClass, xPL_SchemaTypess SchemaType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XPLSendHeader </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="x_p_l_8h.html#ae920acc0dd05f63aa5435d5ae4066ae1">xPL_MessageTypes</a>&#160;</td>
          <td class="paramname"><em>xPL_MSG_Type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BOOL&#160;</td>
          <td class="paramname"><em>isBroadCast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="x_p_l_8h.html#a9393a512bb6ecf7aa03d47d6a1d62e34">xPL_SchemaClasss</a>&#160;</td>
          <td class="paramname"><em>SchemaClass</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="x_p_l_8h.html#a44c7fcbdaccb766382c5eee977cbce00">xPL_SchemaTypess</a>&#160;</td>
          <td class="paramname"><em>SchemaType</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Used to create any xPL message. Populates the header then adds class type and opens the body. have a look at <a class="el" href="x_p_l_8c.html#abc8f282f2ce56cb62d7e149120130c72">XPLSendHeartBeat()</a>; to see it in use. Remember the body of the meesage need to be closed with the following:</p>
<p>UDPPutROMString((ROM BYTE*) "\n}\n");</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">xPL_MessageTypes</td><td>xPL_MSG_Type </td></tr>
    <tr><td class="paramname">BOOL</td><td>isBroadCast, if the message is not a broadcast then the target address will be taken from xPLReceivedMessage </td></tr>
    <tr><td class="paramname">xPL_SchemaClasss</td><td>SchemaClass </td></tr>
    <tr><td class="paramname">xPL_SchemaTypess</td><td>SchemaType </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00349">349</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>References <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="x_p_l_8h_source.html#l00093">xPLReceivedMessages::SourceDeviceID</a>, <a class="el" href="x_p_l_8h_source.html#l00094">xPLReceivedMessages::SourceInstanceID</a>, <a class="el" href="x_p_l_8h_source.html#l00092">xPLReceivedMessages::SourceVendor</a>, <a class="el" href="x_p_l_8c_source.html#l00021">xPL_My_Device_ID</a>, <a class="el" href="_security_system_8h_source.html#l00203">xPLConfigs::xPL_My_Instance_ID</a>, <a class="el" href="x_p_l_8c_source.html#l00019">xPL_My_Vendor_ID</a>, <a class="el" href="x_p_l_8h_source.html#l00010">XPL_UDP_PORT</a>, <a class="el" href="_security_system_8c_source.html#l00136">xPLConfig</a>, <a class="el" href="x_p_l_8c_source.html#l00026">xPLmessageTypeText</a>, <a class="el" href="x_p_l_8c_source.html#l00044">xPLschemaClassText</a>, <a class="el" href="x_p_l_8c_source.html#l00052">xPLschemaTypeText</a>, and <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l02162">bypassArea()</a>, <a class="el" href="_security_system_8c_source.html#l02108">bypassZone()</a>, <a class="el" href="_security_system_8c_source.html#l02311">EnableArea()</a>, <a class="el" href="_security_system_8c_source.html#l02226">EnableZone()</a>, <a class="el" href="_security_system_8c_source.html#l02048">IsolateArea()</a>, <a class="el" href="_security_system_8c_source.html#l01995">IsolateZone()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00965">SendACStat()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00226">SendAlarmingMsg()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00711">SendAreaInfo()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00587">SendAreaList()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l01084">SendAreaStat()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00132">SendAreaStateMsg()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00395">SendArmed()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00929">SendBatteryStat()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00814">SendConfigCurrent()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00774">SendConfigList()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00504">SendDisarm()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00471">SendError()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l01002">SendGateStat()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00894">SendGatewayChanged()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00306">SendGatewayInfo()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00360">SendGatewayReady()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00637">SendZoneInfo()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00545">SendZoneList()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l01180">SendZoneStat()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00075">SendZoneStateMsg()</a>, <a class="el" href="_security_system_8c_source.html#l01411">StateChangeToArmFailed()</a>, <a class="el" href="_security_system_8c_source.html#l00515">xPLFactoryRestart()</a>, and <a class="el" href="x_p_l_8c_source.html#l00300">XPLSendHeartBeat()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                                                               {

        <span class="comment">// Clear out the NODE_INFO, when a packet is received the socket is changed to point to the remote node</span>
        UDPSocketInfo[<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>].remoteNode.IPAddr.Val =  0xffffffff;

        UDPSocketInfo[<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>].remoteNode.MACAddr.v[0]   = 0xff;
        UDPSocketInfo[<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>].remoteNode.MACAddr.v[1]   = 0xff;
        UDPSocketInfo[<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>].remoteNode.MACAddr.v[2]   = 0xff;
        UDPSocketInfo[<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>].remoteNode.MACAddr.v[3]   = 0xff;
        UDPSocketInfo[<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>].remoteNode.MACAddr.v[4]   = 0xff;
        UDPSocketInfo[<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>].remoteNode.MACAddr.v[5]   = 0xff;

        UDPSocketInfo[<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>].remotePort = <a class="code" href="x_p_l_8h.html#ab4be00ac06f43fbbaba203f9e2714da8">XPL_UDP_PORT</a>;

        <span class="comment">// Send XPL message type from array</span>
        UDPPutROMArray(<a class="code" href="x_p_l_8c.html#a98630ff8d5b11060cc360fce4b678cf0" title="xPL Message Types">xPLmessageTypeText</a>[xPL_MSG_Type],8);

        <span class="comment">// open the header</span>
        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n{\nhop=1\nsource=&quot;</span>);
        UDPPutROMString((ROM BYTE*) <a class="code" href="x_p_l_8c.html#a1dd6432e80a0807b69740c019706f65a" title="xPL device name, vendor ID">xPL_My_Vendor_ID</a>);
        UDPPut(<span class="charliteral">&#39;-&#39;</span>);
        UDPPutROMString((ROM BYTE*) <a class="code" href="x_p_l_8c.html#ad5d50e36a6ab5a49373f9fa26238f9e5" title="xPL device name, device ID">xPL_My_Device_ID</a>);
        UDPPut(<span class="charliteral">&#39;.&#39;</span>);

        UDPPutArray(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a9c46c7c2fe40ff45c5a12adb588bf4d5" title="xPL instance name of this device">xPL_My_Instance_ID</a>, strlen(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a9c46c7c2fe40ff45c5a12adb588bf4d5" title="xPL instance name of this device">xPL_My_Instance_ID</a>));

        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\ntarget=&quot;</span>);
        <span class="keywordflow">if</span> (isBroadCast)
                UDPPut(<span class="charliteral">&#39;*&#39;</span>);
        <span class="keywordflow">else</span>
        {
                UDPPutROMString((ROM BYTE*) <a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#a57a9d6908f04926f0ed1da650b66f6f3" title="xPL Vendor name of where the message came from (source)">SourceVendor</a>);
                UDPPut(<span class="charliteral">&#39;-&#39;</span>);
                UDPPutROMString((ROM BYTE*) <a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#a0692cf278a31870e2c2a4f5e0440d088" title="xPL Device name from the message source device">SourceDeviceID</a>);
                UDPPut(<span class="charliteral">&#39;.&#39;</span>);
                UDPPutROMString((ROM BYTE*) <a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#ac47f4d73f815a87c1bbd1b6f9734dc9d" title="xPL Instance name from the message source device">SourceInstanceID</a>);
        }
        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n}\n&quot;</span>);

        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; ! <a class="code" href="x_p_l_8c.html#a783f46ab4e10f3c6f9d240cf5f71cb54">xPLschemaClassText</a>[SchemaClass][<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>] == <span class="charliteral">&#39;\0&#39;</span>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                UDPPut( <a class="code" href="x_p_l_8c.html#a783f46ab4e10f3c6f9d240cf5f71cb54">xPLschemaClassText</a>[SchemaClass][<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>]);
        }



        <span class="comment">//UDPPutROMArray(xPLschemaClassText[SchemaClass],8);</span>
        UDPPut(<span class="charliteral">&#39;.&#39;</span>);
        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; ! <a class="code" href="x_p_l_8c.html#aecfa57b2c3083178cd21d2ddd4acfb18" title="xPL Schema&#39;s (type) that are supported by this application. The first 6 are mandatory for any xPL dev...">xPLschemaTypeText</a>[SchemaType][<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>] == <span class="charliteral">&#39;\0&#39;</span>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                UDPPut( <a class="code" href="x_p_l_8c.html#aecfa57b2c3083178cd21d2ddd4acfb18" title="xPL Schema&#39;s (type) that are supported by this application. The first 6 are mandatory for any xPL dev...">xPLschemaTypeText</a>[SchemaType][<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>]);
        }

        <span class="comment">//UDPPutROMArray(xPLschemaTypeText[SchemaType],8);</span>
        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n{\n&quot;</span>);
}
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="x_p_l_8c_abde6ae0f37ef47bee8e881bba8502169_icgraph.svg" width="1840" height="1691" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="abc8f282f2ce56cb62d7e149120130c72"></a><!-- doxytag: member="xPL.c::XPLSendHeartBeat" ref="abc8f282f2ce56cb62d7e149120130c72" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XPLSendHeartBeat </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>UDPIsPutReady(XPLSocket) </p>
</p>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00300">300</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>References <a class="el" href="x_p_l_8h_source.html#l00052">Class_Config</a>, <a class="el" href="x_p_l_8h_source.html#l00051">Class_HBeat</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00058">Type_Basic</a>, <a class="el" href="_security_system_8h_source.html#l00202">xPLConfigs::xPL_Heartbeat_Interval</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="_security_system_8c_source.html#l00136">xPLConfig</a>, <a class="el" href="x_p_l_8c_source.html#l00074">xPLConfiguerd</a>, <a class="el" href="x_p_l_8c_source.html#l00014">xPLMsgKey</a>, <a class="el" href="x_p_l_8h_source.html#l00022">xPLMSGKEYLENGTH</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, and <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>.</p>

<p>Referenced by <a class="el" href="x_p_l_8c_source.html#l00224">XPLHeartBeatTiming()</a>.</p>
<div class="fragment"><pre class="fragment">                            {

        memset(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>, <span class="charliteral">&#39;\0&#39;</span>,<a class="code" href="x_p_l_8h.html#a8093f823771092ea99bef8d0b1ce5454">xPLMSGKEYLENGTH</a>);

        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# XPLSendHeartBeat, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {

                <span class="comment">// Send generic header config.basic</span>
                <span class="keywordflow">if</span>(!<a class="code" href="x_p_l_8c.html#ae1b47e463d46f60bf5a1b65fd132eb18" title="True if the device has received all needed configuration details from the hub.">xPLConfiguerd</a>)
                        <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba14f0290b427ed1601cbd6b99072f4401">Class_Config</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a563aada2692fff4210fdcac659bae9cc">Type_Basic</a>);

                <span class="comment">//Send generic header hbeat.basic</span>
                <span class="keywordflow">if</span>(<a class="code" href="x_p_l_8c.html#ae1b47e463d46f60bf5a1b65fd132eb18" title="True if the device has received all needed configuration details from the hub.">xPLConfiguerd</a>)
                        <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba44befdda86d7f36ef171a2385f3ad3b5">Class_HBeat</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a563aada2692fff4210fdcac659bae9cc">Type_Basic</a>);


                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;interval=&quot;</span>);

                uitoa((WORD)<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a7111b59426453cce173352e2d7ef9dc3" title="Interval of the xPL heatbeat message in seconds.">xPL_Heartbeat_Interval</a>, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>);
                <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; ! <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>] == <span class="charliteral">&#39;\0&#39;</span>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                        UDPPut(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>]);
                }

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n}\n&quot;</span>);
                <span class="comment">// Now transmit it.</span>
                UDPFlush();

        } <span class="comment">///UDPIsPutReady(XPLSocket)</span>
<span class="comment"></span>}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="x_p_l_8c_abc8f282f2ce56cb62d7e149120130c72_cgraph.svg" width="464" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="x_p_l_8c_abc8f282f2ce56cb62d7e149120130c72_icgraph.svg" width="830" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a86d914c966f337c4e3a6fda46a945d11"></a><!-- doxytag: member="xPL.c::XPLTasks" ref="a86d914c966f337c4e3a6fda46a945d11" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XPLTasks </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00263">263</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>References <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00412">SMTPTaskProcess()</a>, <a class="el" href="x_p_l_8c_source.html#l00224">XPLHeartBeatTiming()</a>, <a class="el" href="x_p_l_8c_source.html#l00415">XPLProcessUDPMsg()</a>, and <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>.</p>

<p>Referenced by <a class="el" href="_main_demo_8c_source.html#l00072">main()</a>.</p>
<div class="fragment"><pre class="fragment">                    {

        <span class="comment">/* There are 3 tasks here that need to run in this order</span>
<span class="comment">         1 SchemaTasks</span>
<span class="comment">         2 UDP input buffer</span>
<span class="comment">         3 xPL heart beat message</span>
<span class="comment">         Only one can run per task run! Remember the StackTask() needs to be called to flush the transmit buffer</span>
<span class="comment"></span>
<span class="comment">        */</span>

        <span class="keywordflow">if</span>(UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a62b4d90791ab073f74677d42bfb64253">SchemaTasks</a>()) {  <span class="comment">// True if no task has ran</span>
                        <span class="comment">// Process heart beat</span>
                        <span class="keywordflow">if</span>(UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>))
                                <a class="code" href="x_p_l_8c.html#a07f019fb7de86ef4bfe4cab422be0969">XPLHeartBeatTiming</a>();
                        <span class="comment">// Process email messages</span>
                        <span class="keywordflow">if</span>(UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>))
                                <a class="code" href="_security_system_8h.html#aa3464edbc8a2b00d44aff04588ed10ef" title="Managers the scheduled sending of emails.">SMTPTaskProcess</a>();
                }
        }

        <span class="comment">// Is data waiting for us to read?</span>
        <span class="keywordflow">if</span> (UDPIsGetReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n######################\r\nUDP xPL socket contains data\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                <a class="code" href="x_p_l_8c.html#a41c59f641ff95b999e66c0d45117b73d">XPLProcessUDPMsg</a>();
        }

} <span class="comment">// XPLTasks</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="x_p_l_8c_a86d914c966f337c4e3a6fda46a945d11_cgraph.svg" width="1851" height="2267" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="x_p_l_8c_a86d914c966f337c4e3a6fda46a945d11_icgraph.svg" width="246" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="acfb9cbdd568e102081516ecd213fda75"></a><!-- doxytag: member="xPL.c::Default_xPL_My_Instance_ID" ref="acfb9cbdd568e102081516ecd213fda75" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rom char <a class="el" href="x_p_l_8h.html#acfb9cbdd568e102081516ecd213fda75">Default_xPL_My_Instance_ID</a>[] = {&quot;thefirst&quot;}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>xPL device name, instance ID </p>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00023">23</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>Referenced by <a class="el" href="x_p_l_8c_source.html#l00109">xPLInit()</a>.</p>

</div>
</div>
<a class="anchor" id="ad5d50e36a6ab5a49373f9fa26238f9e5"></a><!-- doxytag: member="xPL.c::xPL_My_Device_ID" ref="ad5d50e36a6ab5a49373f9fa26238f9e5" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rom char <a class="el" href="x_p_l_8c.html#ad5d50e36a6ab5a49373f9fa26238f9e5">xPL_My_Device_ID</a>[] = {&quot;pir&quot;}<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>xPL device name, device ID </p>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00021">21</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>Referenced by <a class="el" href="x_p_l_8c_source.html#l00496">XPLProcessUDPMsgHeader()</a>, and <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>.</p>

</div>
</div>
<a class="anchor" id="a1dd6432e80a0807b69740c019706f65a"></a><!-- doxytag: member="xPL.c::xPL_My_Vendor_ID" ref="a1dd6432e80a0807b69740c019706f65a" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rom char <a class="el" href="x_p_l_8c.html#a1dd6432e80a0807b69740c019706f65a">xPL_My_Vendor_ID</a>[] = {&quot;oden&quot;}<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>xPL device name, vendor ID </p>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00019">19</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>Referenced by <a class="el" href="x_p_l_8c_source.html#l00496">XPLProcessUDPMsgHeader()</a>, and <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>.</p>

</div>
</div>
<a class="anchor" id="ae1b47e463d46f60bf5a1b65fd132eb18"></a><!-- doxytag: member="xPL.c::xPLConfiguerd" ref="ae1b47e463d46f60bf5a1b65fd132eb18" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL <a class="el" href="x_p_l_8c.html#ae1b47e463d46f60bf5a1b65fd132eb18">xPLConfiguerd</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>True if the device has received all needed configuration details from the hub. </p>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00074">74</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>Referenced by <a class="el" href="x_p_l_8c_source.html#l00224">XPLHeartBeatTiming()</a>, <a class="el" href="x_p_l_8c_source.html#l00109">xPLInit()</a>, <a class="el" href="x_p_l_8c_source.html#l00415">XPLProcessUDPMsg()</a>, and <a class="el" href="x_p_l_8c_source.html#l00300">XPLSendHeartBeat()</a>.</p>

</div>
</div>
<a class="anchor" id="a4d0cdcf92bbfac9444b15f5f1e2adc3f"></a><!-- doxytag: member="xPL.c::xPLHeaderKeyText" ref="a4d0cdcf92bbfac9444b15f5f1e2adc3f" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROM char* <a class="el" href="x_p_l_8c.html#a4d0cdcf92bbfac9444b15f5f1e2adc3f">xPLHeaderKeyText</a>[]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment">
{
        <span class="stringliteral">&quot;hop&quot;</span>,          
        <span class="stringliteral">&quot;source&quot;</span>,       
        <span class="stringliteral">&quot;target&quot;</span>,       
        <span class="stringliteral">&quot;}&quot;</span>                     
}
</pre></div>
<p>xPL Header contents, this data is mandatory for the message to be valid </p>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00034">34</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>Referenced by <a class="el" href="x_p_l_8c_source.html#l00496">XPLProcessUDPMsgHeader()</a>.</p>

</div>
</div>
<a class="anchor" id="ad8f3ec7ac77de10d1b0f6eeff4969996"></a><!-- doxytag: member="xPL.c::xPLHeartbeatIntervalCount" ref="ad8f3ec7ac77de10d1b0f6eeff4969996" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TICK <a class="el" href="x_p_l_8c.html#ad8f3ec7ac77de10d1b0f6eeff4969996">xPLHeartbeatIntervalCount</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Time since last Heartbeat was sent. </p>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00077">77</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>Referenced by <a class="el" href="x_p_l_8c_source.html#l00224">XPLHeartBeatTiming()</a>, <a class="el" href="x_p_l_8c_source.html#l00109">xPLInit()</a>, and <a class="el" href="x_p_l_8c_source.html#l00415">XPLProcessUDPMsg()</a>.</p>

</div>
</div>
<a class="anchor" id="a98630ff8d5b11060cc360fce4b678cf0"></a><!-- doxytag: member="xPL.c::xPLmessageTypeText" ref="a98630ff8d5b11060cc360fce4b678cf0" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROM char* <a class="el" href="x_p_l_8c.html#a98630ff8d5b11060cc360fce4b678cf0">xPLmessageTypeText</a>[]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment">
{
        <span class="stringliteral">&quot;xpl-cmnd&quot;</span>,     
        <span class="stringliteral">&quot;xpl-stat&quot;</span>,     
        <span class="stringliteral">&quot;xpl-trig&quot;</span>      
}
</pre></div>
<p>xPL Message Types </p>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00026">26</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>Referenced by <a class="el" href="x_p_l_8c_source.html#l00496">XPLProcessUDPMsgHeader()</a>, and <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>.</p>

</div>
</div>
<a class="anchor" id="ab1bd647d7b5e8841a1378eedabb62c2e"></a><!-- doxytag: member="xPL.c::xPLMsgKey" ref="ab1bd647d7b5e8841a1378eedabb62c2e" args="[xPLMSGKEYLENGTH]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="x_p_l_8h.html#ab1bd647d7b5e8841a1378eedabb62c2e">xPLMsgKey</a>[xPLMSGKEYLENGTH]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Security, were most of it is at. </p>
<p>Microchip TCIP stack xPL general stuff****************************************************************************** D E C L A R A T I O N S ****************************************************************************** Used as a temp storage for processing messages, holds the key of a key value pair </p>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00014">14</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l02108">bypassZone()</a>, <a class="el" href="_security_system_8c_source.html#l02226">EnableZone()</a>, <a class="el" href="_security_system_8c_source.html#l01995">IsolateZone()</a>, <a class="el" href="_e_o_l_8c_source.html#l00154">IsZoneTriggered()</a>, <a class="el" href="_authenticate_8c_source.html#l00333">LoadUserPasswordEEdata()</a>, <a class="el" href="_authenticate_8c_source.html#l00487">ModifyUser()</a>, <a class="el" href="_authenticate_8c_source.html#l00447">SaveUserNameEEdata()</a>, <a class="el" href="_authenticate_8c_source.html#l00403">SaveUserPasswordEEdata()</a>, <a class="el" href="_security_system_8c_source.html#l01642">SchemaProcessUDPMsg()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00226">SendAlarmingMsg()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00711">SendAreaInfo()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l01084">SendAreaStat()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00814">SendConfigCurrent()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l01002">SendGateStat()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00306">SendGatewayInfo()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00637">SendZoneInfo()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00545">SendZoneList()</a>, <a class="el" href="_security_system_8c_source.html#l01411">StateChangeToArmFailed()</a>, <a class="el" href="x_p_l_8c_source.html#l00496">XPLProcessUDPMsgHeader()</a>, and <a class="el" href="x_p_l_8c_source.html#l00300">XPLSendHeartBeat()</a>.</p>

</div>
</div>
<a class="anchor" id="a65d6c76d15acf1f33b1d8778f79881db"></a><!-- doxytag: member="xPL.c::xPLMsgValue" ref="a65d6c76d15acf1f33b1d8778f79881db" args="[xPLMSGVALUELENGTH]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="x_p_l_8h.html#a65d6c76d15acf1f33b1d8778f79881db">xPLMsgValue</a>[xPLMSGVALUELENGTH]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Used as a temp storage for processing messages, holds the value of a key value pair. </p>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00016">16</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>Referenced by <a class="el" href="_authenticate_8c_source.html#l00658">HTTPPrint_PrintEEProm()</a>, <a class="el" href="_security_system_8c_source.html#l01642">SchemaProcessUDPMsg()</a>, and <a class="el" href="x_p_l_8c_source.html#l00829">xPLProcess_MsgField()</a>.</p>

</div>
</div>
<a class="anchor" id="a57f931c642b9abb18f2b6d3441a90a16"></a><!-- doxytag: member="xPL.c::xPLNotConfiguredTimer" ref="a57f931c642b9abb18f2b6d3441a90a16" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TICK <a class="el" href="x_p_l_8h.html#a57f931c642b9abb18f2b6d3441a90a16">xPLNotConfiguredTimer</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Time spent in not configured state. </p>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00079">79</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>Referenced by <a class="el" href="x_p_l_8c_source.html#l00224">XPLHeartBeatTiming()</a>, <a class="el" href="x_p_l_8c_source.html#l00109">xPLInit()</a>, and <a class="el" href="x_p_l_8c_source.html#l00415">XPLProcessUDPMsg()</a>.</p>

</div>
</div>
<a class="anchor" id="ab69d5f7e4e3491e1e18b41e2670ea7fe"></a><!-- doxytag: member="xPL.c::xPLReceivedMessage" ref="ab69d5f7e4e3491e1e18b41e2670ea7fe" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structx_p_l_received_messages.html">xPLReceivedMessages</a> <a class="el" href="x_p_l_8h.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00083">83</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l01642">SchemaProcessUDPMsg()</a>.</p>

</div>
</div>
<a class="anchor" id="a783f46ab4e10f3c6f9d240cf5f71cb54"></a><!-- doxytag: member="xPL.c::xPLschemaClassText" ref="a783f46ab4e10f3c6f9d240cf5f71cb54" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROM char* <a class="el" href="x_p_l_8c.html#a783f46ab4e10f3c6f9d240cf5f71cb54">xPLschemaClassText</a>[]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment">
{
        <span class="stringliteral">&quot;hbeat&quot;</span>,                
        <span class="stringliteral">&quot;config&quot;</span>,               
        <span class="stringliteral">&quot;security&quot;</span>              
}
</pre></div><p>xPL Schema's (class) that are supported by this application. hbeat and config are mandatory for any xPL device, add functionality after these entries. If adding value dont forget to add XPL_SCHEMACLASS_SIZE </p>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00044">44</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>Referenced by <a class="el" href="x_p_l_8c_source.html#l00496">XPLProcessUDPMsgHeader()</a>, and <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>.</p>

</div>
</div>
<a class="anchor" id="aecfa57b2c3083178cd21d2ddd4acfb18"></a><!-- doxytag: member="xPL.c::xPLschemaTypeText" ref="aecfa57b2c3083178cd21d2ddd4acfb18" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROM char* <a class="el" href="x_p_l_8c.html#aecfa57b2c3083178cd21d2ddd4acfb18">xPLschemaTypeText</a>[]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment">
{
        <span class="stringliteral">&quot;basic&quot;</span>,                
        <span class="stringliteral">&quot;list&quot;</span>,                 
        <span class="stringliteral">&quot;end&quot;</span>,                  
        <span class="stringliteral">&quot;response&quot;</span>,             
        <span class="stringliteral">&quot;request&quot;</span>,              
        <span class="stringliteral">&quot;current&quot;</span>,              
        <span class="stringliteral">&quot;area&quot;</span>,         
        <span class="stringliteral">&quot;zone&quot;</span>,
        <span class="stringliteral">&quot;gateway&quot;</span>,
        <span class="stringliteral">&quot;areastat&quot;</span>,
        <span class="stringliteral">&quot;zonestat&quot;</span>,
        <span class="stringliteral">&quot;gatestat&quot;</span>,
        <span class="stringliteral">&quot;areainfo&quot;</span>,
        <span class="stringliteral">&quot;zoneinfo&quot;</span>,
        <span class="stringliteral">&quot;gateinfo&quot;</span>,
        <span class="stringliteral">&quot;arealist&quot;</span>,
        <span class="stringliteral">&quot;zonelist&quot;</span>
}
</pre></div>
<p>xPL Schema's (type) that are supported by this application. The first 6 are mandatory for any xPL device, add functionality after these entries. </p>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00052">52</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>Referenced by <a class="el" href="x_p_l_8c_source.html#l00496">XPLProcessUDPMsgHeader()</a>, and <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>.</p>

</div>
</div>
<a class="anchor" id="a8a7b0f54b3a08b018c41f0355a79e659"></a><!-- doxytag: member="xPL.c::XPLSocket" ref="a8a7b0f54b3a08b018c41f0355a79e659" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UDP_SOCKET <a class="el" href="x_p_l_8h.html#a8a7b0f54b3a08b018c41f0355a79e659">XPLSocket</a> = INVALID_UDP_SOCKET</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Declares the Microchip IP socket that will be used for processing xPL messages. </p>

<p>Definition at line <a class="el" href="x_p_l_8c_source.html#l00081">81</a> of file <a class="el" href="x_p_l_8c_source.html">xPL.c</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l02162">bypassArea()</a>, <a class="el" href="_security_system_8c_source.html#l02108">bypassZone()</a>, <a class="el" href="_security_system_8c_source.html#l02311">EnableArea()</a>, <a class="el" href="_security_system_8c_source.html#l02226">EnableZone()</a>, <a class="el" href="_security_system_8c_source.html#l02048">IsolateArea()</a>, <a class="el" href="_security_system_8c_source.html#l01995">IsolateZone()</a>, <a class="el" href="_main_demo_8c_source.html#l00072">main()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00965">SendACStat()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00226">SendAlarmingMsg()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00711">SendAreaInfo()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00587">SendAreaList()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l01084">SendAreaStat()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00132">SendAreaStateMsg()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00395">SendArmed()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00929">SendBatteryStat()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00814">SendConfigCurrent()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00774">SendConfigList()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00504">SendDisarm()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00471">SendError()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l01002">SendGateStat()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00894">SendGatewayChanged()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00306">SendGatewayInfo()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00360">SendGatewayReady()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00637">SendZoneInfo()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00545">SendZoneList()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l01180">SendZoneStat()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00075">SendZoneStateMsg()</a>, <a class="el" href="_security_system_8c_source.html#l01411">StateChangeToArmFailed()</a>, <a class="el" href="_security_system_8c_source.html#l00515">xPLFactoryRestart()</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, <a class="el" href="x_p_l_8c_source.html#l00300">XPLSendHeartBeat()</a>, and <a class="el" href="x_p_l_8c_source.html#l00263">XPLTasks()</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Mon Apr 25 2011 23:31:11 for Alarm Cabinent by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
