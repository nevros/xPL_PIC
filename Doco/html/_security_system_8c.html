<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Alarm Cabinent: PIC Code/SecuritySystem.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Alarm Cabinent</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">PIC Code/SecuritySystem.c File Reference</div>  </div>
</div>
<div class="contents">

<p>Main of security.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;TCPIP Stack/TCPIP.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="x_p_l_8h_source.html">xPL.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_security_system_8h_source.html">SecuritySystem.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for SecuritySystem.c:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c__incl.svg" width="659" height="150" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="_security_system_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08">_SecurityCommands</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a07ac8320f0799ecc8980bb903ab2fb50">SecurityCommands</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Types of security commands received.  <a href="#a07ac8320f0799ecc8980bb903ab2fb50"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437">_SecurityRequests</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a575f829bed1f5db51bbf9afd3a11dfdc">SecurityRequests</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Types of security requests received.  <a href="#a575f829bed1f5db51bbf9afd3a11dfdc"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08">_SecurityCommands</a> { <br/>
&#160;&#160;<a class="el" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08af953b4b23f7933bb7148f4fd2f4d9aae">Command_arm</a> =  0, 
<a class="el" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08adfc5c835fcf7add63ec8e839ff2a846b">Command_armhome</a>, 
<a class="el" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08a351cb1b3fde20dae93a5344814889737">Command_armaway</a>, 
<a class="el" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08a8b95dc8b3febc1e51d0699702e30a137">Command_armlatchkey</a>, 
<br/>
&#160;&#160;<a class="el" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08a1ac06035919818d044954d9cf9d68dde">Command_disarm</a>, 
<a class="el" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08a45eadd60d4f065943c841d6a8682b5e4">Command_panic</a>, 
<a class="el" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08a945b5d03dcd30118efa772ec4ae14cf7">Command_isolate</a>, 
<a class="el" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08a1756fe5c3e13e8988832985f8af899f6">Command_bypass</a>, 
<br/>
&#160;&#160;<a class="el" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08a87c07783dd8ff733fda99725cfd1e5b0">Command_enable</a>
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Types of security commands received.  <a href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437">_SecurityRequests</a> { <br/>
&#160;&#160;<a class="el" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437a950bb9198ceed41b4fa58c52c4219202">Request_gateinfo</a> =  0, 
<a class="el" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437a56c4cda2eca98607416789e07fe098a1">Request_zonelist</a>, 
<a class="el" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437a7c2ab7bb2767342006fcf840b3922222">Request_arealist</a>, 
<a class="el" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437a2f68f0ea36ad356dc59021f821a86650">Request_zoneinfo</a>, 
<br/>
&#160;&#160;<a class="el" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437a77686e4b463b992bbd2178fd7fa20ee0">Request_areainfo</a>, 
<a class="el" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437ae1cbf0a766db6406efa86b2daf1b00f4">Request_gatestat</a>, 
<a class="el" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437a17510580ff47d74aad9501376c4011c6">Request_zonestat</a>, 
<a class="el" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437a42f999a570bd973e9e119bee0ce3649b">Request_areastat</a>
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Types of security requests received.  <a href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#aa38cdab46c967118f0f383312f150cce">LoadDefaultConfig</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a3ccbc635f6f7bb31465920840c7db474">IOTasks</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#ab4b79e3122c6964725cec23bf923547a">StateChangeToArmFailed</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#ad2cdbcce787b8a3c88addf52f996805f">StateChangeToArm</a> (BOOL isLatchKey)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a75fd42e4a596598bc65a32ee0c863ac6">TaskAlarmed</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#aa4b206c6022f03ed09cc1e7c0c1c64ac">TaskAlarming</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#ab4846465588e6aede197b7e0dbfcea7a">StateChangeToAlarmed</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#accca294859199bc9e59cec74618c871c">StateChangeToAlarming</a> (int ZoneID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_security_system_8h.html#abdc99e93ae47c7d6cb907274a3018ff4">Zone_States</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a2d0a6f4e811adf18c96693529c2d81b4">ArmingZoneState</a> (int TheZone)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#aea89a2e5b007623f49cb6117afc947ec">SchemaInit</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a05993d6944a2de72b8463a2ca719d3f1">xPLFactoryRestart</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a62b4d90791ab073f74677d42bfb64253">SchemaTasks</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a491f8822a8274ca5244c41d226e7136e">ClearArmingFlags</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a723bf79e9ca7924d850e5c2be4029b1c">Arm</a> (int short TimeDelay)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#afba09fe6505822eb03078088f14ef89b">ArmHome</a> (int short TimeDelay)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#af7b9ebfe6bb90725304e83cadb4cced8">ArmAway</a> (int short TimeDelay)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#aad7b06369f4a1f3b427e137a9f84a5c0">ArmLatchkey</a> (int short TimeDelay)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a1e04428a714d6c8c97cb8685f96933ee">Panic</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a290b0da69aaf212aa38c219c45a6d8a9">isZoneMemberOfArea</a> (int TheZone, int TheArea)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#acdd105845812c1756a186b645fd33b8e">SetArmingArea</a> (char *TheValue)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a9b56fcd765dadf3ef1f50d01c51caf7b">SetArming</a> (char *TheValue, BOOL isZone)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a3baecc6556e5cc7af0d59d0216aa217c">SchemaProcessUDPMsg</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a3ca20943ab34a0d560cd22d88c0ba324">Disarm</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#aa58e855f239c14c2cfc32dcfa244d31f">IsolateZone</a> (int TheZone)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a3e1f7b8c937f29b73398bb3ad54743c4">IsolateArea</a> (int TheArea)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#ab3be31caf1027bb142335a3a3d7d4eb1">bypassZone</a> (int TheZone)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a6ff589f01cb93ce6c97ab0af6405d0df">bypassArea</a> (int TheArea)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a14eb903eaa706a4874267274a2ffc6fa">EnableZone</a> (int TheZone)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a4c1402940dc136f20f757edb09c73e28">EnableArea</a> (int TheArea)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_security_system_8h.html#a8e5064a1f89199b73b816c1be8190bff">Alarm_States</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf">AlarmState</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reflects the state of the alarm.  <a href="#a016286d63fa2bb14fec565ed023b35cf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_security_system_8h.html#a8e5064a1f89199b73b816c1be8190bff">Alarm_States</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a47fd0ffa1fbd1faa655f15085dc0d801">PreviousAlarmState</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The previous state of the alarm system, used when state change fails.  <a href="#a47fd0ffa1fbd1faa655f15085dc0d801"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">TICK&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#afdcc9abdceb871043a45617d58de2057">EntryTimer</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Zone Entery timer.  <a href="#afdcc9abdceb871043a45617d58de2057"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">TICK&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a151f460a0544a0b747a38efae4124e24">TriggeredEntryZone</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Triggered Entery Zone that set off the timer.  <a href="#a151f460a0544a0b747a38efae4124e24"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">TICK&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a8434e29b41874d33c95b3f339bd2bcdf">ExitTimer</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Exit timer - 0 means off.  <a href="#a8434e29b41874d33c95b3f339bd2bcdf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">TICK&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a23978f149ac907eb92db7176cbf9fec3">NextZoneCheckDelay</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Delay used so we are not always checking the status of the zones.  <a href="#a23978f149ac907eb92db7176cbf9fec3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">TICK&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#aa8ef5dfe0e57cb90dddff51dd7ec664a">AlarmingTimer</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Times how long the alarm will sound for.  <a href="#aa8ef5dfe0e57cb90dddff51dd7ec664a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">TICK&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a207ce3b4724e48dd35dded40a44e14a8">SirenTimer</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Times the delay before acivating the external siren.  <a href="#a207ce3b4724e48dd35dded40a44e14a8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">TICK&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a291b50190c4eae5d0efd25cafddedc77">BatteryCheckTimer</a> = 0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Timer checking the battery status.  <a href="#a291b50190c4eae5d0efd25cafddedc77"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a">iCount</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Counters that are used in a number of places, centraly defined to reduce memory use.  <a href="#a45c8f1ff198e164451795c949f64747a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#af1c18f7532835833de15218c3aa5d146">UserID</a> [USERNAMELENGTH]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Name of user.  <a href="#af1c18f7532835833de15218c3aa5d146"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#ab4811cda05bf084486e0e786e68498ea">LastZoneAlarmed</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The last zone to change to alarmed state. used in <a class="el" href="_s_m_t_p_8c.html" title="All things Email.">SMTP.c</a>.  <a href="#ab4811cda05bf084486e0e786e68498ea"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ROM char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a8cba7131f5350817bd065e867459fa69">AlarmTypesText</a> []</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">determines the text outputed in the xPL message for each of the alarm types  <a href="#a8cba7131f5350817bd065e867459fa69"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ROM char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#aa5d4120799cb431593bcf942bea5e521">ZoneTypesText</a> []</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">determines the text outputed in the xpl message for each of the zone types  <a href="#aa5d4120799cb431593bcf942bea5e521"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static ROM char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#af91208010d91e259396c6c53d667fcba">SecurityCommandText</a> []</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Security command Types.  <a href="#af91208010d91e259396c6c53d667fcba"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static ROM char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a336f7f26b04a493c92ff0eae09249b04">SecurityRequestsText</a> []</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">xPL feild values for the different security requests  <a href="#a336f7f26b04a493c92ff0eae09249b04"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">DWORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a134d28a3f8166df7163955525f14b25d">dwLastUpdateTick</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Tick count of last update.  <a href="#a134d28a3f8166df7163955525f14b25d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structx_p_l_task_lists.html">xPLTaskLists</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2">xPLTaskList</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The Task buffer for sending xPL messages.  <a href="#a129e6683e32d77565169cb282dc552c2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structx_p_l_configs.html">xPLConfigs</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12">xPLConfig</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Configuration entries.  <a href="#adaa5e54872217e9a75a2bfdadf293d12"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_zone_configs.html">ZoneConfigs</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90">ZoneConfig</a> [ZONECOUNT]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores each Zones configuration information.  <a href="#af027bc313be80301e927d4717cb0dc90"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_area_configs.html">AreaConfigs</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b">AreaConfig</a> [AREACOUNT]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores each Area configuration information.  <a href="#a6d79e0918c6b94528f6283856d663a9b"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Main of security. </p>

<p>Definition in file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>
</div><hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="a07ac8320f0799ecc8980bb903ab2fb50"></a><!-- doxytag: member="SecuritySystem.c::SecurityCommands" ref="a07ac8320f0799ecc8980bb903ab2fb50" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08">_SecurityCommands</a>  <a class="el" href="_security_system_8c.html#a07ac8320f0799ecc8980bb903ab2fb50">SecurityCommands</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Types of security commands received. </p>

</div>
</div>
<a class="anchor" id="a575f829bed1f5db51bbf9afd3a11dfdc"></a><!-- doxytag: member="SecuritySystem.c::SecurityRequests" ref="a575f829bed1f5db51bbf9afd3a11dfdc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437">_SecurityRequests</a>  <a class="el" href="_security_system_8c.html#a575f829bed1f5db51bbf9afd3a11dfdc">SecurityRequests</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Types of security requests received. </p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="aea3c10886080003d3d5a40b19f6f3c08"></a><!-- doxytag: member="SecuritySystem.c::_SecurityCommands" ref="aea3c10886080003d3d5a40b19f6f3c08" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08">_SecurityCommands</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Types of security commands received. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="aea3c10886080003d3d5a40b19f6f3c08af953b4b23f7933bb7148f4fd2f4d9aae"></a><!-- doxytag: member="Command_arm" ref="aea3c10886080003d3d5a40b19f6f3c08af953b4b23f7933bb7148f4fd2f4d9aae" args="" -->Command_arm</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aea3c10886080003d3d5a40b19f6f3c08adfc5c835fcf7add63ec8e839ff2a846b"></a><!-- doxytag: member="Command_armhome" ref="aea3c10886080003d3d5a40b19f6f3c08adfc5c835fcf7add63ec8e839ff2a846b" args="" -->Command_armhome</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aea3c10886080003d3d5a40b19f6f3c08a351cb1b3fde20dae93a5344814889737"></a><!-- doxytag: member="Command_armaway" ref="aea3c10886080003d3d5a40b19f6f3c08a351cb1b3fde20dae93a5344814889737" args="" -->Command_armaway</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aea3c10886080003d3d5a40b19f6f3c08a8b95dc8b3febc1e51d0699702e30a137"></a><!-- doxytag: member="Command_armlatchkey" ref="aea3c10886080003d3d5a40b19f6f3c08a8b95dc8b3febc1e51d0699702e30a137" args="" -->Command_armlatchkey</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aea3c10886080003d3d5a40b19f6f3c08a1ac06035919818d044954d9cf9d68dde"></a><!-- doxytag: member="Command_disarm" ref="aea3c10886080003d3d5a40b19f6f3c08a1ac06035919818d044954d9cf9d68dde" args="" -->Command_disarm</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aea3c10886080003d3d5a40b19f6f3c08a45eadd60d4f065943c841d6a8682b5e4"></a><!-- doxytag: member="Command_panic" ref="aea3c10886080003d3d5a40b19f6f3c08a45eadd60d4f065943c841d6a8682b5e4" args="" -->Command_panic</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aea3c10886080003d3d5a40b19f6f3c08a945b5d03dcd30118efa772ec4ae14cf7"></a><!-- doxytag: member="Command_isolate" ref="aea3c10886080003d3d5a40b19f6f3c08a945b5d03dcd30118efa772ec4ae14cf7" args="" -->Command_isolate</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aea3c10886080003d3d5a40b19f6f3c08a1756fe5c3e13e8988832985f8af899f6"></a><!-- doxytag: member="Command_bypass" ref="aea3c10886080003d3d5a40b19f6f3c08a1756fe5c3e13e8988832985f8af899f6" args="" -->Command_bypass</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aea3c10886080003d3d5a40b19f6f3c08a87c07783dd8ff733fda99725cfd1e5b0"></a><!-- doxytag: member="Command_enable" ref="aea3c10886080003d3d5a40b19f6f3c08a87c07783dd8ff733fda99725cfd1e5b0" args="" -->Command_enable</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00082">82</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>
<div class="fragment"><pre class="fragment">                               {
        <a class="code" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08af953b4b23f7933bb7148f4fd2f4d9aae">Command_arm</a> = 0,
        <a class="code" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08adfc5c835fcf7add63ec8e839ff2a846b">Command_armhome</a>,
        <a class="code" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08a351cb1b3fde20dae93a5344814889737">Command_armaway</a>,
        <a class="code" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08a8b95dc8b3febc1e51d0699702e30a137">Command_armlatchkey</a>,
        <a class="code" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08a1ac06035919818d044954d9cf9d68dde">Command_disarm</a>,
        <a class="code" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08a45eadd60d4f065943c841d6a8682b5e4">Command_panic</a>,
        <a class="code" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08a945b5d03dcd30118efa772ec4ae14cf7">Command_isolate</a>,
        <a class="code" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08a1756fe5c3e13e8988832985f8af899f6">Command_bypass</a>,
        <a class="code" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08a87c07783dd8ff733fda99725cfd1e5b0">Command_enable</a>
} <a class="code" href="_security_system_8c.html#a07ac8320f0799ecc8980bb903ab2fb50" title="Types of security commands received.">SecurityCommands</a>;
</pre></div>
</div>
</div>
<a class="anchor" id="ae2ec37fa8ed9b3ea088b6d2706c86437"></a><!-- doxytag: member="SecuritySystem.c::_SecurityRequests" ref="ae2ec37fa8ed9b3ea088b6d2706c86437" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437">_SecurityRequests</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Types of security requests received. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ae2ec37fa8ed9b3ea088b6d2706c86437a950bb9198ceed41b4fa58c52c4219202"></a><!-- doxytag: member="Request_gateinfo" ref="ae2ec37fa8ed9b3ea088b6d2706c86437a950bb9198ceed41b4fa58c52c4219202" args="" -->Request_gateinfo</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae2ec37fa8ed9b3ea088b6d2706c86437a56c4cda2eca98607416789e07fe098a1"></a><!-- doxytag: member="Request_zonelist" ref="ae2ec37fa8ed9b3ea088b6d2706c86437a56c4cda2eca98607416789e07fe098a1" args="" -->Request_zonelist</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae2ec37fa8ed9b3ea088b6d2706c86437a7c2ab7bb2767342006fcf840b3922222"></a><!-- doxytag: member="Request_arealist" ref="ae2ec37fa8ed9b3ea088b6d2706c86437a7c2ab7bb2767342006fcf840b3922222" args="" -->Request_arealist</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae2ec37fa8ed9b3ea088b6d2706c86437a2f68f0ea36ad356dc59021f821a86650"></a><!-- doxytag: member="Request_zoneinfo" ref="ae2ec37fa8ed9b3ea088b6d2706c86437a2f68f0ea36ad356dc59021f821a86650" args="" -->Request_zoneinfo</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae2ec37fa8ed9b3ea088b6d2706c86437a77686e4b463b992bbd2178fd7fa20ee0"></a><!-- doxytag: member="Request_areainfo" ref="ae2ec37fa8ed9b3ea088b6d2706c86437a77686e4b463b992bbd2178fd7fa20ee0" args="" -->Request_areainfo</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae2ec37fa8ed9b3ea088b6d2706c86437ae1cbf0a766db6406efa86b2daf1b00f4"></a><!-- doxytag: member="Request_gatestat" ref="ae2ec37fa8ed9b3ea088b6d2706c86437ae1cbf0a766db6406efa86b2daf1b00f4" args="" -->Request_gatestat</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae2ec37fa8ed9b3ea088b6d2706c86437a17510580ff47d74aad9501376c4011c6"></a><!-- doxytag: member="Request_zonestat" ref="ae2ec37fa8ed9b3ea088b6d2706c86437a17510580ff47d74aad9501376c4011c6" args="" -->Request_zonestat</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae2ec37fa8ed9b3ea088b6d2706c86437a42f999a570bd973e9e119bee0ce3649b"></a><!-- doxytag: member="Request_areastat" ref="ae2ec37fa8ed9b3ea088b6d2706c86437a42f999a570bd973e9e119bee0ce3649b" args="" -->Request_areastat</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00096">96</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>
<div class="fragment"><pre class="fragment">                               {
        <a class="code" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437a950bb9198ceed41b4fa58c52c4219202">Request_gateinfo</a> = 0,
        <a class="code" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437a56c4cda2eca98607416789e07fe098a1">Request_zonelist</a>,
        <a class="code" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437a7c2ab7bb2767342006fcf840b3922222">Request_arealist</a>,
        <a class="code" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437a2f68f0ea36ad356dc59021f821a86650">Request_zoneinfo</a>,
        <a class="code" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437a77686e4b463b992bbd2178fd7fa20ee0">Request_areainfo</a>,
        <a class="code" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437ae1cbf0a766db6406efa86b2daf1b00f4">Request_gatestat</a>,
        <a class="code" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437a17510580ff47d74aad9501376c4011c6">Request_zonestat</a>,
        <a class="code" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437a42f999a570bd973e9e119bee0ce3649b">Request_areastat</a>
} <a class="code" href="_security_system_8c.html#a575f829bed1f5db51bbf9afd3a11dfdc" title="Types of security requests received.">SecurityRequests</a>;
</pre></div>
</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a723bf79e9ca7924d850e5c2be4029b1c"></a><!-- doxytag: member="SecuritySystem.c::Arm" ref="a723bf79e9ca7924d850e5c2be4029b1c" args="(int short TimeDelay)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Arm </td>
          <td>(</td>
          <td class="paramtype">int short&#160;</td>
          <td class="paramname"><em>TimeDelay</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function Arm PreCondition: Arming flags must be set Side Effects: Arm device Overview: Changes that alarm state to Arm based on the arming flags</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">exit</td><td>delay </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l01122">1122</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="_security_x_p_l_sender_8c_source.html#l00017">addxPLMessage()</a>, <a class="el" href="_security_system_8h_source.html#l00008">AREACOUNT</a>, <a class="el" href="_security_system_8h_source.html#l00263">xPLTasks::ErrorMessage</a>, <a class="el" href="_security_system_8c_source.html#l00025">ExitTimer</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8c_source.html#l00035">i2Count</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_security_system_8c_source.html#l01296">StateChangeToArm()</a>, <a class="el" href="_security_system_8h_source.html#l00277">xPLTaskLists::Task</a>, <a class="el" href="_security_system_8h_source.html#l00251">TB_SendError</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, and <a class="el" href="_security_system_8h_source.html#l00007">ZONECOUNT</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l01642">SchemaProcessUDPMsg()</a>.</p>
<div class="fragment"><pre class="fragment">                               {
        <span class="keywordtype">int</span> Counter;

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Arm\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        <span class="comment">// Check for a zone list or area list, if missing send error with description of fault</span>
        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0, <a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#af9feef5e257517789486c320b17e82bd">AREACOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].IsChangeFlagged == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)
                        <a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a>++;
        } <span class="comment">//for</span>

        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].IsChangeFlagged == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)
                        <a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a>++;
        } <span class="comment">//for</span>

        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a> == 0) {
                <a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a> = <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38debade489309cf96b23ec7a59ab75f32e863">TB_SendError</a>);
                <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[<a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a>].<a class="code" href="structx_p_l_tasks.html#a2c690f89f7d46cffb66d86187f378cb3" title="Error message passed to SendError.">ErrorMessage</a> = <span class="stringliteral">&quot;Nothing selected to arm&quot;</span>;
        }
        <span class="keywordflow">else</span>
                <a class="code" href="_security_system_8c.html#a8434e29b41874d33c95b3f339bd2bcdf" title="Exit timer - 0 means off.">ExitTimer</a> = TickGet() + (TimeDelay * TICK_SECOND);
        <a class="code" href="_security_system_8c.html#ad2cdbcce787b8a3c88addf52f996805f">StateChangeToArm</a> (<a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);

} <span class="comment">// Arm</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_a723bf79e9ca7924d850e5c2be4029b1c_cgraph.svg" width="992" height="192" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_a723bf79e9ca7924d850e5c2be4029b1c_icgraph.svg" width="1080" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="af7b9ebfe6bb90725304e83cadb4cced8"></a><!-- doxytag: member="SecuritySystem.c::ArmAway" ref="af7b9ebfe6bb90725304e83cadb4cced8" args="(int short TimeDelay)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ArmAway </td>
          <td>(</td>
          <td class="paramtype">int short&#160;</td>
          <td class="paramname"><em>TimeDelay</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function ArmAway PreCondition: None Side Effects: Arm device Overview: Changes that alarm state to Arm Away </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">exit</td><td>delay </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l01192">1192</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="_security_system_8c_source.html#l00025">ExitTimer</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_security_system_8h_source.html#l00173">ZoneConfigs::IsChangeFlagged</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_security_system_8c_source.html#l01296">StateChangeToArm()</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, and <a class="el" href="_security_system_8h_source.html#l00007">ZONECOUNT</a>.</p>

<p>Referenced by <a class="el" href="_h_t_t_p_forms_8c_source.html#l00028">HTTPExecuteGet()</a>, and <a class="el" href="_security_system_8c_source.html#l01642">SchemaProcessUDPMsg()</a>.</p>
<div class="fragment"><pre class="fragment">                                   {

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;ArmAway\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        <span class="comment">// Set arming flags on all zones</span>
        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#a3060ff1a56645c2b505274a4dd455582" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
        }

        <a class="code" href="_security_system_8c.html#a8434e29b41874d33c95b3f339bd2bcdf" title="Exit timer - 0 means off.">ExitTimer</a> = TickGet() + (TimeDelay * TICK_SECOND);
        <a class="code" href="_security_system_8c.html#ad2cdbcce787b8a3c88addf52f996805f">StateChangeToArm</a> (<a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);

} <span class="comment">//ArmAway</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_af7b9ebfe6bb90725304e83cadb4cced8_cgraph.svg" width="1038" height="192" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_af7b9ebfe6bb90725304e83cadb4cced8_icgraph.svg" width="1126" height="126" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="afba09fe6505822eb03078088f14ef89b"></a><!-- doxytag: member="SecuritySystem.c::ArmHome" ref="afba09fe6505822eb03078088f14ef89b" args="(int short TimeDelay)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ArmHome </td>
          <td>(</td>
          <td class="paramtype">int short&#160;</td>
          <td class="paramname"><em>TimeDelay</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function ArmHome PreCondition: None Side Effects: Arm device Overview: Changes that alarm state to Arm Home </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">exit</td><td>delay </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l01162">1162</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="_security_system_8c_source.html#l00025">ExitTimer</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_security_system_8h_source.html#l00124">Interior</a>, <a class="el" href="_security_system_8h_source.html#l00173">ZoneConfigs::IsChangeFlagged</a>, <a class="el" href="_security_system_8h_source.html#l00123">Perimiter</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_security_system_8c_source.html#l01296">StateChangeToArm()</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, and <a class="el" href="_security_system_8h_source.html#l00007">ZONECOUNT</a>.</p>

<p>Referenced by <a class="el" href="_h_t_t_p_forms_8c_source.html#l00028">HTTPExecuteGet()</a>, and <a class="el" href="_security_system_8c_source.html#l01642">SchemaProcessUDPMsg()</a>.</p>
<div class="fragment"><pre class="fragment">                                   {

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;ArmHome\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        <span class="comment">// Set arming flags on all zones of type perimeter</span>
        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].ZoneType == <a class="code" href="_security_system_8h.html#a0981dfebddc4a4cce1d1c3a1472d064da21fb74cd54ac804149445eff273c1daa">Perimiter</a>) <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#a3060ff1a56645c2b505274a4dd455582" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].ZoneType == <a class="code" href="_security_system_8h.html#a0981dfebddc4a4cce1d1c3a1472d064da5bc0fbf26c5c8866833eb36caa382b7a">Interior</a>) <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#a3060ff1a56645c2b505274a4dd455582" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
        }

        <a class="code" href="_security_system_8c.html#a8434e29b41874d33c95b3f339bd2bcdf" title="Exit timer - 0 means off.">ExitTimer</a> = TickGet() + (TimeDelay * TICK_SECOND);
        <a class="code" href="_security_system_8c.html#ad2cdbcce787b8a3c88addf52f996805f">StateChangeToArm</a>(<a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);

} <span class="comment">// ArmHome</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_afba09fe6505822eb03078088f14ef89b_cgraph.svg" width="1040" height="192" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_afba09fe6505822eb03078088f14ef89b_icgraph.svg" width="1128" height="126" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2d0a6f4e811adf18c96693529c2d81b4"></a><!-- doxytag: member="SecuritySystem.c::ArmingZoneState" ref="a2d0a6f4e811adf18c96693529c2d81b4" args="(int TheZone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_security_system_8h.html#abdc99e93ae47c7d6cb907274a3018ff4">Zone_States</a> ArmingZoneState </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>TheZone</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function ArmingZoneState PreCondition: Arming flags set Side Effects: Overview: StateNormal means everything is ok and the zone is in a good state for arming. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">The</td><td>zone to be checked </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zone_States, state of the zone </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l01607">1607</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="_security_system_8h_source.html#l00155">StateNormal</a>, <a class="el" href="_security_system_8h_source.html#l00157">StateTamper</a>, and <a class="el" href="_security_system_8h_source.html#l00156">StateTrigger</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l01296">StateChangeToArm()</a>.</p>
<div class="fragment"><pre class="fragment">                                          {

        <span class="comment">// zone is not marked as arming</span>
        <span class="keywordflow">if</span> (!<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].IsChangeFlagged)
                <span class="keywordflow">return</span> <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaff695d83533d89f59fa409f3d0301875" title="Since last check the zone has changed to normal.">StateNormal</a>;
        <span class="comment">// isolated or bypassed</span>
        <span class="keywordflow">if</span> ((<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].IsBypassed) || (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].IsIsolated))
                <span class="keywordflow">return</span> <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaff695d83533d89f59fa409f3d0301875" title="Since last check the zone has changed to normal.">StateNormal</a>;
        <span class="comment">// Triggered zone is not an entry point</span>
        <span class="keywordflow">if</span> ((<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].IsTriggered) &amp;&amp; (!<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].IsEntry))
                <span class="keywordflow">return</span> <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfa28c4bd56c6dff19d5f2741a0cb5ed47f" title="Since last check the zone has changes to Triggered.">StateTrigger</a>;
        <span class="comment">// Anything that is tampered is a no no</span>
        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].IsTampered)
                <span class="keywordflow">return</span> <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaef85932220f85c5f09ff9f3999755180" title="Since last check the zone has changes to Tampered.">StateTamper</a>;

        <span class="comment">// If we get this far then all is good.</span>
        <span class="keywordflow">return</span> <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaff695d83533d89f59fa409f3d0301875" title="Since last check the zone has changed to normal.">StateNormal</a>;
}
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_a2d0a6f4e811adf18c96693529c2d81b4_icgraph.svg" width="1723" height="259" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aad7b06369f4a1f3b427e137a9f84a5c0"></a><!-- doxytag: member="SecuritySystem.c::ArmLatchkey" ref="aad7b06369f4a1f3b427e137a9f84a5c0" args="(int short TimeDelay)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ArmLatchkey </td>
          <td>(</td>
          <td class="paramtype">int short&#160;</td>
          <td class="paramname"><em>TimeDelay</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function ArmLatchkey PreCondition: None Side Effects: Arm device Overview: Changes that alarm state to latch Key </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">exit</td><td>delay </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l01220">1220</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="_security_system_8c_source.html#l00025">ExitTimer</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_security_system_8h_source.html#l00173">ZoneConfigs::IsChangeFlagged</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_security_system_8c_source.html#l01296">StateChangeToArm()</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, and <a class="el" href="_security_system_8h_source.html#l00007">ZONECOUNT</a>.</p>

<p>Referenced by <a class="el" href="_h_t_t_p_forms_8c_source.html#l00028">HTTPExecuteGet()</a>, and <a class="el" href="_security_system_8c_source.html#l01642">SchemaProcessUDPMsg()</a>.</p>
<div class="fragment"><pre class="fragment">                                       {

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;ArmLatchkey\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

        <span class="comment">// Set arming flags on all zones</span>
        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#a3060ff1a56645c2b505274a4dd455582" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
        }

        <a class="code" href="_security_system_8c.html#a8434e29b41874d33c95b3f339bd2bcdf" title="Exit timer - 0 means off.">ExitTimer</a> = TickGet() + (TimeDelay * TICK_SECOND);
        <a class="code" href="_security_system_8c.html#ad2cdbcce787b8a3c88addf52f996805f">StateChangeToArm</a> (<a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);

} <span class="comment">// ArmLatchkey</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_aad7b06369f4a1f3b427e137a9f84a5c0_cgraph.svg" width="1070" height="192" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_aad7b06369f4a1f3b427e137a9f84a5c0_icgraph.svg" width="1158" height="126" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6ff589f01cb93ce6c97ab0af6405d0df"></a><!-- doxytag: member="SecuritySystem.c::bypassArea" ref="a6ff589f01cb93ce6c97ab0af6405d0df" args="(int TheArea)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bypassArea </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>TheArea</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function bypassArea PreCondition: None Side Effects: bypass flag Overview: will set the bypass flag for the area provided also sets the flag for any zones that are related </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">Area</td><td>ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l02162">2162</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="x_p_l_8h_source.html#l00053">Class_Security</a>, <a class="el" href="_security_system_8h_source.html#l00042">EEDATASTART_AREA</a>, <a class="el" href="_security_system_8h_source.html#l00041">EEDATASTART_ZONE</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_security_system_8h_source.html#l00190">AreaConfigs::IsAlarmed</a>, <a class="el" href="_security_system_8h_source.html#l00170">ZoneConfigs::IsBypassed</a>, <a class="el" href="_security_system_8h_source.html#l00188">AreaConfigs::IsBypassed</a>, <a class="el" href="_security_system_8h_source.html#l00191">AreaConfigs::IsChangeFlagged</a>, <a class="el" href="_security_system_8h_source.html#l00192">AreaConfigs::IsTampered</a>, <a class="el" href="_security_system_8h_source.html#l00186">AreaConfigs::IsTriggered</a>, <a class="el" href="_security_system_8c_source.html#l01467">isZoneMemberOfArea()</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00065">Type_Zone</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00194">xPLSaveEEConfig()</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>, and <a class="el" href="_security_system_8h_source.html#l00007">ZONECOUNT</a>.</p>
<div class="fragment"><pre class="fragment">                              {

        <span class="keywordtype">int</span> <span class="keywordtype">short</span> <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>;

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Bypass Area\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

        <span class="comment">//Set the area&#39;s bypass flag to true</span>
        <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[TheArea].<a class="code" href="struct_area_configs.html#a71343dad9e06632166c020a154ed7044" title="Is area Bypassed.">IsBypassed</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
        <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[TheArea].<a class="code" href="struct_area_configs.html#a711da45ad4b0c06e1aaee9d2ba6108aa" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;


        <span class="comment">// clear out the status flags</span>
        <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[TheArea].<a class="code" href="struct_area_configs.html#ad6fce28b6a7036035b3a51d4d25df694" title="Has a zone in this area been tampered.">IsTampered</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
        <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[TheArea].<a class="code" href="struct_area_configs.html#a4b3904923f06e20608888f1d3ad4ac08" title="Is the Area triggered.">IsTriggered</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
        <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[TheArea].<a class="code" href="struct_area_configs.html#a8caed50b4c827a114fceba5e95d4a377" title="Did a zone in this area cause the alarm to go off.">IsAlarmed</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;


        <span class="comment">//Send message</span>

        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# bypassZone, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {

                <span class="comment">// Generate xPL head with type security.zone</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba044979f8b65ecedf0ca73e5ab66bd7ad">Class_Security</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a898c235db41f75422dc1b6870ab35fa9" title="Part of the security schema.">Type_Zone</a>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;area=&quot;</span>);
                UDPPut(<span class="charliteral">&#39;0&#39;</span>+TheArea);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nbypassed=true\n}\n&quot;</span>);
                UDPFlush();
        }<span class="comment">//UDPIsPutReady(XPLSocket)</span>

        <span class="comment">//cycle through all zones and set their bypass flag to true if they are a member</span>
        <span class="keywordflow">for</span> (iCount = 0; iCount &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; iCount++) {
                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a290b0da69aaf212aa38c219c45a6d8a9">isZoneMemberOfArea</a>(iCount, TheArea) == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>) {
                        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#ad96e4f5f48901f709f94e84cee5021d2" title="Is zone Bypassed.">IsBypassed</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                }<span class="comment">// ZoneConfig</span>
        }<span class="comment">// for iCount</span>

        <span class="comment">//now save the changes</span>
        <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>, <a class="code" href="_security_system_8h.html#a84d6a5346b04effd1160f34d13abd01c">EEDATASTART_ZONE</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>));
        <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>, <a class="code" href="_security_system_8h.html#a61748f301d79db0c4ecb09432705d105">EEDATASTART_AREA</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>));


} <span class="comment">// bypassArea</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_a6ff589f01cb93ce6c97ab0af6405d0df_cgraph.svg" width="470" height="192" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab3be31caf1027bb142335a3a3d7d4eb1"></a><!-- doxytag: member="SecuritySystem.c::bypassZone" ref="ab3be31caf1027bb142335a3a3d7d4eb1" args="(int TheZone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bypassZone </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>TheZone</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function bypassZone PreCondition: None Side Effects: bypass flag Overview: will set the bypass flag for the zone provided </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">Zone</td><td>ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l02108">2108</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="_security_system_8h_source.html#l00179">ZoneConfigs::BounceDelay</a>, <a class="el" href="x_p_l_8h_source.html#l00053">Class_Security</a>, <a class="el" href="_security_system_8h_source.html#l00041">EEDATASTART_ZONE</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8h_source.html#l00172">ZoneConfigs::IsAlarmed</a>, <a class="el" href="_security_system_8h_source.html#l00170">ZoneConfigs::IsBypassed</a>, <a class="el" href="_security_system_8h_source.html#l00173">ZoneConfigs::IsChangeFlagged</a>, <a class="el" href="_security_system_8h_source.html#l00174">ZoneConfigs::IsTampered</a>, <a class="el" href="_security_system_8h_source.html#l00166">ZoneConfigs::IsTriggered</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00065">Type_Zone</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00014">xPLMsgKey</a>, <a class="el" href="x_p_l_8c_source.html#l00194">xPLSaveEEConfig()</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, and <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                              {
        <span class="comment">// say hello</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Bypass Zone\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

        <span class="comment">//Set the zone&#39;s bypass flag to true</span>
        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#ad96e4f5f48901f709f94e84cee5021d2" title="Is zone Bypassed.">IsBypassed</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#a3060ff1a56645c2b505274a4dd455582" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;

        <span class="comment">// clear out the status flags</span>
        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#a71861cd65add7649dffdc7f99c57595c" title="Is the zone in a tampered state.">IsTampered</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#a9dca0cb314a3d8a1cb83a2b474296cce" title="If the zone in a triggered state.">IsTriggered</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#ad96ab4189da090b75417a4705b3c092b" title="Timer for reducing impact of a bouncing IO lines.">BounceDelay</a> = 0;
        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#a1053e4f4ba65f6a78cfd3b179c46eaaa" title="Did the zone cause the alarm to go off.">IsAlarmed</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;


        <span class="comment">//Send message</span>

        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# bypassZone, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {

                <span class="comment">// Generate xPL head with type security.zone</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba044979f8b65ecedf0ca73e5ab66bd7ad">Class_Security</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a898c235db41f75422dc1b6870ab35fa9" title="Part of the security schema.">Type_Zone</a>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;event=bypassed\nzone=&quot;</span>);
                itoa(TheZone, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>);
                UDPPutArray(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>,strlen(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>));
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nstate=true\n}\n&quot;</span>);
                UDPFlush();
        }<span class="comment">//UDPIsPutReady(XPLSocket)</span>

        <span class="comment">//now save the changes</span>
        <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>, <a class="code" href="_security_system_8h.html#a84d6a5346b04effd1160f34d13abd01c">EEDATASTART_ZONE</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>));

} <span class="comment">// bypassZone</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_ab3be31caf1027bb142335a3a3d7d4eb1_cgraph.svg" width="427" height="126" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_ab3be31caf1027bb142335a3a3d7d4eb1_icgraph.svg" width="686" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a491f8822a8274ca5244c41d226e7136e"></a><!-- doxytag: member="SecuritySystem.c::ClearArmingFlags" ref="a491f8822a8274ca5244c41d226e7136e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ClearArmingFlags </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function ClearArmingFlags PreCondition: None Side Effects: Arming flags Overview: utility used to remove all of the arming flags </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l01091">1091</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="_security_system_8h_source.html#l00008">AREACOUNT</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_security_system_8h_source.html#l00191">AreaConfigs::IsChangeFlagged</a>, <a class="el" href="_security_system_8h_source.html#l00173">ZoneConfigs::IsChangeFlagged</a>, and <a class="el" href="_security_system_8h_source.html#l00007">ZONECOUNT</a>.</p>

<p>Referenced by <a class="el" href="_security_x_p_l_sender_8c_source.html#l00017">addxPLMessage()</a>, <a class="el" href="_h_t_t_p_forms_8c_source.html#l00028">HTTPExecuteGet()</a>, and <a class="el" href="_security_system_8c_source.html#l01642">SchemaProcessUDPMsg()</a>.</p>
<div class="fragment"><pre class="fragment">                             {

        <span class="comment">//Cycle through all zones and clear arming flags</span>
        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> =0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &gt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#a3060ff1a56645c2b505274a4dd455582" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;

        }


        <span class="comment">//Cycle through all areas and clear arming flags</span>
        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> =0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#af9feef5e257517789486c320b17e82bd">AREACOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_area_configs.html#a711da45ad4b0c06e1aaee9d2ba6108aa" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;

        }


}
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_a491f8822a8274ca5244c41d226e7136e_icgraph.svg" width="1998" height="746" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3ca20943ab34a0d560cd22d88c0ba324"></a><!-- doxytag: member="SecuritySystem.c::Disarm" ref="a3ca20943ab34a0d560cd22d88c0ba324" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Disarm </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function Disarm PreCondition: UserID must be populated first from <a class="el" href="_authenticate_8c.html" title="Authenication, xPL and web.">Authenticate.c</a> Side Effects: armed flags, state and IO Overview: Disarm the alarm. Uses the UserID to determine who the user was </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l01938">1938</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="_security_x_p_l_sender_8c_source.html#l00017">addxPLMessage()</a>, <a class="el" href="_security_system_8c_source.html#l00017">AlarmState</a>, <a class="el" href="_security_system_8h_source.html#l00008">AREACOUNT</a>, <a class="el" href="_security_system_8h_source.html#l00110">Disarmed</a>, <a class="el" href="_security_system_8c_source.html#l00021">EntryTimer</a>, <a class="el" href="_security_system_8c_source.html#l00025">ExitTimer</a>, <a class="el" href="_hardware_profile_8h_source.html#l00072">EXT_SIREN_IO</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_hardware_profile_8h_source.html#l00070">INT_SIREN_IO</a>, <a class="el" href="_security_system_8h_source.html#l00190">AreaConfigs::IsAlarmed</a>, <a class="el" href="_security_system_8h_source.html#l00172">ZoneConfigs::IsAlarmed</a>, <a class="el" href="_security_system_8h_source.html#l00189">AreaConfigs::IsArmed</a>, <a class="el" href="_security_system_8h_source.html#l00171">ZoneConfigs::IsArmed</a>, <a class="el" href="_security_system_8h_source.html#l00191">AreaConfigs::IsChangeFlagged</a>, <a class="el" href="_security_system_8h_source.html#l00173">ZoneConfigs::IsChangeFlagged</a>, <a class="el" href="_security_system_8h_source.html#l00187">AreaConfigs::IsIsolated</a>, <a class="el" href="_security_system_8h_source.html#l00169">ZoneConfigs::IsIsolated</a>, <a class="el" href="_security_system_8c_source.html#l00019">PreviousAlarmState</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_hardware_profile_8h_source.html#l00074">STROBE_IO</a>, <a class="el" href="_security_system_8h_source.html#l00237">TB_SendDisarm</a>, and <a class="el" href="_security_system_8h_source.html#l00007">ZONECOUNT</a>.</p>

<p>Referenced by <a class="el" href="_h_t_t_p_forms_8c_source.html#l00028">HTTPExecuteGet()</a>, and <a class="el" href="_security_system_8c_source.html#l01642">SchemaProcessUDPMsg()</a>.</p>
<div class="fragment"><pre class="fragment">                   {


        <span class="comment">//Ensure entry and exit timers are cleared</span>
        <a class="code" href="_security_system_8c.html#afdcc9abdceb871043a45617d58de2057" title="Zone Entery timer.">EntryTimer</a> = 0;
        <a class="code" href="_security_system_8c.html#a8434e29b41874d33c95b3f339bd2bcdf" title="Exit timer - 0 means off.">ExitTimer</a> = 0;

        <span class="comment">//Change any of the IO lines for sirens and strobe</span>
        <a class="code" href="_hardware_profile_8h.html#a5721d9a420c592eb0b6d9e334eb84767">STROBE_IO</a> = 0;
        <a class="code" href="_hardware_profile_8h.html#a3d6972b809d9a8aa775020159fa48094">INT_SIREN_IO</a> = 0;
        <a class="code" href="_hardware_profile_8h.html#a753ae1d13e216a920d733f2f842b5509">EXT_SIREN_IO</a> = 0;

        <span class="comment">//Change the state to disarmed</span>
        <a class="code" href="_security_system_8c.html#a47fd0ffa1fbd1faa655f15085dc0d801" title="The previous state of the alarm system, used when state change fails.">PreviousAlarmState</a> = <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfacf99f746f17e92913d15be9fc92d708c">Disarmed</a>;

        <span class="comment">//set the previous state to disarmed as well</span>
        <a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> = <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfacf99f746f17e92913d15be9fc92d708c">Disarmed</a>;

        <span class="comment">//Cycle though all of the zones clear any  Armed, Alarmed, Arming, isolated flags</span>
        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#a0fcb99621e1f25f5b6c07b71ab6a4266" title="Is zone isolated.">IsIsolated</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#abd82b1c153a91f2827b0bec6eee7ad7b" title="Is Zone Armed.">IsArmed</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#a1053e4f4ba65f6a78cfd3b179c46eaaa" title="Did the zone cause the alarm to go off.">IsAlarmed</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#a3060ff1a56645c2b505274a4dd455582" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
        }<span class="comment">// for iCount</span>


        <span class="comment">//cycle thought all areas clear any Armed, Alarmed, isolated flags</span>
        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#af9feef5e257517789486c320b17e82bd">AREACOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_area_configs.html#a89339700ce4076bbf66e8efd9803c393" title="Is area isolated.">IsIsolated</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_area_configs.html#a87176e7c401e0d23559f04abab98a3fc" title="Is area Armed.">IsArmed</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_area_configs.html#a8caed50b4c827a114fceba5e95d4a377" title="Did a zone in this area cause the alarm to go off.">IsAlarmed</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_area_configs.html#a711da45ad4b0c06e1aaee9d2ba6108aa" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
        }<span class="comment">// for iCount</span>


        <span class="comment">//Send disarmed message</span>
        <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba5dbdd6a4e8fd4a0d20c276a452fd9eb9">TB_SendDisarm</a>);

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;State change to disarm\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

} <span class="comment">// Disarm</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_a3ca20943ab34a0d560cd22d88c0ba324_cgraph.svg" width="648" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_a3ca20943ab34a0d560cd22d88c0ba324_icgraph.svg" width="1104" height="126" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4c1402940dc136f20f757edb09c73e28"></a><!-- doxytag: member="SecuritySystem.c::EnableArea" ref="a4c1402940dc136f20f757edb09c73e28" args="(int TheArea)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EnableArea </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>TheArea</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function EnableArea PreCondition: None Side Effects: bypass, isolated flag Overview: will set the bypass flag for the area provided also sets the flag for any zones that are related </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">Area</td><td>ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l02311">2311</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="x_p_l_8h_source.html#l00053">Class_Security</a>, <a class="el" href="_security_system_8h_source.html#l00042">EEDATASTART_AREA</a>, <a class="el" href="_security_system_8h_source.html#l00041">EEDATASTART_ZONE</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_security_system_8h_source.html#l00170">ZoneConfigs::IsBypassed</a>, <a class="el" href="_security_system_8h_source.html#l00188">AreaConfigs::IsBypassed</a>, <a class="el" href="_security_system_8h_source.html#l00191">AreaConfigs::IsChangeFlagged</a>, <a class="el" href="_security_system_8h_source.html#l00169">ZoneConfigs::IsIsolated</a>, <a class="el" href="_security_system_8h_source.html#l00187">AreaConfigs::IsIsolated</a>, <a class="el" href="_security_system_8c_source.html#l01467">isZoneMemberOfArea()</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00064">Type_Area</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00194">xPLSaveEEConfig()</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>, and <a class="el" href="_security_system_8h_source.html#l00007">ZONECOUNT</a>.</p>
<div class="fragment"><pre class="fragment">                              {


        <span class="comment">// It can be isolated and bypassed at the same time.</span>

        <span class="comment">// If the area is bypassed send</span>
        <span class="comment">// security.area</span>
        <span class="comment">// { event=bypassed</span>
        <span class="comment">// area=id</span>
        <span class="comment">// state=false }</span>
        <span class="comment">// clear the bypassed flag</span>

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Enable Area\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[TheArea].<a class="code" href="struct_area_configs.html#a711da45ad4b0c06e1aaee9d2ba6108aa" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;

        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[TheArea].IsBypassed) {

                <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
                <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# EnableArea, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                }
                <span class="keywordflow">else</span> {

                        <span class="comment">// Generate xPL head with type security.zone</span>
                        <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba044979f8b65ecedf0ca73e5ab66bd7ad">Class_Security</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014aa8061dadd063bb50c19c744609e3178f" title="Part of the security schema.">Type_Area</a>);
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;area=&quot;</span>);
                        UDPPut(<span class="charliteral">&#39;0&#39;</span>+ TheArea);
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nbypassed=false\n}\n&quot;</span>);
                        UDPFlush();
                }<span class="comment">//UDPIsPutReady(XPLSocket)</span>

                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[TheArea].<a class="code" href="struct_area_configs.html#a71343dad9e06632166c020a154ed7044" title="Is area Bypassed.">IsBypassed</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;

                <span class="comment">// cycle through all zones and set their flags to true clear if they are a member of this area</span>
                <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a290b0da69aaf212aa38c219c45a6d8a9">isZoneMemberOfArea</a>(<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>, TheArea)) {
                                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#ad96e4f5f48901f709f94e84cee5021d2" title="Is zone Bypassed.">IsBypassed</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                        }<span class="comment">// ZoneConfig</span>
                }<span class="comment">// for iCount</span>

        } <span class="comment">// IsBypassed</span>


        <span class="comment">// if area is isolated then send</span>
        <span class="comment">// security.area</span>
        <span class="comment">// { event=isolated</span>
        <span class="comment">// area=id</span>
        <span class="comment">// state=false }</span>
        <span class="comment">// clear the isolated flag</span>


        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[TheArea].IsIsolated) {

                <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
                <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# EnableArea, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                }
                <span class="keywordflow">else</span> {

                        <span class="comment">// Generate xPL head with type security.zone</span>
                        <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba044979f8b65ecedf0ca73e5ab66bd7ad">Class_Security</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014aa8061dadd063bb50c19c744609e3178f" title="Part of the security schema.">Type_Area</a>);
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;area=&quot;</span>);
                        UDPPut(<span class="charliteral">&#39;0&#39;</span>+TheArea);
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nisolated=false\n}\n&quot;</span>);
                        UDPFlush();
                }<span class="comment">//UDPIsPutReady(XPLSocket)</span>

                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[TheArea].<a class="code" href="struct_area_configs.html#a89339700ce4076bbf66e8efd9803c393" title="Is area isolated.">IsIsolated</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;

                <span class="comment">// cycle through all zones and set their flags to true clear if they are a member of this area</span>
                <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a290b0da69aaf212aa38c219c45a6d8a9">isZoneMemberOfArea</a>(<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>, TheArea) == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>) {
                                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#a0fcb99621e1f25f5b6c07b71ab6a4266" title="Is zone isolated.">IsIsolated</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                        }<span class="comment">// ZoneConfig</span>
                }<span class="comment">// for iCount</span>

        } <span class="comment">// IsIsolated</span>

        <span class="comment">//now save the changes</span>
        <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>, <a class="code" href="_security_system_8h.html#a84d6a5346b04effd1160f34d13abd01c">EEDATASTART_ZONE</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>));
        <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>, <a class="code" href="_security_system_8h.html#a61748f301d79db0c4ecb09432705d105">EEDATASTART_AREA</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>));

}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_a4c1402940dc136f20f757edb09c73e28_cgraph.svg" width="464" height="192" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a14eb903eaa706a4874267274a2ffc6fa"></a><!-- doxytag: member="SecuritySystem.c::EnableZone" ref="a14eb903eaa706a4874267274a2ffc6fa" args="(int TheZone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EnableZone </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>TheZone</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function EnableZone PreCondition: None Side Effects: bypass, isolated and arming flags Overview: will clear the bypass, isolated and arming flag for the zone provided Should only be called as a task. Can take 2 runs to complete task </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">Zone</td><td>ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l02226">2226</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="x_p_l_8h_source.html#l00053">Class_Security</a>, <a class="el" href="_security_system_8h_source.html#l00041">EEDATASTART_ZONE</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8h_source.html#l00170">ZoneConfigs::IsBypassed</a>, <a class="el" href="_security_system_8h_source.html#l00173">ZoneConfigs::IsChangeFlagged</a>, <a class="el" href="_security_system_8h_source.html#l00169">ZoneConfigs::IsIsolated</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00065">Type_Zone</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00014">xPLMsgKey</a>, <a class="el" href="x_p_l_8c_source.html#l00194">xPLSaveEEConfig()</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, and <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                              {

        <span class="comment">// It can be isolated and bypassed at the same time.</span>

        <span class="comment">// If the zone is bypassed send</span>
        <span class="comment">// security.zone</span>
        <span class="comment">//  event=bypassed</span>
        <span class="comment">// area=id</span>
        <span class="comment">// state=false</span>
        <span class="comment">// clear the bypassed flag</span>

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Enabling Zone\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>


        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].IsBypassed) {

                <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
                <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# EnableZone, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                }
                <span class="keywordflow">else</span> {

                        <span class="comment">// Generate xPL head with type security.zone</span>
                        <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba044979f8b65ecedf0ca73e5ab66bd7ad">Class_Security</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a898c235db41f75422dc1b6870ab35fa9" title="Part of the security schema.">Type_Zone</a>);
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;event=bypassed\nzone=&quot;</span>);
                        itoa(TheZone, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>);
                        UDPPutArray(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>,strlen(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>));
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nstate=false\n}\n&quot;</span>);
                        UDPFlush();
                }<span class="comment">//UDPIsPutReady(XPLSocket)</span>

                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#ad96e4f5f48901f709f94e84cee5021d2" title="Is zone Bypassed.">IsBypassed</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;

                <span class="comment">// return back after a TCIP stack task run has occured to complete the Isolated message</span>
                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].IsIsolated == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#a3060ff1a56645c2b505274a4dd455582" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;

        } <span class="comment">// IsBypassed</span>

        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].IsIsolated) {

                <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
                <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# EnableZone, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                }
                <span class="keywordflow">else</span> {

                        <span class="comment">// Generate xPL head with type security.zone</span>
                        <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba044979f8b65ecedf0ca73e5ab66bd7ad">Class_Security</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a898c235db41f75422dc1b6870ab35fa9" title="Part of the security schema.">Type_Zone</a>);
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;event=isolated\nzone=&quot;</span>);
                        uitoa(TheZone, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>);
                        UDPPutArray(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>,strlen(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>));
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nstate=false\n}\n&quot;</span>);
                        UDPFlush();
                }<span class="comment">//UDPIsPutReady(XPLSocket)</span>

                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#a0fcb99621e1f25f5b6c07b71ab6a4266" title="Is zone isolated.">IsIsolated</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#a3060ff1a56645c2b505274a4dd455582" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;

                <span class="comment">//now save the changes</span>
                <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>, <a class="code" href="_security_system_8h.html#a84d6a5346b04effd1160f34d13abd01c">EEDATASTART_ZONE</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>));

        } <span class="comment">// IsIsolated</span>
} <span class="comment">//EnableZone</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_a14eb903eaa706a4874267274a2ffc6fa_cgraph.svg" width="424" height="126" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_a14eb903eaa706a4874267274a2ffc6fa_icgraph.svg" width="683" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3ccbc635f6f7bb31465920840c7db474"></a><!-- doxytag: member="SecuritySystem.c::IOTasks" ref="a3ccbc635f6f7bb31465920840c7db474" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL IOTasks </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function IOTasks PreCondition: None Side Effects: Zone and Area states, sends UDP Overview: This procedure moniters the statis of zones and areas, sending triggers or alarms of a state changes It also calls the functions that control the current alarm state (alarming / alarmed)</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000007">Todo:</a></b></dt><dd>when exiting from sending a message need to return to next position. Low task</dd></dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>BOOL, no UDP message sent (false means message sent) </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00780">780</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="_security_x_p_l_sender_8c_source.html#l00017">addxPLMessage()</a>, <a class="el" href="_security_system_8h_source.html#l00113">Alarmed</a>, <a class="el" href="_security_system_8h_source.html#l00114">Alarmed24</a>, <a class="el" href="_security_system_8h_source.html#l00111">Alarming</a>, <a class="el" href="_security_system_8h_source.html#l00112">Alarming24</a>, <a class="el" href="_security_system_8c_source.html#l00017">AlarmState</a>, <a class="el" href="_security_system_8h_source.html#l00110">Disarmed</a>, <a class="el" href="_security_system_8h_source.html#l00205">xPLConfigs::EntryDelay</a>, <a class="el" href="_security_system_8c_source.html#l00021">EntryTimer</a>, <a class="el" href="_security_system_8c_source.html#l00025">ExitTimer</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_e_o_l_8c_source.html#l00154">IsZoneTriggered()</a>, <a class="el" href="_security_system_8h_source.html#l00266">xPLTasks::NewZoneState</a>, <a class="el" href="_security_system_8c_source.html#l00027">NextZoneCheckDelay</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00075">SendZoneStateMsg()</a>, <a class="el" href="_security_system_8c_source.html#l00916">StateChangeToAlarming()</a>, <a class="el" href="_security_system_8h_source.html#l00155">StateNormal</a>, <a class="el" href="_security_system_8h_source.html#l00154">StateNothing</a>, <a class="el" href="_security_system_8h_source.html#l00157">StateTamper</a>, <a class="el" href="_security_system_8h_source.html#l00156">StateTrigger</a>, <a class="el" href="_security_system_8h_source.html#l00277">xPLTaskLists::Task</a>, <a class="el" href="_security_system_8c_source.html#l01074">TaskAlarmed()</a>, <a class="el" href="_security_system_8c_source.html#l01025">TaskAlarming()</a>, <a class="el" href="_security_system_8h_source.html#l00247">TB_SendAreaStateMsg</a>, <a class="el" href="_security_system_8c_source.html#l00023">TriggeredEntryZone</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="_security_system_8h_source.html#l00125">TwentyFourHour</a>, <a class="el" href="x_p_l_8h_source.html#l00020">ZONECHECKDELAY</a>, and <a class="el" href="_security_system_8h_source.html#l00007">ZONECOUNT</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                    {

        <span class="keywordtype">int</span> CheckingZone, xPLTaskID;
        <a class="code" href="_security_system_8h.html#abdc99e93ae47c7d6cb907274a3018ff4" title="When checking the zone state in EOL, these are the possible results.">Zone_States</a> ZoneResult, PreviousZoneState;


        <span class="comment">//If EntryTimer set and state is Disarmed, clear entry timer</span>
        <span class="keywordflow">if</span> ((<a class="code" href="_security_system_8c.html#afdcc9abdceb871043a45617d58de2057" title="Zone Entery timer.">EntryTimer</a> != (<span class="keywordtype">unsigned</span>)0) &amp;&amp; (<a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> == <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfacf99f746f17e92913d15be9fc92d708c">Disarmed</a>)) <a class="code" href="_security_system_8c.html#afdcc9abdceb871043a45617d58de2057" title="Zone Entery timer.">EntryTimer</a> = 0;

        <span class="comment">//If entry timer has expired then Change to Alarming and sent ZoneID of the zone that triggered the entry timer</span>
        <span class="keywordflow">if</span> ((TickGet() &gt; <a class="code" href="_security_system_8c.html#afdcc9abdceb871043a45617d58de2057" title="Zone Entery timer.">EntryTimer</a>) &amp;&amp; (<a class="code" href="_security_system_8c.html#afdcc9abdceb871043a45617d58de2057" title="Zone Entery timer.">EntryTimer</a> != (<span class="keywordtype">unsigned</span>)0) )   {
                <a class="code" href="_security_system_8c.html#accca294859199bc9e59cec74618c871c">StateChangeToAlarming</a>(<a class="code" href="_security_system_8c.html#a151f460a0544a0b747a38efae4124e24" title="Triggered Entery Zone that set off the timer.">TriggeredEntryZone</a>);
                <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
        }

        <span class="comment">//Loop though all Zones&#39;s only when needed to</span>
        <span class="keywordflow">if</span> (TickGet() &gt; <a class="code" href="_security_system_8c.html#a23978f149ac907eb92db7176cbf9fec3" title="Delay used so we are not always checking the status of the zones.">NextZoneCheckDelay</a>) {

                <span class="keywordflow">for</span> (CheckingZone = 0; CheckingZone &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; CheckingZone++) {

                        <span class="comment">// What is the previous state</span>
                        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[CheckingZone].IsTampered) PreviousZoneState = <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaef85932220f85c5f09ff9f3999755180" title="Since last check the zone has changes to Tampered.">StateTamper</a>;
                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[CheckingZone].IsTriggered) PreviousZoneState = <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfa28c4bd56c6dff19d5f2741a0cb5ed47f" title="Since last check the zone has changes to Triggered.">StateTrigger</a>;
                        <span class="keywordflow">else</span> PreviousZoneState = <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaff695d83533d89f59fa409f3d0301875" title="Since last check the zone has changed to normal.">StateNormal</a>;

                        <span class="comment">// determine the current state</span>
                        ZoneResult = <a class="code" href="_e_o_l_8c.html#a44f4ef2b28f2d65b626e1ec4e5885934">IsZoneTriggered</a>(CheckingZone);

                        <span class="comment">//If the result is nothing then do nothing</span>
                        <span class="keywordflow">if</span> (ZoneResult == <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaff0f80ff8f066737372b052c2160509a" title="Nothing has changed since the last check.">StateNothing</a>)
                                <span class="keywordflow">goto</span> EndLoop;

                        <span class="comment">//If returning from Tamper send ZoneState and AreaState messages</span>
                        <span class="keywordflow">if</span> ((ZoneResult == <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaff695d83533d89f59fa409f3d0301875" title="Since last check the zone has changed to normal.">StateNormal</a>) &amp;&amp; (PreviousZoneState ==  <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaef85932220f85c5f09ff9f3999755180" title="Since last check the zone has changes to Tampered.">StateTamper</a>)){
                                <a class="code" href="_security_system_8h.html#ab01e7f6872c9f26dd9f91bc24f43f4b6">SendZoneStateMsg</a>(<a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaff695d83533d89f59fa409f3d0301875" title="Since last check the zone has changed to normal.">StateNormal</a>,CheckingZone);
                                xPLTaskID = <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba7b60d1d8fae6193592f42e97a2df8846">TB_SendAreaStateMsg</a>);
                                <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[xPLTaskID].<a class="code" href="structx_p_l_tasks.html#a3c4c2e2560efa711fd03282d2eb4e6f1" title="Used by SendAreaStateMsg to know what changes have been made.">NewZoneState</a> = <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaff695d83533d89f59fa409f3d0301875" title="Since last check the zone has changed to normal.">StateNormal</a>;
                                <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                        }

                        <span class="comment">//If Tamper send ZoneState and AreaState messages and sound alarm</span>
                        <span class="keywordflow">if</span> (ZoneResult == <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaef85932220f85c5f09ff9f3999755180" title="Since last check the zone has changes to Tampered.">StateTamper</a>) {
                                <span class="comment">// set the alarm off when any zone is tampered</span>
                                <a class="code" href="_security_system_8c.html#accca294859199bc9e59cec74618c871c">StateChangeToAlarming</a>(CheckingZone);
                                <a class="code" href="_security_system_8h.html#ab01e7f6872c9f26dd9f91bc24f43f4b6">SendZoneStateMsg</a>(<a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaef85932220f85c5f09ff9f3999755180" title="Since last check the zone has changes to Tampered.">StateTamper</a>,CheckingZone);
                                xPLTaskID = <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba7b60d1d8fae6193592f42e97a2df8846">TB_SendAreaStateMsg</a>); 
                                <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[xPLTaskID].<a class="code" href="structx_p_l_tasks.html#a3c4c2e2560efa711fd03282d2eb4e6f1" title="Used by SendAreaStateMsg to know what changes have been made.">NewZoneState</a> = <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaef85932220f85c5f09ff9f3999755180" title="Since last check the zone has changes to Tampered.">StateTamper</a>;
                                <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                        }


                        <span class="comment">//If returning from triggered send ZoneState and AreaState messages</span>
                        <span class="keywordflow">if</span> ((ZoneResult == <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaff695d83533d89f59fa409f3d0301875" title="Since last check the zone has changed to normal.">StateNormal</a>) &amp;&amp; (PreviousZoneState ==  <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfa28c4bd56c6dff19d5f2741a0cb5ed47f" title="Since last check the zone has changes to Triggered.">StateTrigger</a>)){
                                <a class="code" href="_security_system_8h.html#ab01e7f6872c9f26dd9f91bc24f43f4b6">SendZoneStateMsg</a>(<a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaff695d83533d89f59fa409f3d0301875" title="Since last check the zone has changed to normal.">StateNormal</a>,CheckingZone);
                                xPLTaskID = <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba7b60d1d8fae6193592f42e97a2df8846">TB_SendAreaStateMsg</a>);
                                <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[xPLTaskID].<a class="code" href="structx_p_l_tasks.html#a3c4c2e2560efa711fd03282d2eb4e6f1" title="Used by SendAreaStateMsg to know what changes have been made.">NewZoneState</a> = <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaff695d83533d89f59fa409f3d0301875" title="Since last check the zone has changed to normal.">StateNormal</a>; 
                                <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                        }

                        <span class="comment">//If triggered and 24H, set the alarm off</span>
                        <span class="keywordflow">if</span> ((ZoneResult == <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfa28c4bd56c6dff19d5f2741a0cb5ed47f" title="Since last check the zone has changes to Triggered.">StateTrigger</a>) &amp;&amp; (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[CheckingZone].ZoneType == <a class="code" href="_security_system_8h.html#a0981dfebddc4a4cce1d1c3a1472d064dad9414e63b65f1805cdd3ec2e6b74c4af">TwentyFourHour</a>)) {
                                <a class="code" href="_security_system_8c.html#accca294859199bc9e59cec74618c871c">StateChangeToAlarming</a>(CheckingZone);
                                <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                        }

                        <span class="comment">//If Triggered and not Armed send trigger message</span>
                        <span class="keywordflow">if</span> ((ZoneResult == <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfa28c4bd56c6dff19d5f2741a0cb5ed47f" title="Since last check the zone has changes to Triggered.">StateTrigger</a>) &amp;&amp; (!<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[CheckingZone].IsArmed)) {
                                <a class="code" href="_security_system_8h.html#ab01e7f6872c9f26dd9f91bc24f43f4b6">SendZoneStateMsg</a>(<a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfa28c4bd56c6dff19d5f2741a0cb5ed47f" title="Since last check the zone has changes to Triggered.">StateTrigger</a>,CheckingZone);
                                xPLTaskID = <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba7b60d1d8fae6193592f42e97a2df8846">TB_SendAreaStateMsg</a>);
                                <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[xPLTaskID].<a class="code" href="structx_p_l_tasks.html#a3c4c2e2560efa711fd03282d2eb4e6f1" title="Used by SendAreaStateMsg to know what changes have been made.">NewZoneState</a> = <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfa28c4bd56c6dff19d5f2741a0cb5ed47f" title="Since last check the zone has changes to Triggered.">StateTrigger</a>;
                                <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                        }


                        <span class="comment">//If Triggered and Zone is Armed</span>
                        <span class="keywordflow">if</span> ((ZoneResult == <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfa28c4bd56c6dff19d5f2741a0cb5ed47f" title="Since last check the zone has changes to Triggered.">StateTrigger</a>) &amp;&amp; (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[CheckingZone].IsArmed)) {
                                <span class="comment">// If the zone is an entry point and Exit time is not Zero, set (Triggered Entery Zone) = ZoneID and send trigger messages</span>
                                <span class="keywordflow">if</span> ((<a class="code" href="_security_system_8c.html#a8434e29b41874d33c95b3f339bd2bcdf" title="Exit timer - 0 means off.">ExitTimer</a> != (<span class="keywordtype">unsigned</span>)0) &amp;&amp; (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[CheckingZone].IsEntry)) {
                                        <a class="code" href="_security_system_8h.html#ab01e7f6872c9f26dd9f91bc24f43f4b6">SendZoneStateMsg</a> (<a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfa28c4bd56c6dff19d5f2741a0cb5ed47f" title="Since last check the zone has changes to Triggered.">StateTrigger</a>,CheckingZone);
                                        xPLTaskID = <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba7b60d1d8fae6193592f42e97a2df8846">TB_SendAreaStateMsg</a>);
                                        <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[xPLTaskID].<a class="code" href="structx_p_l_tasks.html#a3c4c2e2560efa711fd03282d2eb4e6f1" title="Used by SendAreaStateMsg to know what changes have been made.">NewZoneState</a> = <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaef85932220f85c5f09ff9f3999755180" title="Since last check the zone has changes to Tampered.">StateTamper</a>;
                                        <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                                }
                                <span class="comment">//If the zone is an entry point and the Entry timer is not set, then set it and send trigger messages</span>
                                <span class="keywordflow">if</span> ((<a class="code" href="_security_system_8c.html#afdcc9abdceb871043a45617d58de2057" title="Zone Entery timer.">EntryTimer</a> == (<span class="keywordtype">unsigned</span>)0) &amp;&amp; (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[CheckingZone].IsEntry)) {
                                        <a class="code" href="_security_system_8c.html#afdcc9abdceb871043a45617d58de2057" title="Zone Entery timer.">EntryTimer</a> = TickGet() + (TICK_SECOND * <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a5fc9d8b5fd181ed6d371af86dd8a15b5" title="Number of seconds you have to disarm alarm from an entry/exit zone before alarm goes off...">EntryDelay</a>);
                                        <a class="code" href="_security_system_8c.html#a151f460a0544a0b747a38efae4124e24" title="Triggered Entery Zone that set off the timer.">TriggeredEntryZone</a> = CheckingZone;
                                        <a class="code" href="_security_system_8h.html#ab01e7f6872c9f26dd9f91bc24f43f4b6">SendZoneStateMsg</a> (<a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfa28c4bd56c6dff19d5f2741a0cb5ed47f" title="Since last check the zone has changes to Triggered.">StateTrigger</a>,CheckingZone);
                                        xPLTaskID = <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba7b60d1d8fae6193592f42e97a2df8846">TB_SendAreaStateMsg</a>);
                                        <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[xPLTaskID].<a class="code" href="structx_p_l_tasks.html#a3c4c2e2560efa711fd03282d2eb4e6f1" title="Used by SendAreaStateMsg to know what changes have been made.">NewZoneState</a> = <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfa28c4bd56c6dff19d5f2741a0cb5ed47f" title="Since last check the zone has changes to Triggered.">StateTrigger</a>;
                                        <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                                }
                                <span class="comment">//Now we set the alarm off</span>
                                <a class="code" href="_security_system_8c.html#accca294859199bc9e59cec74618c871c">StateChangeToAlarming</a>(CheckingZone);
                                <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                        }
                EndLoop:

                        <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>; <span class="comment">// what a funny little hack ;)</span>

                }<span class="comment">//Loop ends here</span>



                <span class="comment">// Set the time of the next zone check</span>
                <a class="code" href="_security_system_8c.html#a23978f149ac907eb92db7176cbf9fec3" title="Delay used so we are not always checking the status of the zones.">NextZoneCheckDelay</a> = TickGet() + (TICK_SECOND / <a class="code" href="x_p_l_8h.html#a595e2cc97368633df0a707e6fcb8e8ff">ZONECHECKDELAY</a>);


        } <span class="comment">// end of delay</span>

        <span class="comment">//If Exit timer active and time passed, then set it to zero.</span>
        <span class="keywordflow">if</span> ((<a class="code" href="_security_system_8c.html#a8434e29b41874d33c95b3f339bd2bcdf" title="Exit timer - 0 means off.">ExitTimer</a> !=(<span class="keywordtype">unsigned</span>)0) &amp;&amp; (TickGet() &gt; <a class="code" href="_security_system_8c.html#a8434e29b41874d33c95b3f339bd2bcdf" title="Exit timer - 0 means off.">ExitTimer</a>)) <a class="code" href="_security_system_8c.html#a8434e29b41874d33c95b3f339bd2bcdf" title="Exit timer - 0 means off.">ExitTimer</a> = 0;


        <span class="comment">//If in alarming state, call the alarmed task manager</span>
        <span class="keywordflow">if</span> ((<a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> == <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfaa92b7a267bbc04bd0510d28db78210ed">Alarming</a>) || ( <a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> == <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfafb244666073c44c1f7554cdde4b17205">Alarming24</a>))  <a class="code" href="_security_system_8c.html#aa4b206c6022f03ed09cc1e7c0c1c64ac">TaskAlarming</a>();

        <span class="comment">//If in alarmed state call the alarmed task</span>
        <span class="keywordflow">if</span> ((<a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> == <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfa2160e3873e093db1b62cd10e5b6a27a3">Alarmed</a>) || ( <a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> == <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfada3b192c1ac5ea06b25fb09a1b514567">Alarmed24</a>))  <a class="code" href="_security_system_8c.html#a75fd42e4a596598bc65a32ee0c863ac6">TaskAlarmed</a>();

        <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;

} <span class="comment">//IOTasks</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_a3ccbc635f6f7bb31465920840c7db474_cgraph.svg" width="1147" height="494" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_a3ccbc635f6f7bb31465920840c7db474_icgraph.svg" width="651" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3e1f7b8c937f29b73398bb3ad54743c4"></a><!-- doxytag: member="SecuritySystem.c::IsolateArea" ref="a3e1f7b8c937f29b73398bb3ad54743c4" args="(int TheArea)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IsolateArea </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>TheArea</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function IsolateArea PreCondition: None Side Effects: isolated flag Overview: will set the isolated flag for the area provided also sets the flag for any zones that are related </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">Area</td><td>ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l02048">2048</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="x_p_l_8h_source.html#l00053">Class_Security</a>, <a class="el" href="_security_system_8h_source.html#l00042">EEDATASTART_AREA</a>, <a class="el" href="_security_system_8h_source.html#l00041">EEDATASTART_ZONE</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_security_system_8h_source.html#l00190">AreaConfigs::IsAlarmed</a>, <a class="el" href="_security_system_8h_source.html#l00191">AreaConfigs::IsChangeFlagged</a>, <a class="el" href="_security_system_8h_source.html#l00169">ZoneConfigs::IsIsolated</a>, <a class="el" href="_security_system_8h_source.html#l00187">AreaConfigs::IsIsolated</a>, <a class="el" href="_security_system_8h_source.html#l00192">AreaConfigs::IsTampered</a>, <a class="el" href="_security_system_8h_source.html#l00186">AreaConfigs::IsTriggered</a>, <a class="el" href="_security_system_8c_source.html#l01467">isZoneMemberOfArea()</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00064">Type_Area</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00194">xPLSaveEEConfig()</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>, and <a class="el" href="_security_system_8h_source.html#l00007">ZONECOUNT</a>.</p>
<div class="fragment"><pre class="fragment">                               {


<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Isolate Area\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

        <span class="comment">//Set the area&#39;s isolated flag to true</span>
        <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[TheArea].<a class="code" href="struct_area_configs.html#a89339700ce4076bbf66e8efd9803c393" title="Is area isolated.">IsIsolated</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
        <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[TheArea].<a class="code" href="struct_area_configs.html#a711da45ad4b0c06e1aaee9d2ba6108aa" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;


        <span class="comment">// clear out the status flags</span>
        <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[TheArea].<a class="code" href="struct_area_configs.html#ad6fce28b6a7036035b3a51d4d25df694" title="Has a zone in this area been tampered.">IsTampered</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
        <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[TheArea].<a class="code" href="struct_area_configs.html#a4b3904923f06e20608888f1d3ad4ac08" title="Is the Area triggered.">IsTriggered</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
        <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[TheArea].<a class="code" href="struct_area_configs.html#a8caed50b4c827a114fceba5e95d4a377" title="Did a zone in this area cause the alarm to go off.">IsAlarmed</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;

        <span class="comment">//Send message</span>

        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# IsolateArea, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {

                <span class="comment">// Generate xPL head with type security.zone</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba044979f8b65ecedf0ca73e5ab66bd7ad">Class_Security</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014aa8061dadd063bb50c19c744609e3178f" title="Part of the security schema.">Type_Area</a>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;area=&quot;</span>);
                UDPPut(<span class="charliteral">&#39;0&#39;</span>+TheArea);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nisolated=true&quot;</span>);
                UDPFlush();
        }<span class="comment">//UDPIsPutReady(XPLSocket)</span>

        <span class="comment">//cycle through all zones and set their isolated flag to true if they are a member</span>
        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt;= <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a290b0da69aaf212aa38c219c45a6d8a9">isZoneMemberOfArea</a>(<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>, TheArea)) {
                        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#a0fcb99621e1f25f5b6c07b71ab6a4266" title="Is zone isolated.">IsIsolated</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                }<span class="comment">// ZoneConfig</span>
        }<span class="comment">// for iCount</span>

        <span class="comment">//now save the changes</span>
        <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>, <a class="code" href="_security_system_8h.html#a84d6a5346b04effd1160f34d13abd01c">EEDATASTART_ZONE</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>));
        <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>, <a class="code" href="_security_system_8h.html#a61748f301d79db0c4ecb09432705d105">EEDATASTART_AREA</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>));

} <span class="comment">// IsolateZone</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_a3e1f7b8c937f29b73398bb3ad54743c4_cgraph.svg" width="464" height="192" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa58e855f239c14c2cfc32dcfa244d31f"></a><!-- doxytag: member="SecuritySystem.c::IsolateZone" ref="aa58e855f239c14c2cfc32dcfa244d31f" args="(int TheZone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IsolateZone </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>TheZone</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function IsolateZone PreCondition: None Side Effects: isolated flag Overview: will set the isolated flag for the zone provided </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">Zone</td><td>ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l01995">1995</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="_security_system_8h_source.html#l00179">ZoneConfigs::BounceDelay</a>, <a class="el" href="x_p_l_8h_source.html#l00053">Class_Security</a>, <a class="el" href="_security_system_8h_source.html#l00041">EEDATASTART_ZONE</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8h_source.html#l00172">ZoneConfigs::IsAlarmed</a>, <a class="el" href="_security_system_8h_source.html#l00173">ZoneConfigs::IsChangeFlagged</a>, <a class="el" href="_security_system_8h_source.html#l00169">ZoneConfigs::IsIsolated</a>, <a class="el" href="_security_system_8h_source.html#l00174">ZoneConfigs::IsTampered</a>, <a class="el" href="_security_system_8h_source.html#l00166">ZoneConfigs::IsTriggered</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00065">Type_Zone</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00014">xPLMsgKey</a>, <a class="el" href="x_p_l_8c_source.html#l00194">xPLSaveEEConfig()</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, and <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                               {

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Isolating zone\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

        <span class="comment">//Set the zone&#39;s isolated flag to true</span>
        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#a0fcb99621e1f25f5b6c07b71ab6a4266" title="Is zone isolated.">IsIsolated</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#a3060ff1a56645c2b505274a4dd455582" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;

        <span class="comment">// clear out the status flags</span>
        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#a71861cd65add7649dffdc7f99c57595c" title="Is the zone in a tampered state.">IsTampered</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#a9dca0cb314a3d8a1cb83a2b474296cce" title="If the zone in a triggered state.">IsTriggered</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#ad96ab4189da090b75417a4705b3c092b" title="Timer for reducing impact of a bouncing IO lines.">BounceDelay</a> = 0;
        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#a1053e4f4ba65f6a78cfd3b179c46eaaa" title="Did the zone cause the alarm to go off.">IsAlarmed</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;

        <span class="comment">//Send message</span>

        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# IsolateZone, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {

                <span class="comment">// Generate xPL head with type security.zone</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba044979f8b65ecedf0ca73e5ab66bd7ad">Class_Security</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a898c235db41f75422dc1b6870ab35fa9" title="Part of the security schema.">Type_Zone</a>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;event=isolated\nzone=&quot;</span>);
                itoa(TheZone, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>);
                UDPPutArray(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>,strlen(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>));
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nstate=true\n}\n&quot;</span>);
                UDPFlush();
        }<span class="comment">//UDPIsPutReady(XPLSocket)</span>

        <span class="comment">//now save the changes</span>
        <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>, <a class="code" href="_security_system_8h.html#a84d6a5346b04effd1160f34d13abd01c">EEDATASTART_ZONE</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>));

} <span class="comment">// IsolateZone</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_aa58e855f239c14c2cfc32dcfa244d31f_cgraph.svg" width="424" height="126" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_aa58e855f239c14c2cfc32dcfa244d31f_icgraph.svg" width="683" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a290b0da69aaf212aa38c219c45a6d8a9"></a><!-- doxytag: member="SecuritySystem.c::isZoneMemberOfArea" ref="a290b0da69aaf212aa38c219c45a6d8a9" args="(int TheZone, int TheArea)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL isZoneMemberOfArea </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>TheZone</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>TheArea</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function isZoneMemberOfArea PreCondition: None Side Effects: Overview: Returns true of false is an Zone is a member to an area </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">Zone</td><td>ID, Area ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>BOOL </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l01467">1467</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="_security_system_8h_source.html#l00178">ZoneConfigs::AreaList</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, and <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l02162">bypassArea()</a>, <a class="el" href="_security_system_8c_source.html#l02311">EnableArea()</a>, <a class="el" href="_security_system_8c_source.html#l02048">IsolateArea()</a>, <a class="el" href="_e_o_l_8c_source.html#l00154">IsZoneTriggered()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00226">SendAlarmingMsg()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00711">SendAreaInfo()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l01084">SendAreaStat()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00132">SendAreaStateMsg()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l01002">SendGateStat()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00637">SendZoneInfo()</a>, <a class="el" href="_security_system_8c_source.html#l00916">StateChangeToAlarming()</a>, and <a class="el" href="_security_system_8c_source.html#l01296">StateChangeToArm()</a>.</p>
<div class="fragment"><pre class="fragment">                                                  {

        <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> Result;

<span class="preprocessor">#if (AREACOUNT &gt; 8)</span>
<span class="preprocessor"></span><span class="preprocessor">#error Having more then 8 areas is not possible under this design.</span>
<span class="preprocessor"></span><span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        <span class="keywordflow">if</span> (TheArea == 0) Result = (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#a2c6fd882d20cac5f28aa0b1e11d35b09" title="Bit field list of the areas that this zone is a member of.">AreaList</a> &amp; 0b00000001);
        <span class="keywordflow">if</span> (TheArea == 1) Result = (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#a2c6fd882d20cac5f28aa0b1e11d35b09" title="Bit field list of the areas that this zone is a member of.">AreaList</a> &amp; 0b00000010);
        <span class="keywordflow">if</span> (TheArea == 2) Result = (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#a2c6fd882d20cac5f28aa0b1e11d35b09" title="Bit field list of the areas that this zone is a member of.">AreaList</a> &amp; 0b00000100);
        <span class="keywordflow">if</span> (TheArea == 3) Result = (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#a2c6fd882d20cac5f28aa0b1e11d35b09" title="Bit field list of the areas that this zone is a member of.">AreaList</a> &amp; 0b00001000);
        <span class="keywordflow">if</span> (TheArea == 4) Result = (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#a2c6fd882d20cac5f28aa0b1e11d35b09" title="Bit field list of the areas that this zone is a member of.">AreaList</a> &amp; 0b00010000);
        <span class="keywordflow">if</span> (TheArea == 5) Result = (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#a2c6fd882d20cac5f28aa0b1e11d35b09" title="Bit field list of the areas that this zone is a member of.">AreaList</a> &amp; 0b00100000);
        <span class="keywordflow">if</span> (TheArea == 6) Result = (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#a2c6fd882d20cac5f28aa0b1e11d35b09" title="Bit field list of the areas that this zone is a member of.">AreaList</a> &amp; 0b01000000);
        <span class="keywordflow">if</span> (TheArea == 7) Result = (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#a2c6fd882d20cac5f28aa0b1e11d35b09" title="Bit field list of the areas that this zone is a member of.">AreaList</a> &amp; 0b10000000);

        <span class="comment">/*</span>
<span class="comment">         #if defined(DEBUG_UART)</span>
<span class="comment">         putrsUART((ROM char*)&quot;Is Area Triggered, Area = &quot;);</span>
<span class="comment">         putcUART((char) &#39;0&#39; + TheArea);</span>
<span class="comment"></span>
<span class="comment">         putrsUART((ROM char*)&quot; Zone = &quot;);</span>
<span class="comment">         uitoa(TheZone, xPLMsgKey);</span>
<span class="comment">         putsUART(xPLMsgKey);</span>
<span class="comment"></span>
<span class="comment">         putrsUART((ROM char*)&quot; AreaList = &quot;);</span>
<span class="comment">         uitoa(ZoneConfig[TheZone].AreaList, xPLMsgKey);</span>
<span class="comment">         putsUART(xPLMsgKey);</span>
<span class="comment"></span>
<span class="comment">         putrsUART((ROM char*)&quot; Result = &quot;);</span>
<span class="comment">         uitoa(Result, xPLMsgKey);</span>
<span class="comment">         putsUART(xPLMsgKey);</span>
<span class="comment"></span>
<span class="comment">         putrsUART((ROM char*)&quot;\r\n&quot;);</span>
<span class="comment">         #endif</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> (Result &gt;= 1)  <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
        <span class="keywordflow">else</span> <span class="keywordflow">return</span> <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;


}<span class="comment">//isZoneMemberOfArea</span>
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_a290b0da69aaf212aa38c219c45a6d8a9_icgraph.svg" width="1888" height="912" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa38cdab46c967118f0f383312f150cce"></a><!-- doxytag: member="SecuritySystem.c::LoadDefaultConfig" ref="aa38cdab46c967118f0f383312f150cce" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LoadDefaultConfig </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>P R I V A T E P R O T O T Y P E S</p>
<p>Function LoadDefaultConfig PreCondition: None Side Effects: Populates ZoneConfig and AreaConfig Overview: Override any values on ZoneConfig and AreaConfig with default values </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00433">433</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="_security_system_8h_source.html#l00207">xPLConfigs::Alarming24Duration</a>, <a class="el" href="_security_system_8h_source.html#l00206">xPLConfigs::AlarmingDuration</a>, <a class="el" href="_security_system_8h_source.html#l00008">AREACOUNT</a>, <a class="el" href="_security_system_8h_source.html#l00178">ZoneConfigs::AreaList</a>, <a class="el" href="_security_system_8h_source.html#l00179">ZoneConfigs::BounceDelay</a>, <a class="el" href="_security_system_8h_source.html#l00132">Buglary</a>, <a class="el" href="_security_system_8h_source.html#l00205">xPLConfigs::EntryDelay</a>, <a class="el" href="_security_system_8h_source.html#l00204">xPLConfigs::ExitDelay</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_security_system_8h_source.html#l00190">AreaConfigs::IsAlarmed</a>, <a class="el" href="_security_system_8h_source.html#l00172">ZoneConfigs::IsAlarmed</a>, <a class="el" href="_security_system_8h_source.html#l00189">AreaConfigs::IsArmed</a>, <a class="el" href="_security_system_8h_source.html#l00171">ZoneConfigs::IsArmed</a>, <a class="el" href="_security_system_8h_source.html#l00188">AreaConfigs::IsBypassed</a>, <a class="el" href="_security_system_8h_source.html#l00170">ZoneConfigs::IsBypassed</a>, <a class="el" href="_security_system_8h_source.html#l00191">AreaConfigs::IsChangeFlagged</a>, <a class="el" href="_security_system_8h_source.html#l00173">ZoneConfigs::IsChangeFlagged</a>, <a class="el" href="_security_system_8h_source.html#l00168">ZoneConfigs::IsEntry</a>, <a class="el" href="_security_system_8h_source.html#l00187">AreaConfigs::IsIsolated</a>, <a class="el" href="_security_system_8h_source.html#l00169">ZoneConfigs::IsIsolated</a>, <a class="el" href="_security_system_8h_source.html#l00167">ZoneConfigs::IsNO</a>, <a class="el" href="_security_system_8h_source.html#l00186">AreaConfigs::IsTriggered</a>, <a class="el" href="_security_system_8h_source.html#l00166">ZoneConfigs::IsTriggered</a>, <a class="el" href="_security_system_8h_source.html#l00220">xPLConfigs::NTP_Server</a>, <a class="el" href="_security_system_8h_source.html#l00123">Perimiter</a>, <a class="el" href="_security_system_8h_source.html#l00209">xPLConfigs::SirenDelay</a>, <a class="el" href="_security_system_8h_source.html#l00208">xPLConfigs::SirenDelay24h</a>, <a class="el" href="_security_system_8h_source.html#l00217">xPLConfigs::SMTP_Active</a>, <a class="el" href="_security_system_8h_source.html#l00219">xPLConfigs::SMTP_ArmDisarm</a>, <a class="el" href="_security_system_8h_source.html#l00218">xPLConfigs::SMTP_OnlyInitalAlarm</a>, <a class="el" href="_security_system_8h_source.html#l00213">xPLConfigs::SMTP_Password</a>, <a class="el" href="_security_system_8h_source.html#l00214">xPLConfigs::SMTP_Port</a>, <a class="el" href="_security_system_8h_source.html#l00211">xPLConfigs::SMTP_Server</a>, <a class="el" href="_security_system_8h_source.html#l00210">xPLConfigs::SMTP_To</a>, <a class="el" href="_security_system_8h_source.html#l00212">xPLConfigs::SMTP_User</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="_security_system_8h_source.html#l00215">xPLConfigs::Use_AES</a>, <a class="el" href="_security_system_8h_source.html#l00194">AreaConfigs::ZoneAlarmType</a>, <a class="el" href="_security_system_8h_source.html#l00177">ZoneConfigs::ZoneAlarmType</a>, <a class="el" href="_security_system_8h_source.html#l00007">ZONECOUNT</a>, and <a class="el" href="_security_system_8h_source.html#l00176">ZoneConfigs::ZoneType</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00193">SchemaInit()</a>.</p>
<div class="fragment"><pre class="fragment">                              {


        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#a9dca0cb314a3d8a1cb83a2b474296cce" title="If the zone in a triggered state.">IsTriggered</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#abe35b13843a6aa14b59d61f31673204b" title="Is the zone Normally Open (fales = Normally Closed)">IsNO</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#a4ee15171174e0a37eb536e320374b409" title="Is this zone an entry and exit point.">IsEntry</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#a0fcb99621e1f25f5b6c07b71ab6a4266" title="Is zone isolated.">IsIsolated</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#ad96e4f5f48901f709f94e84cee5021d2" title="Is zone Bypassed.">IsBypassed</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#abd82b1c153a91f2827b0bec6eee7ad7b" title="Is Zone Armed.">IsArmed</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#a1053e4f4ba65f6a78cfd3b179c46eaaa" title="Did the zone cause the alarm to go off.">IsAlarmed</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#a3060ff1a56645c2b505274a4dd455582" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#af50f6bb1b97631e41efc90ed3a45d569" title="xPL Type of zone (perimeter, interior or 24 hour)">ZoneType</a> = <a class="code" href="_security_system_8h.html#a0981dfebddc4a4cce1d1c3a1472d064da21fb74cd54ac804149445eff273c1daa">Perimiter</a>;
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#ab47b513fec97f9480895eebb17d759bd" title="xPL Alarm type (eg fire, flood, gas etc)">ZoneAlarmType</a> = <a class="code" href="_security_system_8h.html#a785e9cb9358ef02350c5dbe8feacdce8a120398c58be584a75a04b4782660418c">Buglary</a>;
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#a2c6fd882d20cac5f28aa0b1e11d35b09" title="Bit field list of the areas that this zone is a member of.">AreaList</a> = 0;
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#ad96ab4189da090b75417a4705b3c092b" title="Timer for reducing impact of a bouncing IO lines.">BounceDelay</a> = 0;
        } <span class="comment">// for</span>

        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#af9feef5e257517789486c320b17e82bd">AREACOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_area_configs.html#a4b3904923f06e20608888f1d3ad4ac08" title="Is the Area triggered.">IsTriggered</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_area_configs.html#a4b3904923f06e20608888f1d3ad4ac08" title="Is the Area triggered.">IsTriggered</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_area_configs.html#a89339700ce4076bbf66e8efd9803c393" title="Is area isolated.">IsIsolated</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_area_configs.html#a71343dad9e06632166c020a154ed7044" title="Is area Bypassed.">IsBypassed</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_area_configs.html#a87176e7c401e0d23559f04abab98a3fc" title="Is area Armed.">IsArmed</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_area_configs.html#a8caed50b4c827a114fceba5e95d4a377" title="Did a zone in this area cause the alarm to go off.">IsAlarmed</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_area_configs.html#a711da45ad4b0c06e1aaee9d2ba6108aa" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_area_configs.html#a022bb5e6aeee73a394075b335515dd44" title="xPL Alarm type (eg fire, flood, gas etc)">ZoneAlarmType</a> = <a class="code" href="_security_system_8h.html#a785e9cb9358ef02350c5dbe8feacdce8a120398c58be584a75a04b4782660418c">Buglary</a>;
        } <span class="comment">//for</span>

        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[0].<a class="code" href="struct_zone_configs.html#a2c6fd882d20cac5f28aa0b1e11d35b09" title="Bit field list of the areas that this zone is a member of.">AreaList</a> = 0b11111111;
        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[1].<a class="code" href="struct_zone_configs.html#a2c6fd882d20cac5f28aa0b1e11d35b09" title="Bit field list of the areas that this zone is a member of.">AreaList</a> = 0b00000010;
        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[2].<a class="code" href="struct_zone_configs.html#a2c6fd882d20cac5f28aa0b1e11d35b09" title="Bit field list of the areas that this zone is a member of.">AreaList</a> = 0b00000100;
        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[3].<a class="code" href="struct_zone_configs.html#a2c6fd882d20cac5f28aa0b1e11d35b09" title="Bit field list of the areas that this zone is a member of.">AreaList</a> = 0b00001000;
        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[4].<a class="code" href="struct_zone_configs.html#a2c6fd882d20cac5f28aa0b1e11d35b09" title="Bit field list of the areas that this zone is a member of.">AreaList</a> = 0b00010000;
        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[5].<a class="code" href="struct_zone_configs.html#a2c6fd882d20cac5f28aa0b1e11d35b09" title="Bit field list of the areas that this zone is a member of.">AreaList</a> = 0b00100000;
        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[6].<a class="code" href="struct_zone_configs.html#a2c6fd882d20cac5f28aa0b1e11d35b09" title="Bit field list of the areas that this zone is a member of.">AreaList</a> = 0b01000000;
        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[7].<a class="code" href="struct_zone_configs.html#a2c6fd882d20cac5f28aa0b1e11d35b09" title="Bit field list of the areas that this zone is a member of.">AreaList</a> = 0b10000000;

        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 6; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#ad96e4f5f48901f709f94e84cee5021d2" title="Is zone Bypassed.">IsBypassed</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
        }



        <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a55fac6d0098441a27949a25d9a138509" title="Number of seconds that the alarm will ring for a 24 hour alarm type.">Alarming24Duration</a> = 18;
        <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#ad7d66e7cbab58c033063b466e51e0f13" title="Number of seconds you have to exit from an entry/exit zone.">ExitDelay</a> = 5;
        <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a5fc9d8b5fd181ed6d371af86dd8a15b5" title="Number of seconds you have to disarm alarm from an entry/exit zone before alarm goes off...">EntryDelay</a> = 7;
        <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a459109edd9f494275b72d6158714eda2" title="Number of seconds that the alarm will ring for.">AlarmingDuration</a> = 15;
        <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a7d1d439ccc753cb0aaead9e23702e87b" title="Number of seconds before the external siren is activated.">SirenDelay</a> = 10;
        <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a20fd6f6d2e7b1b8c8c492e20969ff6cb" title="Number of seconds before the external siren is activated for 24h alarm type.">SirenDelay24h</a> = 12;
        memset(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a70e871f8c8a200e0f5888f56f48e19f8" title="NTP Server name.">NTP_Server</a>, <span class="charliteral">&#39;\0&#39;</span>,<span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a70e871f8c8a200e0f5888f56f48e19f8" title="NTP Server name.">NTP_Server</a>));
        memcpypgm2ram(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a70e871f8c8a200e0f5888f56f48e19f8" title="NTP Server name.">NTP_Server</a>, (ROM <span class="keywordtype">void</span>*)<span class="stringliteral">&quot;pool.ntp.org&quot;</span>, 12);
        <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#aece9a02d06221a468e469a45e371be01" title="Use AES encryption on the user feild in the xPL message.">Use_AES</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;


        <span class="comment">// Email</span>
        memset(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8156a5ee6327dc7845895b0fa515526a" title="POP3 server.">SMTP_Server</a>,<span class="charliteral">&#39;\0&#39;</span>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8156a5ee6327dc7845895b0fa515526a" title="POP3 server.">SMTP_Server</a>));
        memset(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8778223aa7dbf70c6bb0b0be39cb85c1" title="Email address to send messages to.">SMTP_To</a>,<span class="charliteral">&#39;\0&#39;</span>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8778223aa7dbf70c6bb0b0be39cb85c1" title="Email address to send messages to.">SMTP_To</a>));
        memset(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a40dc641766a810ac5d18938b37dd994a" title="POP3 User name.">SMTP_User</a>,<span class="charliteral">&#39;\0&#39;</span>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a40dc641766a810ac5d18938b37dd994a" title="POP3 User name.">SMTP_User</a>));
        memset(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a4277070293a247ee4fde233694fb45df" title="POP3 Password.">SMTP_Password</a>,<span class="charliteral">&#39;\0&#39;</span>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a4277070293a247ee4fde233694fb45df" title="POP3 Password.">SMTP_Password</a>));
        <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#aee37c1d00389d706372a278f1d768ba9" title="Port number.">SMTP_Port</a> = 21;
        <span class="comment">//xPLConfig.SMTP_UseSSL = FALSE;</span>
        <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#ad7a2f7ae853ee440f60271813c6d6916" title="Disable emails.">SMTP_Active</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
        <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a01d912d78612ae09e83da0487f415069" title="Send emails on all arm and disarm events.">SMTP_ArmDisarm</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
        <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8beaa9013aba813e75cdea886e6636d8" title="Only send emails on the inital alarm.">SMTP_OnlyInitalAlarm</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;



} <span class="comment">//LoadDefaultConfig</span>
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_aa38cdab46c967118f0f383312f150cce_icgraph.svg" width="675" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1e04428a714d6c8c97cb8685f96933ee"></a><!-- doxytag: member="SecuritySystem.c::Panic" ref="a1e04428a714d6c8c97cb8685f96933ee" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Panic </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function Panic PreCondition: None Side Effects: IO lines and state Overview: Buts the alarm into the panic state and sends xPL message </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l01249">1249</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="_security_x_p_l_sender_8c_source.html#l00017">addxPLMessage()</a>, <a class="el" href="_security_system_8h_source.html#l00111">Alarming</a>, <a class="el" href="_security_system_8h_source.html#l00206">xPLConfigs::AlarmingDuration</a>, <a class="el" href="_security_system_8c_source.html#l00029">AlarmingTimer</a>, <a class="el" href="_security_system_8c_source.html#l00017">AlarmState</a>, <a class="el" href="_security_system_8c_source.html#l00021">EntryTimer</a>, <a class="el" href="_security_system_8c_source.html#l00025">ExitTimer</a>, <a class="el" href="_hardware_profile_8h_source.html#l00070">INT_SIREN_IO</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_security_system_8h_source.html#l00209">xPLConfigs::SirenDelay</a>, <a class="el" href="_security_system_8c_source.html#l00031">SirenTimer</a>, <a class="el" href="_hardware_profile_8h_source.html#l00074">STROBE_IO</a>, and <a class="el" href="_security_system_8h_source.html#l00238">TB_Panic</a>.</p>

<p>Referenced by <a class="el" href="_h_t_t_p_forms_8c_source.html#l00028">HTTPExecuteGet()</a>, and <a class="el" href="_security_system_8c_source.html#l01642">SchemaProcessUDPMsg()</a>.</p>
<div class="fragment"><pre class="fragment">                  {


<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;PANIC\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        <span class="comment">// set off the alarm</span>
        <span class="comment">//Ensure entry and exit timers are cleared</span>
        <a class="code" href="_security_system_8c.html#afdcc9abdceb871043a45617d58de2057" title="Zone Entery timer.">EntryTimer</a> = 0;
        <a class="code" href="_security_system_8c.html#a8434e29b41874d33c95b3f339bd2bcdf" title="Exit timer - 0 means off.">ExitTimer</a> = 0;

        <span class="comment">// Start the strobe and internal siren</span>
        <a class="code" href="_hardware_profile_8h.html#a5721d9a420c592eb0b6d9e334eb84767">STROBE_IO</a> = 1;
        <a class="code" href="_hardware_profile_8h.html#a3d6972b809d9a8aa775020159fa48094">INT_SIREN_IO</a> = 1;
        <a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> = <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfaa92b7a267bbc04bd0510d28db78210ed">Alarming</a>;
        <a class="code" href="_security_system_8c.html#a207ce3b4724e48dd35dded40a44e14a8" title="Times the delay before acivating the external siren.">SirenTimer</a> = TickGet() + (TICK_SECOND * <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a7d1d439ccc753cb0aaead9e23702e87b" title="Number of seconds before the external siren is activated.">SirenDelay</a>); <span class="comment">//check to see if external siren should be activated</span>
        <a class="code" href="_security_system_8c.html#aa8ef5dfe0e57cb90dddff51dd7ec664a" title="Times how long the alarm will sound for.">AlarmingTimer</a> =  TickGet() + (TICK_SECOND * <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a459109edd9f494275b72d6158714eda2" title="Number of seconds that the alarm will ring for.">AlarmingDuration</a>);

        <span class="comment">// Send the alarming message</span>
        
        <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a>(<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38debaec54c751a669111ac9d7ecc2be16f2b0">TB_Panic</a>);
} <span class="comment">// Panic</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_a1e04428a714d6c8c97cb8685f96933ee_cgraph.svg" width="635" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_a1e04428a714d6c8c97cb8685f96933ee_icgraph.svg" width="1091" height="126" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aea89a2e5b007623f49cb6117afc947ec"></a><!-- doxytag: member="SecuritySystem.c::SchemaInit" ref="aea89a2e5b007623f49cb6117afc947ec" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL SchemaInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function: SchemaInit PreCondition: UDP initalised, XPL initalised Side Effects: None Overview: General initalisiation procedure for any xPL schema(s). Set inital variables and system state after startup. Assumes TCIP is available and xPL configured. Returns FALSE if the default config options were loaded</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>BOOL, is the device configured </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00193">193</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="_security_system_8c_source.html#l00017">AlarmState</a>, <a class="el" href="_hardware_profile_8h_source.html#l00120">AN2_TRIS</a>, <a class="el" href="_hardware_profile_8h_source.html#l00121">AN3_TRIS</a>, <a class="el" href="_hardware_profile_8h_source.html#l00122">AN4_TRIS</a>, <a class="el" href="_main_demo_8c_source.html#l00030">AppConfig</a>, <a class="el" href="_security_system_8h_source.html#l00008">AREACOUNT</a>, <a class="el" href="_security_system_8h_source.html#l00100">Battery_Disconnected</a>, <a class="el" href="_battery_8c_source.html#l00026">BatteryState</a>, <a class="el" href="x_p_l_8h_source.html#l00006">BOOL</a>, <a class="el" href="_security_system_8h_source.html#l00179">ZoneConfigs::BounceDelay</a>, <a class="el" href="_security_system_8h_source.html#l00273">xPLTaskLists::CurentTask</a>, <a class="el" href="_security_system_8h_source.html#l00310">SMTPTaskLists::CurentTask</a>, <a class="el" href="_security_system_8h_source.html#l00012">DEVICEDESCLENGTH</a>, <a class="el" href="_security_system_8h_source.html#l00110">Disarmed</a>, <a class="el" href="_custom_s_n_t_p_8c_source.html#l00134">dwLastUpdateTick</a>, <a class="el" href="_security_system_8h_source.html#l00042">EEDATASTART_AREA</a>, <a class="el" href="_main_demo_8c_source.html#l00025">EEDATASTART_CONFIG</a>, <a class="el" href="_security_system_8h_source.html#l00044">EEDATASTART_DEVICEDESC</a>, <a class="el" href="_security_system_8h_source.html#l00045">EEDATASTART_MPFS</a>, <a class="el" href="_security_system_8h_source.html#l00043">EEDATASTART_USER</a>, <a class="el" href="_security_system_8h_source.html#l00040">EEDATASTART_XPL</a>, <a class="el" href="_security_system_8h_source.html#l00041">EEDATASTART_ZONE</a>, <a class="el" href="_security_system_8c_source.html#l00021">EntryTimer</a>, <a class="el" href="_security_system_8c_source.html#l00025">ExitTimer</a>, <a class="el" href="_hardware_profile_8h_source.html#l00072">EXT_SIREN_IO</a>, <a class="el" href="_hardware_profile_8h_source.html#l00071">EXT_SIREN_TRIS</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8h_source.html#l00274">xPLTaskLists::FreePosition</a>, <a class="el" href="_security_system_8h_source.html#l00311">SMTPTaskLists::FreePosition</a>, <a class="el" href="_security_system_8h_source.html#l00276">xPLTaskLists::GatewayChangedTimer</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_hardware_profile_8h_source.html#l00070">INT_SIREN_IO</a>, <a class="el" href="_hardware_profile_8h_source.html#l00069">INT_SIREN_TRIS</a>, <a class="el" href="_security_system_8h_source.html#l00190">AreaConfigs::IsAlarmed</a>, <a class="el" href="_security_system_8h_source.html#l00172">ZoneConfigs::IsAlarmed</a>, <a class="el" href="_security_system_8h_source.html#l00189">AreaConfigs::IsArmed</a>, <a class="el" href="_security_system_8h_source.html#l00171">ZoneConfigs::IsArmed</a>, <a class="el" href="_security_system_8h_source.html#l00191">AreaConfigs::IsChangeFlagged</a>, <a class="el" href="_security_system_8h_source.html#l00173">ZoneConfigs::IsChangeFlagged</a>, <a class="el" href="_security_system_8h_source.html#l00187">AreaConfigs::IsIsolated</a>, <a class="el" href="_security_system_8h_source.html#l00169">ZoneConfigs::IsIsolated</a>, <a class="el" href="_security_system_8h_source.html#l00192">AreaConfigs::IsTampered</a>, <a class="el" href="_security_system_8h_source.html#l00174">ZoneConfigs::IsTampered</a>, <a class="el" href="_security_system_8h_source.html#l00186">AreaConfigs::IsTriggered</a>, <a class="el" href="_security_system_8h_source.html#l00166">ZoneConfigs::IsTriggered</a>, <a class="el" href="_security_system_8c_source.html#l00039">LastZoneAlarmed</a>, <a class="el" href="_security_system_8c_source.html#l00433">LoadDefaultConfig()</a>, <a class="el" href="_security_system_8c_source.html#l00027">NextZoneCheckDelay</a>, <a class="el" href="_security_system_8h_source.html#l00062">NTP_TEST_DONE</a>, <a class="el" href="_custom_s_n_t_p_8c_source.html#l00137">NTPTestResponse</a>, <a class="el" href="_hardware_profile_8h_source.html#l00086">PLEXERA_0_IO</a>, <a class="el" href="_hardware_profile_8h_source.html#l00085">PLEXERA_0_TRIS</a>, <a class="el" href="_hardware_profile_8h_source.html#l00084">PLEXERA_1_IO</a>, <a class="el" href="_hardware_profile_8h_source.html#l00083">PLEXERA_1_TRIS</a>, <a class="el" href="_hardware_profile_8h_source.html#l00082">PLEXERA_2_IO</a>, <a class="el" href="_hardware_profile_8h_source.html#l00081">PLEXERA_2_TRIS</a>, <a class="el" href="_hardware_profile_8h_source.html#l00079">PLEXERA_S_TRIS</a>, <a class="el" href="_security_system_8c_source.html#l00019">PreviousAlarmState</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_hardware_profile_8h_source.html#l00201">putsUART</a>, <a class="el" href="_authenticate_8c_source.html#l00017">RejectedPassword</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00360">SendGatewayReady()</a>, <a class="el" href="_hardware_profile_8h_source.html#l00076">SLA_CHARGER_IO</a>, <a class="el" href="_hardware_profile_8h_source.html#l00075">SLA_CHARGER_TRIS</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00030">SMPTTestResult</a>, <a class="el" href="_security_system_8h_source.html#l00217">xPLConfigs::SMTP_Active</a>, <a class="el" href="_security_system_8h_source.html#l00291">SMTP_Reset</a>, <a class="el" href="_security_system_8h_source.html#l00304">SMTPTaskStack::SMTP_SendType</a>, <a class="el" href="_security_system_8h_source.html#l00299">SMTP_SM_Done</a>, <a class="el" href="_security_system_8h_source.html#l00297">SMTP_SM_InQ</a>, <a class="el" href="_security_system_8h_source.html#l00305">SMTPTaskStack::SMTP_State</a>, <a class="el" href="_security_system_8h_source.html#l00287">SMTP_Test</a>, <a class="el" href="_security_system_8h_source.html#l00060">SMTP_TEST_DONE</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00613">SMTPQueueEmail()</a>, <a class="el" href="_security_system_8h_source.html#l00057">SMTPSMSIZE</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00027">SMTPTaskList</a>, <a class="el" href="_hardware_profile_8h_source.html#l00074">STROBE_IO</a>, <a class="el" href="_hardware_profile_8h_source.html#l00073">STROBE_TRIS</a>, <a class="el" href="_hardware_profile_8h_source.html#l00116">SUPPLY_ACTIVE_TRIS</a>, <a class="el" href="_security_system_8h_source.html#l00312">SMTPTaskLists::Task</a>, <a class="el" href="_security_system_8c_source.html#l00023">TriggeredEntryZone</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="_security_system_8h_source.html#l00011">USERCOUNT</a>, <a class="el" href="_security_system_8h_source.html#l00009">USERNAMELENGTH</a>, <a class="el" href="_security_system_8h_source.html#l00010">USERPASSLENGTH</a>, <a class="el" href="x_p_l_8c_source.html#l00157">xPLLoadEEConfig()</a>, <a class="el" href="x_p_l_8h_source.html#l00020">ZONECHECKDELAY</a>, and <a class="el" href="_security_system_8h_source.html#l00007">ZONECOUNT</a>.</p>

<p>Referenced by <a class="el" href="x_p_l_8c_source.html#l00109">xPLInit()</a>.</p>
<div class="fragment"><pre class="fragment">                       {

        <a class="code" href="x_p_l_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a> ReturnResult = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
        <span class="keywordtype">char</span> TempVal[4];
        BYTE * ptr;


        <span class="comment">//Load configuration data</span>
        <span class="keywordflow">if</span> (<a class="code" href="x_p_l_8c.html#a31c1c8faace74e23f37a03b7292f7981">xPLLoadEEConfig</a>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>, <a class="code" href="_security_system_8h.html#a84d6a5346b04effd1160f34d13abd01c">EEDATASTART_ZONE</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>)) == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) {
                <span class="comment">//EE data incorrect</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; # NOTE# ZoneConfig Loaded default Security Settings\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                ReturnResult = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
        }


        <span class="keywordflow">if</span> (<a class="code" href="x_p_l_8c.html#a31c1c8faace74e23f37a03b7292f7981">xPLLoadEEConfig</a>(&amp;<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>, <a class="code" href="_security_system_8h.html#ae33a92f4e46c1d70d59e71bd1eecc209">EEDATASTART_XPL</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>)) == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) {
                <span class="comment">//EE data incorrect</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; # NOTE# xPLConfig Loaded default Security Settings\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                ReturnResult = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
        }


        <span class="keywordflow">if</span> (<a class="code" href="x_p_l_8c.html#a31c1c8faace74e23f37a03b7292f7981">xPLLoadEEConfig</a>(<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>, <a class="code" href="_security_system_8h.html#a61748f301d79db0c4ecb09432705d105">EEDATASTART_AREA</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>)) == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) {
                <span class="comment">//EE data incorrect</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; # NOTE# AreaConfig Loaded default Security Settings\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                ReturnResult = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
        }

        <span class="keywordflow">if</span> (ReturnResult == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) <a class="code" href="_security_system_8c.html#aa38cdab46c967118f0f383312f150cce">LoadDefaultConfig</a>();

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>
        ultoa ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) <span class="keyword">sizeof</span>(<a class="code" href="_main_demo_8c.html#a67540808395519081be1333c4e9aa1f8">AppConfig</a>), TempVal);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;IP AppConfig  size: &quot;</span>);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(TempVal);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; EEStarts:&quot;</span>);
        ultoa ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) <a class="code" href="_main_demo_8c.html#a91b87b60e38a5f2cad2d0725a1ae6306">EEDATASTART_CONFIG</a>, TempVal);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(TempVal);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; EESize: &quot;</span>);
        ultoa ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) <a class="code" href="_security_system_8h.html#ae33a92f4e46c1d70d59e71bd1eecc209">EEDATASTART_XPL</a> - (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="_main_demo_8c.html#a91b87b60e38a5f2cad2d0725a1ae6306">EEDATASTART_CONFIG</a>, TempVal);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(TempVal);

        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);

        ultoa ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>), TempVal);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Security Schema xPLConfig size: &quot;</span>);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(TempVal);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; EEStarts:&quot;</span>);
        ultoa ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) <a class="code" href="_security_system_8h.html#ae33a92f4e46c1d70d59e71bd1eecc209">EEDATASTART_XPL</a>, TempVal);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(TempVal);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; EESize: &quot;</span>);
        ultoa ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) <a class="code" href="_security_system_8h.html#a84d6a5346b04effd1160f34d13abd01c">EEDATASTART_ZONE</a> - (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="_security_system_8h.html#ae33a92f4e46c1d70d59e71bd1eecc209">EEDATASTART_XPL</a>, TempVal);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(TempVal);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);

        ultoa ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>), TempVal);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Security Schema ZoneConfig size: &quot;</span>);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(TempVal);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; EEStarts:&quot;</span>);
        ultoa ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) <a class="code" href="_security_system_8h.html#a84d6a5346b04effd1160f34d13abd01c">EEDATASTART_ZONE</a>, TempVal);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(TempVal);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; EESize: &quot;</span>);
        ultoa ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) <a class="code" href="_security_system_8h.html#a61748f301d79db0c4ecb09432705d105">EEDATASTART_AREA</a> - (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="_security_system_8h.html#a84d6a5346b04effd1160f34d13abd01c">EEDATASTART_ZONE</a>, TempVal);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(TempVal);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);

        ultoa ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>), TempVal);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Security Schema AreaConfig size: &quot;</span>);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(TempVal);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; EEStarts:&quot;</span>);
        ultoa ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) <a class="code" href="_security_system_8h.html#a61748f301d79db0c4ecb09432705d105">EEDATASTART_AREA</a>, TempVal);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(TempVal);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; EESize: &quot;</span>);
        ultoa ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) <a class="code" href="_security_system_8h.html#a1d0791661020cc7057f1ed794a848f20">EEDATASTART_USER</a> - (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="_security_system_8h.html#a61748f301d79db0c4ecb09432705d105">EEDATASTART_AREA</a>, TempVal);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(TempVal);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);


        ultoa ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) <a class="code" href="_security_system_8h.html#a330ed48a0698997047c61969a5245074">USERCOUNT</a> * (<a class="code" href="_security_system_8h.html#ab2d5f95a4974c4f332df9f6a41022219">USERNAMELENGTH</a> + <a class="code" href="_security_system_8h.html#abbe086a1e768641e6894ec5116a52ae9">USERPASSLENGTH</a>) , TempVal);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;User size: &quot;</span>);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(TempVal);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; EEStarts:&quot;</span>);
        ultoa ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) <a class="code" href="_security_system_8h.html#a1d0791661020cc7057f1ed794a848f20">EEDATASTART_USER</a>, TempVal);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(TempVal);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; EESize: &quot;</span>);
        ultoa ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) <a class="code" href="_security_system_8h.html#aa099c08420f2e838607142a7edaa8aa8">EEDATASTART_DEVICEDESC</a> - (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="_security_system_8h.html#a1d0791661020cc7057f1ed794a848f20">EEDATASTART_USER</a>, TempVal);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(TempVal);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);


        ultoa ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) <a class="code" href="_security_system_8h.html#a61145d9f711460b73af75ef123fc76f6">DEVICEDESCLENGTH</a> * (<a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a> + <a class="code" href="_security_system_8h.html#af9feef5e257517789486c320b17e82bd">AREACOUNT</a>) , TempVal);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Device desc size: &quot;</span>);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(TempVal);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; EEStarts:&quot;</span>);
        ultoa ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) <a class="code" href="_security_system_8h.html#aa099c08420f2e838607142a7edaa8aa8">EEDATASTART_DEVICEDESC</a>, TempVal);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(TempVal);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; EESize: &quot;</span>);
        ultoa ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) <a class="code" href="_security_system_8h.html#a2ca5533dbf2ad86bca9710ea55ff6177">EEDATASTART_MPFS</a> - (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="_security_system_8h.html#aa099c08420f2e838607142a7edaa8aa8">EEDATASTART_DEVICEDESC</a>, TempVal);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(TempVal);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);


        <span class="comment">//EEDATASTART_MPFS</span>



<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

        <span class="comment">//Clear timers</span>
        <a class="code" href="_security_system_8c.html#afdcc9abdceb871043a45617d58de2057" title="Zone Entery timer.">EntryTimer</a> = 0;
        <a class="code" href="_security_system_8c.html#a151f460a0544a0b747a38efae4124e24" title="Triggered Entery Zone that set off the timer.">TriggeredEntryZone</a> = 0;
        <a class="code" href="_security_system_8c.html#a8434e29b41874d33c95b3f339bd2bcdf" title="Exit timer - 0 means off.">ExitTimer</a> = 0;
        <a class="code" href="_security_system_8c.html#a23978f149ac907eb92db7176cbf9fec3" title="Delay used so we are not always checking the status of the zones.">NextZoneCheckDelay</a> = TickGet() + (TICK_SECOND / <a class="code" href="x_p_l_8h.html#a595e2cc97368633df0a707e6fcb8e8ff">ZONECHECKDELAY</a>);
        <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#a48445b8ac06ecea79af8a778d3a7f6cc" title="Provides a delay in sending the xPL gateway changed message.">GatewayChangedTimer</a> = 0;
        <a class="code" href="_custom_s_n_t_p_8c.html#a134d28a3f8166df7163955525f14b25d" title="Tick count of last update.">dwLastUpdateTick</a> =0;


        <span class="comment">//Set initial alarm state, arming delay and previous arm state</span>
        <a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> = <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfacf99f746f17e92913d15be9fc92d708c">Disarmed</a>;
        <a class="code" href="_security_system_8c.html#a47fd0ffa1fbd1faa655f15085dc0d801" title="The previous state of the alarm system, used when state change fails.">PreviousAlarmState</a> = <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfacf99f746f17e92913d15be9fc92d708c">Disarmed</a>;
        <a class="code" href="_security_system_8c.html#ab4811cda05bf084486e0e786e68498ea" title="The last zone to change to alarmed state. used in SMTP.c.">LastZoneAlarmed</a> = 0;
        <a class="code" href="_battery_8c.html#a35b967426a12072affebab82da722ef3" title="Keeps track of the battery state.">BatteryState</a> = <a class="code" href="_security_system_8h.html#a462bad824ca26348ba295528d4a61f23acb436c94851aca2c06d4934c15ff3217">Battery_Disconnected</a>;
        memset(<a class="code" href="_authenticate_8c.html#a3b83b71efc87ba66b8d8311363b4296e" title="Tracks that last password that was rejected, useful when adding RFID tags.">RejectedPassword</a>, <span class="charliteral">&#39;\0&#39;</span>, <a class="code" href="_security_system_8h.html#abbe086a1e768641e6894ec5116a52ae9">USERPASSLENGTH</a>);
        <a class="code" href="_custom_s_n_t_p_8c.html#a6fec3fdfff459a953822db2e8ff9b462" title="stores the response from a SNTP test">NTPTestResponse</a> = <a class="code" href="_security_system_8h.html#a2ea42e00e0151b35178b5ddac534e048">NTP_TEST_DONE</a>; <span class="comment">// result of NTP test</span>

        <span class="comment">//initalise hardware</span>
        <span class="comment">// outputs</span>
        <a class="code" href="_hardware_profile_8h.html#a53e83de890cfbefdb186dd3f89204cc8">STROBE_TRIS</a> = 0;
        <a class="code" href="_hardware_profile_8h.html#a5721d9a420c592eb0b6d9e334eb84767">STROBE_IO</a> = 0;
        <a class="code" href="_hardware_profile_8h.html#a1de3b2d905a4123a67f30b48b3aadb8a">EXT_SIREN_TRIS</a> = 0;
        <a class="code" href="_hardware_profile_8h.html#a753ae1d13e216a920d733f2f842b5509">EXT_SIREN_IO</a> = 0;
        <a class="code" href="_hardware_profile_8h.html#a5f390fa21fc9e7db96c82a8eb6f15eb9">INT_SIREN_TRIS</a> = 0;
        <a class="code" href="_hardware_profile_8h.html#a3d6972b809d9a8aa775020159fa48094">INT_SIREN_IO</a> = 0;
        <a class="code" href="_hardware_profile_8h.html#aeed96c8ba9ee95a5900ce0e67378ce1b">SLA_CHARGER_TRIS</a> = 0;
        <a class="code" href="_hardware_profile_8h.html#a6aea9cfdc4ca8f236fb56fdd5107e740">SLA_CHARGER_IO</a> = 0;

        <span class="comment">// Analogue Demulplexer</span>
        <a class="code" href="_hardware_profile_8h.html#a6d15d3b5f5f340715e34c1d17884226c">PLEXERA_0_TRIS</a> = 0;
        <a class="code" href="_hardware_profile_8h.html#a63d60709b85d89fd5aa5ccef66c78712">PLEXERA_1_TRIS</a> = 0;
        <a class="code" href="_hardware_profile_8h.html#a4d3536f6ac1b0db55474d99fc33a91a8">PLEXERA_2_TRIS</a> = 0;
        <a class="code" href="_hardware_profile_8h.html#ad6637472ecf05d7fa457a91163c4adf9">PLEXERA_S_TRIS</a> = 0;

        <a class="code" href="_hardware_profile_8h.html#ad240303934714b68c211983564279b6e">PLEXERA_0_IO</a> = 0;
        <a class="code" href="_hardware_profile_8h.html#ae9fc28adb8ff12e4031c2d60ff4a3fed">PLEXERA_1_IO</a> = 0;
        <a class="code" href="_hardware_profile_8h.html#aa547ab8a4ada6918d048ff9723123699">PLEXERA_2_IO</a> = 0;


        <span class="comment">//inputs</span>
        <a class="code" href="_hardware_profile_8h.html#af1b2b18d76e428686609efff0028943c">SUPPLY_ACTIVE_TRIS</a> = 1;



        <span class="comment">// SMTP state machine, send out an email stating device has been restarted</span>

        <a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#ab9904ec94e50af81ee513e8b34173db0" title="Task number being processed by the stack at the moment.">CurentTask</a> = 0;
        <a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#a252586a850ff6e288645a8a42adb50a6" title="Task number that is free to create a new task in.">FreePosition</a> = 1;
        <a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#af739e294f161d72b2129fc97ff54555a" title="an array of the tasks, see SMTPTaskStack">Task</a>[0].<a class="code" href="struct_s_m_t_p_task_stack.html#ad7d5f9f143e2b81309862ac4e9375751" title="Type of email to be sent.">SMTP_SendType</a> = <a class="code" href="_security_system_8h.html#adf08ba7d4e8e4395881e05cb2fabde71aee6aa005c1fc5d9f46f5aca5dd3660bc">SMTP_Reset</a>;
        <a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#af739e294f161d72b2129fc97ff54555a" title="an array of the tasks, see SMTPTaskStack">Task</a>[0].<a class="code" href="struct_s_m_t_p_task_stack.html#a79e69c016dcf680ccb574f0c9c88ed31" title="Current state of the task (State Machine)">SMTP_State</a> = <a class="code" href="_security_system_8h.html#abb997235328abd40ef9f7185debb4e3ba51e3f81d22665d7ef84b971a484335bf">SMTP_SM_InQ</a>;
        <a class="code" href="_security_system_8h.html#a9cbd255a539aaee43372b00cbc47498e" title="used for testing email">SMPTTestResult</a> = <a class="code" href="_security_system_8h.html#a9b173d9d938f8987dbfbcbc284e1f3d1">SMTP_TEST_DONE</a>;

        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 1; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#a3d9716c1403629a6282a6ad8a7300326">SMTPSMSIZE</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                <a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#af739e294f161d72b2129fc97ff54555a" title="an array of the tasks, see SMTPTaskStack">Task</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_s_m_t_p_task_stack.html#ad7d5f9f143e2b81309862ac4e9375751" title="Type of email to be sent.">SMTP_SendType</a> = <a class="code" href="_security_system_8h.html#adf08ba7d4e8e4395881e05cb2fabde71ab3c9d4bf0dca93207eab351655af17df">SMTP_Test</a>;
                <a class="code" href="_security_system_8h.html#a4a27286a5cf26257930ac713fbd78b3b" title="State machine for sending out emails.">SMTPTaskList</a>.<a class="code" href="struct_s_m_t_p_task_lists.html#af739e294f161d72b2129fc97ff54555a" title="an array of the tasks, see SMTPTaskStack">Task</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_s_m_t_p_task_stack.html#a79e69c016dcf680ccb574f0c9c88ed31" title="Current state of the task (State Machine)">SMTP_State</a> = <a class="code" href="_security_system_8h.html#abb997235328abd40ef9f7185debb4e3ba3da8cf88892b271e88d8defa9dff74c1">SMTP_SM_Done</a>;
        }

        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#a9dca0cb314a3d8a1cb83a2b474296cce" title="If the zone in a triggered state.">IsTriggered</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#abd82b1c153a91f2827b0bec6eee7ad7b" title="Is Zone Armed.">IsArmed</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#a1053e4f4ba65f6a78cfd3b179c46eaaa" title="Did the zone cause the alarm to go off.">IsAlarmed</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#a3060ff1a56645c2b505274a4dd455582" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#ad96ab4189da090b75417a4705b3c092b" title="Timer for reducing impact of a bouncing IO lines.">BounceDelay</a> = 0;
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#a71861cd65add7649dffdc7f99c57595c" title="Is the zone in a tampered state.">IsTampered</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#a0fcb99621e1f25f5b6c07b71ab6a4266" title="Is zone isolated.">IsIsolated</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;  <span class="comment">// should not continue state after a restart</span>
        } <span class="comment">// for</span>

        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#af9feef5e257517789486c320b17e82bd">AREACOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_area_configs.html#a4b3904923f06e20608888f1d3ad4ac08" title="Is the Area triggered.">IsTriggered</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_area_configs.html#a87176e7c401e0d23559f04abab98a3fc" title="Is area Armed.">IsArmed</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_area_configs.html#a8caed50b4c827a114fceba5e95d4a377" title="Did a zone in this area cause the alarm to go off.">IsAlarmed</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_area_configs.html#a711da45ad4b0c06e1aaee9d2ba6108aa" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_area_configs.html#a89339700ce4076bbf66e8efd9803c393" title="Is area isolated.">IsIsolated</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>; <span class="comment">// should not continue state after a restart</span>
                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_area_configs.html#ad6fce28b6a7036035b3a51d4d25df694" title="Has a zone in this area been tampered.">IsTampered</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
        } <span class="comment">//for</span>

        <span class="comment">// xPL task buffer</span>
        <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#a15bcecd7cf38b7e1a6da604b9f96893b" title="Task number that is free to create a new task in.">FreePosition</a> = 0;
        <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#abbf0faf76076ff68cafd60bd0e082055" title="End up being the last task that was processed.">CurentTask</a> =0;

        <span class="comment">// Set the TRIS flags to input for all of the A/D pins, page 331 chapter 21.0 of data sheet</span>
        <a class="code" href="_hardware_profile_8h.html#abb17eaaadd6437f64cb20506d50a41ad">AN2_TRIS</a> = 1;
        <a class="code" href="_hardware_profile_8h.html#a4cb9bcd7a69970fc25ceff5ad7b6c5a3">AN3_TRIS</a> = 1;
        <a class="code" href="_hardware_profile_8h.html#a0efd8703575b6127cc852d23c8657084">AN4_TRIS</a> = 1;

        <span class="comment">// Setup the A/D channels, page 329 of data sheet</span>
        ADCON0 = 0b00001001;    <span class="comment">// ADON = On(1), GO/DONE = Idle (0), AN1 selected (1000)</span>
        ADCON1 = 0b00001010;    <span class="comment">// upto AN4 enabled (1010), VCFG0 (Voltage ref) = Vdd/Vss (00)</span>
        ADCON2 = 0b10111110;    <span class="comment">// Fosc/64 (~21.0kHz) (110), 20TAD acquisition time (111), Right justify (0)</span>

        <span class="comment">// Do a calibration A/D conversion</span>
        ADCON0bits.ADCAL = 1;
    ADCON0bits.GO = 1;
        <span class="keywordflow">while</span>(ADCON0bits.GO);
        ADCON0bits.ADCAL = 0;



        <span class="comment">//Queue reset email</span>
        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#ad7a2f7ae853ee440f60271813c6d6916" title="Disable emails.">SMTP_Active</a> == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)
                <a class="code" href="_security_system_8h.html#ae777555850cf9c897f46c8407ce1729f" title="Places a new email in the SMTP queue to be processed (sent)">SMTPQueueEmail</a> (<a class="code" href="_security_system_8h.html#adf08ba7d4e8e4395881e05cb2fabde71aee6aa005c1fc5d9f46f5aca5dd3660bc">SMTP_Reset</a>);

        <span class="comment">//Send gateway message</span>
        <a class="code" href="_security_x_p_l_sender_8c.html#ad811bd225b593df01e168e1bb0967713">SendGatewayReady</a>();

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Security Schema initalised, Gateway message sent.\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        <span class="keywordflow">return</span> ReturnResult;

}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_aea89a2e5b007623f49cb6117afc947ec_cgraph.svg" width="712" height="259" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_aea89a2e5b007623f49cb6117afc947ec_icgraph.svg" width="408" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3baecc6556e5cc7af0d59d0216aa217c"></a><!-- doxytag: member="SecuritySystem.c::SchemaProcessUDPMsg" ref="a3baecc6556e5cc7af0d59d0216aa217c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SchemaProcessUDPMsg </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function SchemaProcessUDPMsg PreCondition: None Side Effects: Changes Armed / arming flags Overview: Called by <a class="el" href="x_p_l_8c.html" title="xPL Framework">xPL.c</a> when ever a message is received. Here we determine what actions are needed in response to a message.</p>
<p>When changing the alarm state when there is no delay the arming timer is set to an expired value. This means the state change will not occur until the next task run occurs. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">Delay</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l01642">1642</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="_security_x_p_l_sender_8c_source.html#l00017">addxPLMessage()</a>, <a class="el" href="_security_system_8c_source.html#l00017">AlarmState</a>, <a class="el" href="_main_demo_8c_source.html#l00030">AppConfig</a>, <a class="el" href="_security_system_8c_source.html#l01122">Arm()</a>, <a class="el" href="_security_system_8c_source.html#l01192">ArmAway()</a>, <a class="el" href="_security_system_8c_source.html#l01162">ArmHome()</a>, <a class="el" href="_security_system_8c_source.html#l01220">ArmLatchkey()</a>, <a class="el" href="x_p_l_8h_source.html#l00006">BOOL</a>, <a class="el" href="x_p_l_8h_source.html#l00052">Class_Config</a>, <a class="el" href="x_p_l_8h_source.html#l00053">Class_Security</a>, <a class="el" href="_security_system_8c_source.html#l01091">ClearArmingFlags()</a>, <a class="el" href="_security_system_8c_source.html#l00083">Command_arm</a>, <a class="el" href="_security_system_8c_source.html#l00085">Command_armaway</a>, <a class="el" href="_security_system_8c_source.html#l00084">Command_armhome</a>, <a class="el" href="_security_system_8c_source.html#l00086">Command_armlatchkey</a>, <a class="el" href="_security_system_8c_source.html#l00090">Command_bypass</a>, <a class="el" href="_security_system_8c_source.html#l00087">Command_disarm</a>, <a class="el" href="_security_system_8c_source.html#l00091">Command_enable</a>, <a class="el" href="_security_system_8c_source.html#l00089">Command_isolate</a>, <a class="el" href="_security_system_8c_source.html#l00088">Command_panic</a>, <a class="el" href="_security_system_8c_source.html#l01938">Disarm()</a>, <a class="el" href="_security_system_8h_source.html#l00110">Disarmed</a>, <a class="el" href="_main_demo_8c_source.html#l00237">DisplayIPValue()</a>, <a class="el" href="_main_demo_8c_source.html#l00025">EEDATASTART_CONFIG</a>, <a class="el" href="_security_system_8h_source.html#l00040">EEDATASTART_XPL</a>, <a class="el" href="_security_system_8h_source.html#l00263">xPLTasks::ErrorMessage</a>, <a class="el" href="_security_system_8h_source.html#l00204">xPLConfigs::ExitDelay</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_security_system_8c_source.html#l01249">Panic()</a>, <a class="el" href="_hardware_profile_8h_source.html#l00203">putcUART</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_hardware_profile_8h_source.html#l00201">putsUART</a>, <a class="el" href="_security_system_8c_source.html#l00101">Request_areainfo</a>, <a class="el" href="_security_system_8c_source.html#l00099">Request_arealist</a>, <a class="el" href="_security_system_8c_source.html#l00104">Request_areastat</a>, <a class="el" href="_security_system_8c_source.html#l00097">Request_gateinfo</a>, <a class="el" href="_security_system_8c_source.html#l00102">Request_gatestat</a>, <a class="el" href="_security_system_8c_source.html#l00100">Request_zoneinfo</a>, <a class="el" href="_security_system_8c_source.html#l00098">Request_zonelist</a>, <a class="el" href="_security_system_8c_source.html#l00103">Request_zonestat</a>, <a class="el" href="x_p_l_8c_source.html#l00969">SaveKVP()</a>, <a class="el" href="_security_system_8c_source.html#l00068">SecurityCommandText</a>, <a class="el" href="_security_system_8c_source.html#l00109">SecurityRequestsText</a>, <a class="el" href="_security_system_8c_source.html#l01537">SetArming()</a>, <a class="el" href="_security_system_8h_source.html#l00277">xPLTaskLists::Task</a>, <a class="el" href="_security_system_8h_source.html#l00245">TB_Bypass</a>, <a class="el" href="_security_system_8h_source.html#l00246">TB_Enable</a>, <a class="el" href="_security_system_8h_source.html#l00244">TB_Isolate</a>, <a class="el" href="_security_system_8h_source.html#l00243">TB_SendAreaInfo</a>, <a class="el" href="_security_system_8h_source.html#l00241">TB_SendAreaList</a>, <a class="el" href="_security_system_8h_source.html#l00253">TB_SendAreaStat</a>, <a class="el" href="_security_system_8h_source.html#l00233">TB_SendConfigCurrent</a>, <a class="el" href="_security_system_8h_source.html#l00234">TB_SendConfigList</a>, <a class="el" href="_security_system_8h_source.html#l00251">TB_SendError</a>, <a class="el" href="_security_system_8h_source.html#l00252">TB_SendGateStat</a>, <a class="el" href="_security_system_8h_source.html#l00239">TB_SendGatewayInfo</a>, <a class="el" href="_security_system_8h_source.html#l00242">TB_SendZoneInfo</a>, <a class="el" href="_security_system_8h_source.html#l00240">TB_SendZoneList</a>, <a class="el" href="_security_system_8h_source.html#l00254">TB_SendZoneStat</a>, <a class="el" href="x_p_l_8h_source.html#l00080">To_Me</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00058">Type_Basic</a>, <a class="el" href="x_p_l_8h_source.html#l00063">Type_Current</a>, <a class="el" href="x_p_l_8h_source.html#l00059">Type_List</a>, <a class="el" href="x_p_l_8h_source.html#l00062">Type_Request</a>, <a class="el" href="x_p_l_8h_source.html#l00061">Type_Response</a>, <a class="el" href="_security_system_8c_source.html#l00037">UserID</a>, <a class="el" href="_security_system_8h_source.html#l00009">USERNAMELENGTH</a>, <a class="el" href="_security_system_8h_source.html#l00202">xPLConfigs::xPL_Heartbeat_Interval</a>, <a class="el" href="x_p_l_8h_source.html#l00089">xPLReceivedMessages::xPL_MsgDestination</a>, <a class="el" href="_security_system_8h_source.html#l00203">xPLConfigs::xPL_My_Instance_ID</a>, <a class="el" href="x_p_l_8h_source.html#l00090">xPLReceivedMessages::xPL_SchemaClass</a>, <a class="el" href="x_p_l_8h_source.html#l00091">xPLReceivedMessages::xPL_SchemaTypes</a>, <a class="el" href="_authenticate_8c_source.html#l00039">xPLAuthenticate()</a>, <a class="el" href="x_p_l_8c_source.html#l00938">xPLFindArrayInKVP()</a>, <a class="el" href="x_p_l_8c_source.html#l00014">xPLMsgKey</a>, <a class="el" href="x_p_l_8c_source.html#l00016">xPLMsgValue</a>, <a class="el" href="x_p_l_8c_source.html#l00083">xPLReceivedMessage</a>, and <a class="el" href="x_p_l_8c_source.html#l00194">xPLSaveEEConfig()</a>.</p>

<p>Referenced by <a class="el" href="x_p_l_8c_source.html#l00415">XPLProcessUDPMsg()</a>.</p>
<div class="fragment"><pre class="fragment">                                {

        <span class="keywordtype">int</span> <span class="keywordtype">short</span> TimeDelay = <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#ad7d66e7cbab58c033063b466e51e0f13" title="Number of seconds you have to exit from an entry/exit zone.">ExitDelay</a>;
        <span class="keywordtype">int</span> TheMessageType, xPLTaskID;

        <a class="code" href="x_p_l_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a> MessageIsCommand = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
        <a class="code" href="x_p_l_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a> MessageIsRequest = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;

        <span class="comment">// Ensure the message is directed to me and its of the security class</span>
        <span class="keywordflow">if</span> ((<a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#ab389803873f6bde1cdd2e89c436ac34c">xPL_MsgDestination</a> == <a class="code" href="x_p_l_8h.html#a8e8eafaa87afd5b6b2a4b1ffef4ff043a3f4644701fe4498e5659a493d4e8ef16">To_Me</a> ) &amp;&amp; (<a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#a59a980a83b46913e7f350229a3499710">xPL_SchemaClass</a> == <a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba044979f8b65ecedf0ca73e5ab66bd7ad">Class_Security</a>))  {

                <span class="comment">// clear out any left over flags</span>
                <a class="code" href="_security_system_8c.html#a491f8822a8274ca5244c41d226e7136e">ClearArmingFlags</a>();
                memset(<a class="code" href="_security_system_8c.html#af1c18f7532835833de15218c3aa5d146" title="Name of user.">UserID</a>,<span class="charliteral">&#39;\0&#39;</span>,<a class="code" href="_security_system_8h.html#ab2d5f95a4974c4f332df9f6a41022219">USERNAMELENGTH</a>);

                <span class="comment">// We have to process all of the message before we can act on it as the message could be out of order. Open standards are not always standard</span>
                <span class="keywordflow">while</span> (<a class="code" href="x_p_l_8c.html#a7c4561dc703960b7f5d24ec72ff34ba5">SaveKVP</a>(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>,<a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a> )) {

                        <span class="keywordflow">if</span> (memcmppgm2ram(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>, <span class="stringliteral">&quot;user&quot;</span>, 4)) {
                                <span class="keywordflow">if</span> (!<a class="code" href="_authenticate_8c.html#a207b19b2185ffaa19d1d3f053b996121">xPLAuthenticate</a>(<a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a>))
                                        <span class="keywordflow">return</span>;
                        }
                        <span class="keywordflow">if</span> (memcmppgm2ram(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>, (ROM <span class="keywordtype">void</span>*)<span class="stringliteral">&quot;area-list&quot;</span>,9)) <a class="code" href="_security_system_8c.html#a9b56fcd765dadf3ef1f50d01c51caf7b">SetArming</a>(<a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a>, <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);
                        <span class="keywordflow">if</span> (memcmppgm2ram(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>, (ROM <span class="keywordtype">void</span>*)<span class="stringliteral">&quot;zone-list&quot;</span>,9)) <a class="code" href="_security_system_8c.html#a9b56fcd765dadf3ef1f50d01c51caf7b">SetArming</a>(<a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
                        <span class="keywordflow">if</span> (memcmppgm2ram(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>, (ROM <span class="keywordtype">void</span>*)<span class="stringliteral">&quot;delay&quot;</span>,5))  {
                                <span class="comment">// Process delay value. If we receive text its might be the word &#39;default&#39;, either way we use the default value.</span>
                                <span class="keywordflow">if</span>( isdigit((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)<a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a>[0] ) ==0 )
                                        TimeDelay = <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#ad7d66e7cbab58c033063b466e51e0f13" title="Number of seconds you have to exit from an entry/exit zone.">ExitDelay</a>;
                                <span class="keywordflow">else</span>
                                        TimeDelay = atoi(xPLMsgValue);
                        }

                        <span class="keywordflow">if</span> (memcmppgm2ram(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>, <span class="stringliteral">&quot;command&quot;</span>,7)) {
                                <span class="keywordflow">if</span> (!<a class="code" href="x_p_l_8c.html#ace930888808081ff410b21e68caa146e">xPLFindArrayInKVP</a>(<a class="code" href="_security_system_8c.html#af91208010d91e259396c6c53d667fcba" title="Security command Types.">SecurityCommandText</a>, 8, &amp;TheMessageType, <a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#Note# command type not known\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                }
                                <span class="keywordflow">else</span> MessageIsCommand = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                        }
                        <span class="keywordflow">if</span> (memcmppgm2ram(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>, <span class="stringliteral">&quot;request&quot;</span>,7)) {
                                <span class="keywordflow">if</span> (!<a class="code" href="x_p_l_8c.html#ace930888808081ff410b21e68caa146e">xPLFindArrayInKVP</a>(<a class="code" href="_security_system_8c.html#a336f7f26b04a493c92ff0eae09249b04" title="xPL feild values for the different security requests">SecurityRequestsText</a>, 8, &amp;TheMessageType, <a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#Note# request type not known\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                }
                                <span class="keywordflow">else</span> MessageIsRequest = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                        }

                } <span class="comment">// while</span>


                <span class="comment">// ### Message Type BASIC</span>

                <span class="keywordflow">if</span> (<a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#acc1f47c8a31f619f2c3b15db4f95285f">xPL_SchemaTypes</a> == <a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a563aada2692fff4210fdcac659bae9cc">Type_Basic</a>) {

                        <span class="keywordflow">if</span> (MessageIsCommand) {

                                <span class="keywordflow">switch</span> (TheMessageType) {

                                        <span class="keywordflow">case</span> <a class="code" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08af953b4b23f7933bb7148f4fd2f4d9aae">Command_arm</a>: <span class="comment">// Arm, needs area list or zone list</span>
                                                <a class="code" href="_security_system_8c.html#a723bf79e9ca7924d850e5c2be4029b1c">Arm</a>(TimeDelay);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <a class="code" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08adfc5c835fcf7add63ec8e839ff2a846b">Command_armhome</a>:
                                                <a class="code" href="_security_system_8c.html#afba09fe6505822eb03078088f14ef89b">ArmHome</a>(TimeDelay);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <a class="code" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08a351cb1b3fde20dae93a5344814889737">Command_armaway</a>:
                                                <a class="code" href="_security_system_8c.html#af7b9ebfe6bb90725304e83cadb4cced8">ArmAway</a> (TimeDelay);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <a class="code" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08a8b95dc8b3febc1e51d0699702e30a137">Command_armlatchkey</a>:
                                                <a class="code" href="_security_system_8c.html#aad7b06369f4a1f3b427e137a9f84a5c0">ArmLatchkey</a> (TimeDelay);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <a class="code" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08a1ac06035919818d044954d9cf9d68dde">Command_disarm</a>:
                                                <span class="comment">// call Disarm and pass the userID</span>
                                                <a class="code" href="_security_system_8c.html#a3ca20943ab34a0d560cd22d88c0ba324">Disarm</a>();
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <a class="code" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08a45eadd60d4f065943c841d6a8682b5e4">Command_panic</a>:
                                                <a class="code" href="_security_system_8c.html#a1e04428a714d6c8c97cb8685f96933ee">Panic</a>();
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <a class="code" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08a945b5d03dcd30118efa772ec4ae14cf7">Command_isolate</a>:
                                                <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba50a9d18dd2121632a2d41890f9e0dcad">TB_Isolate</a>) ;
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <a class="code" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08a1756fe5c3e13e8988832985f8af899f6">Command_bypass</a>:
                                                <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba1a2f5c1ced4a7a6ef76d5a6e0ebf26f1">TB_Bypass</a>) ;
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <a class="code" href="_security_system_8c.html#aea3c10886080003d3d5a40b19f6f3c08a87c07783dd8ff733fda99725cfd1e5b0">Command_enable</a>:
                                                <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38debae35285ccd71be17edd6c76911642a84f">TB_Enable</a>) ;
                                                <span class="keywordflow">break</span>;

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                        <span class="keywordflow">default</span>:
                                                <span class="comment">// Something has gone wrong!</span>
                                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# Shit, something broke with Type_Basic when the message was received\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

                                } <span class="comment">// switch (TheMessageType)</span>
                        } <span class="comment">// MessageIsCommand</span>

                } <span class="comment">// xPLReceivedMessage.xPL_SchemaTypes == Type_Basic</span>


                <span class="comment">// ### Message Type REQUEST</span>

                <span class="keywordflow">if</span> (<a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#acc1f47c8a31f619f2c3b15db4f95285f">xPL_SchemaTypes</a> == <a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a12ea3a88f0bdd182c98dfc1ad5f68867">Type_Request</a>) {

                        <span class="keywordflow">if</span> (MessageIsRequest) {
                                <span class="keywordflow">switch</span> (TheMessageType) {

                                        <span class="keywordflow">case</span> <a class="code" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437a950bb9198ceed41b4fa58c52c4219202">Request_gateinfo</a>:
                                                <span class="comment">// Send gateway infomation</span>
                                                <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba3531a51bf0de6afa086227bd386757da">TB_SendGatewayInfo</a>) ;
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <a class="code" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437a56c4cda2eca98607416789e07fe098a1">Request_zonelist</a>:
                                                <span class="comment">// Send zone list</span>
                                                <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba4958f2b5966c8bd39b22f0059854cd65">TB_SendZoneList</a>) ;
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <a class="code" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437a7c2ab7bb2767342006fcf840b3922222">Request_arealist</a>:
                                                <span class="comment">// Send area list</span>
                                                <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38debadefe2c183f4cb0391d6a20a2a98abeb1">TB_SendAreaList</a> );
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <a class="code" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437a2f68f0ea36ad356dc59021f821a86650">Request_zoneinfo</a>:
                                                <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38debaa663ca6dd0a7b91286407c39174ad3c5">TB_SendZoneInfo</a> );
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <a class="code" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437a77686e4b463b992bbd2178fd7fa20ee0">Request_areainfo</a>:
                                                <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38debaa5ae73dc445f6834a30b88b5ec7741aa">TB_SendAreaInfo</a> );
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <a class="code" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437ae1cbf0a766db6406efa86b2daf1b00f4">Request_gatestat</a>:
                                                <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba481ff892e48385c5941818d48dfde8bf">TB_SendGateStat</a>);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <a class="code" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437a17510580ff47d74aad9501376c4011c6">Request_zonestat</a>:
                                                <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38debadae4078c6aaf8dab7f05974d72be0b84">TB_SendZoneStat</a>);
                                                <span class="keywordflow">break</span>;
                
                                        <span class="keywordflow">case</span> <a class="code" href="_security_system_8c.html#ae2ec37fa8ed9b3ea088b6d2706c86437a42f999a570bd973e9e119bee0ce3649b">Request_areastat</a>:
                                                <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba25a621bc1f223ff1e6ef8980a4103932">TB_SendAreaStat</a>);
                                                <span class="keywordflow">break</span>;

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                                <span class="keywordflow">default</span>:
                                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# Shit broken with Type_Request when msg rc&#39;d\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

                                } <span class="comment">//switch (TheMessageType)</span>
                        }<span class="comment">// MessageIsRequest</span>
                } <span class="comment">// xPLReceivedMessage.xPL_SchemaTypes == Type_Request</span>


        } <span class="comment">// To_Me &amp;&amp; Class_Security</span>



        <span class="comment">// #### Device Configuration ###</span>

        <span class="keywordflow">if</span> ((<a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#ab389803873f6bde1cdd2e89c436ac34c">xPL_MsgDestination</a> == <a class="code" href="x_p_l_8h.html#a8e8eafaa87afd5b6b2a4b1ffef4ff043a3f4644701fe4498e5659a493d4e8ef16">To_Me</a> ) &amp;&amp; (<a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#a59a980a83b46913e7f350229a3499710">xPL_SchemaClass</a> == <a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba14f0290b427ed1601cbd6b99072f4401">Class_Config</a>))  {

                <span class="keywordflow">if</span>(<a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> != <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfacf99f746f17e92913d15be9fc92d708c">Disarmed</a>) {
                        <span class="comment">//      Note: do not allowing config changes when not in the disarmed state. A restart would make the system disarmed and or remove</span>
                        <span class="comment">//      parts of the alarm which would be a security risk.</span>
                        xPLTaskID = <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38debade489309cf96b23ec7a59ab75f32e863">TB_SendError</a>);
                        <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[xPLTaskID].<a class="code" href="structx_p_l_tasks.html#a2c690f89f7d46cffb66d86187f378cb3" title="Error message passed to SendError.">ErrorMessage</a> = <span class="stringliteral">&quot;Must be disarmed to update config&quot;</span>;
                }
                <span class="keywordflow">else</span> {

                        <span class="keywordflow">if</span> (<a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#acc1f47c8a31f619f2c3b15db4f95285f">xPL_SchemaTypes</a> == <a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014adf15d91ef041bd13132e6c4fbfcced4f">Type_List</a>) 
                                <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a>(<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba62487ade0039ada8325f00b58a204929">TB_SendConfigList</a>);
                                
                        <span class="keywordflow">if</span> (<a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#acc1f47c8a31f619f2c3b15db4f95285f">xPL_SchemaTypes</a> == <a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a1168ef3342189eb73f687fbfefa5225c">Type_Current</a>) 
                                <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38debad4750e901f520114b30dc39d8d70a0a0">TB_SendConfigCurrent</a>);
                        
                        <span class="keywordflow">if</span> (<a class="code" href="x_p_l_8c.html#ab69d5f7e4e3491e1e18b41e2670ea7fe">xPLReceivedMessage</a>.<a class="code" href="structx_p_l_received_messages.html#acc1f47c8a31f619f2c3b15db4f95285f">xPL_SchemaTypes</a> == <a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014aed33e1220b37226b9c386d17cd8b8c6a">Type_Response</a>) {
                                <span class="keywordflow">while</span> (<a class="code" href="x_p_l_8c.html#a7c4561dc703960b7f5d24ec72ff34ba5">SaveKVP</a>(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>,<a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a> )) {

                                        <span class="comment">// Device name</span>
                                        <span class="keywordflow">if</span> (stricmppgm2ram(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>, (ROM <span class="keywordtype">char</span>*) <span class="stringliteral">&quot;newconf&quot;</span>) ==0) {

                                                <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> =0; <a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>] != <span class="charliteral">&#39;\0&#39;</span> &amp;&amp; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a9c46c7c2fe40ff45c5a12adb588bf4d5" title="xPL instance name of this device">xPL_My_Instance_ID</a>); <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                                                        <span class="keywordflow">if</span>(<a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>] &gt;= <span class="charliteral">&#39;A&#39;</span> &amp;&amp; <a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>] &lt;= <span class="charliteral">&#39;Z&#39;</span>)
                                                                <a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>] -= <span class="charliteral">&#39;A&#39;</span> - <span class="charliteral">&#39;a&#39;</span>; <span class="comment">//Convert to lower case</span>
                                                        <span class="keywordflow">if</span>((<a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>] &gt; <span class="charliteral">&#39;z&#39;</span>) || (<a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>] &lt; <span class="charliteral">&#39;0&#39;</span>))  <a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>]  = 0;
                                                }

                                                <span class="keywordflow">if</span> (<a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a>[0] != <span class="charliteral">&#39;\0&#39;</span>) {
                                                        strcpy( <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a9c46c7c2fe40ff45c5a12adb588bf4d5" title="xPL instance name of this device">xPL_My_Instance_ID</a>, <a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a>);
                                                        <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(&amp;<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>, <a class="code" href="_security_system_8h.html#ae33a92f4e46c1d70d59e71bd1eecc209">EEDATASTART_XPL</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>));
                                                }

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;newconf =&quot;</span>);
                                                <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a9c46c7c2fe40ff45c5a12adb588bf4d5" title="xPL instance name of this device">xPL_My_Instance_ID</a>);
                                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

                                        }
                                        <span class="keywordflow">if</span> (stricmppgm2ram(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>, (ROM <span class="keywordtype">char</span>*) <span class="stringliteral">&quot;interval&quot;</span>) ==0) {

                                                <span class="keywordflow">if</span>(atoi(<a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a>) &gt; 1 )  {
                                                        <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a7111b59426453cce173352e2d7ef9dc3" title="Interval of the xPL heatbeat message in seconds.">xPL_Heartbeat_Interval</a> = atoi(<a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a>);
                                                        <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(&amp;<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>, <a class="code" href="_security_system_8h.html#ae33a92f4e46c1d70d59e71bd1eecc209">EEDATASTART_XPL</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>));
                                                }

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;interval =&quot;</span>);
                                                <a class="code" href="_hardware_profile_8h.html#a35a0c78b8926c6695d170f9f6ff47c61">putcUART</a>( <span class="charliteral">&#39;0&#39;</span> + <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a7111b59426453cce173352e2d7ef9dc3" title="Interval of the xPL heatbeat message in seconds.">xPL_Heartbeat_Interval</a> );
                                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>


                                        }
                                        <span class="keywordflow">if</span> (stricmppgm2ram(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>, (ROM <span class="keywordtype">char</span>*) <span class="stringliteral">&quot;ip&quot;</span>) ==0) {

                                                <span class="keywordflow">if</span>(StringToIPAddress(<a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a>, &amp;(<a class="code" href="_main_demo_8c.html#a67540808395519081be1333c4e9aa1f8">AppConfig</a>.MyIPAddr))) {
                                                        memcpy((<span class="keywordtype">void</span>*)&amp;(<a class="code" href="_main_demo_8c.html#a67540808395519081be1333c4e9aa1f8">AppConfig</a>.DefaultIPAddr), (<span class="keywordtype">void</span>*)&amp;(<a class="code" href="_main_demo_8c.html#a67540808395519081be1333c4e9aa1f8">AppConfig</a>.MyIPAddr), <span class="keyword">sizeof</span>(IP_ADDR));
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;ip:&quot;</span>);
                                                        <a class="code" href="_main_demo_8c.html#a8a69fd5952a14c7bfa97a304380d4bc1">DisplayIPValue</a>(<a class="code" href="_main_demo_8c.html#a67540808395519081be1333c4e9aa1f8">AppConfig</a>.MyIPAddr);
                                                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
                                                        <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(&amp;<a class="code" href="_main_demo_8c.html#a67540808395519081be1333c4e9aa1f8">AppConfig</a>, <a class="code" href="_main_demo_8c.html#a91b87b60e38a5f2cad2d0725a1ae6306">EEDATASTART_CONFIG</a>, <span class="keyword">sizeof</span>(<a class="code" href="_main_demo_8c.html#a67540808395519081be1333c4e9aa1f8">AppConfig</a>));
                                                }
                                                <span class="keywordflow">else</span> {
                                                        <span class="comment">//</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;ip errored\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                                }

                                        } <span class="comment">//ip</span>
                                        <span class="keywordflow">if</span> (stricmppgm2ram(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>, ( ROM <span class="keywordtype">char</span> *)<span class="stringliteral">&quot;subnet&quot;</span>) ==0)  {
                                                <span class="keywordflow">if</span>(StringToIPAddress(<a class="code" href="x_p_l_8c.html#a65d6c76d15acf1f33b1d8778f79881db" title="Used as a temp storage for processing messages, holds the value of a key value pair.">xPLMsgValue</a>, &amp;(<a class="code" href="_main_demo_8c.html#a67540808395519081be1333c4e9aa1f8">AppConfig</a>.MyMask))) {
                                                        memcpy((<span class="keywordtype">void</span>*)&amp;(<a class="code" href="_main_demo_8c.html#a67540808395519081be1333c4e9aa1f8">AppConfig</a>.DefaultMask), (<span class="keywordtype">void</span>*)&amp;(<a class="code" href="_main_demo_8c.html#a67540808395519081be1333c4e9aa1f8">AppConfig</a>.MyMask), <span class="keyword">sizeof</span>(IP_ADDR));
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Subnet:&quot;</span>);
                                                        <a class="code" href="_main_demo_8c.html#a8a69fd5952a14c7bfa97a304380d4bc1">DisplayIPValue</a>(<a class="code" href="_main_demo_8c.html#a67540808395519081be1333c4e9aa1f8">AppConfig</a>.MyMask);
                                                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
                                                        <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(&amp;<a class="code" href="_main_demo_8c.html#a67540808395519081be1333c4e9aa1f8">AppConfig</a>, <a class="code" href="_main_demo_8c.html#a91b87b60e38a5f2cad2d0725a1ae6306">EEDATASTART_CONFIG</a>, <span class="keyword">sizeof</span>(<a class="code" href="_main_demo_8c.html#a67540808395519081be1333c4e9aa1f8">AppConfig</a>));
                                                }
                                                <span class="keywordflow">else</span> {
                                                        <span class="comment">//</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Subnet errored\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                                }
                                        }
                                } <span class="comment">// while</span>


<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n\r\n Restart ##############&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
                                Reset();
                        } <span class="comment">//AlarmState != Disarmed</span>
                }<span class="comment">// if ((xPLReceivedMessage.xPL_MsgDestination == To_Me ) &amp;&amp; (xPLReceivedMessage.xPL_SchemaClass == Class_Config))</span>



        }<span class="comment">// Config</span>


} <span class="comment">// SchemaProcessUDPMsg</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_a3baecc6556e5cc7af0d59d0216aa217c_cgraph.svg" width="1558" height="868" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_a3baecc6556e5cc7af0d59d0216aa217c_icgraph.svg" width="872" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a62b4d90791ab073f74677d42bfb64253"></a><!-- doxytag: member="SecuritySystem.c::SchemaTasks" ref="a62b4d90791ab073f74677d42bfb64253" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL SchemaTasks </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function SchemaTasks PreCondition: None Side Effects: None Overview: General task manager for any implemented xPL Schema(s)</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000006">Todo:</a></b></dt><dd>add a timer that prevents the xPL task from blocking access to <a class="el" href="_security_system_8c.html#a3ccbc635f6f7bb31465920840c7db474">IOTasks()</a>;</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>True if no task has ran </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00591">591</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="_security_system_8h_source.html#l00008">AREACOUNT</a>, <a class="el" href="_security_system_8c_source.html#l00033">BatteryCheckTimer</a>, <a class="el" href="_battery_8c_source.html#l00144">BatteryTask()</a>, <a class="el" href="x_p_l_8h_source.html#l00006">BOOL</a>, <a class="el" href="_security_system_8c_source.html#l02108">bypassZone()</a>, <a class="el" href="_security_system_8h_source.html#l00273">xPLTaskLists::CurentTask</a>, <a class="el" href="_security_system_8c_source.html#l02226">EnableZone()</a>, <a class="el" href="_security_system_8h_source.html#l00263">xPLTasks::ErrorMessage</a>, <a class="el" href="_security_system_8h_source.html#l00265">xPLTasks::FlaggedAreas</a>, <a class="el" href="_security_system_8h_source.html#l00264">xPLTasks::FlaggedZones</a>, <a class="el" href="_security_system_8h_source.html#l00274">xPLTaskLists::FreePosition</a>, <a class="el" href="_security_system_8h_source.html#l00276">xPLTaskLists::GatewayChangedTimer</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_security_system_8c_source.html#l00780">IOTasks()</a>, <a class="el" href="_security_system_8h_source.html#l00191">AreaConfigs::IsChangeFlagged</a>, <a class="el" href="_security_system_8c_source.html#l01995">IsolateZone()</a>, <a class="el" href="_security_system_8h_source.html#l00266">xPLTasks::NewZoneState</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00965">SendACStat()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00226">SendAlarmingMsg()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00711">SendAreaInfo()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00587">SendAreaList()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l01084">SendAreaStat()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00132">SendAreaStateMsg()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00395">SendArmed()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00929">SendBatteryStat()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00774">SendConfigList()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00504">SendDisarm()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00471">SendError()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l01002">SendGateStat()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00894">SendGatewayChanged()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00306">SendGatewayInfo()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00637">SendZoneInfo()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00545">SendZoneList()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l01180">SendZoneStat()</a>, <a class="el" href="_security_system_8h_source.html#l00290">SMTP_Alarmed</a>, <a class="el" href="_security_system_8h_source.html#l00288">SMTP_Arm</a>, <a class="el" href="_security_system_8h_source.html#l00219">xPLConfigs::SMTP_ArmDisarm</a>, <a class="el" href="_security_system_8h_source.html#l00289">SMTP_Disarm</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00613">SMTPQueueEmail()</a>, <a class="el" href="_security_system_8c_source.html#l01411">StateChangeToArmFailed()</a>, <a class="el" href="_security_system_8h_source.html#l00277">xPLTaskLists::Task</a>, <a class="el" href="_security_system_8h_source.html#l00262">xPLTasks::TaskBuffered</a>, <a class="el" href="_security_system_8h_source.html#l00267">xPLTasks::TaskState</a>, <a class="el" href="_security_system_8h_source.html#l00235">TB_ArmFailed</a>, <a class="el" href="_security_system_8h_source.html#l00245">TB_Bypass</a>, <a class="el" href="_security_system_8h_source.html#l00246">TB_Enable</a>, <a class="el" href="_security_system_8h_source.html#l00244">TB_Isolate</a>, <a class="el" href="_security_system_8h_source.html#l00238">TB_Panic</a>, <a class="el" href="_security_system_8h_source.html#l00256">TB_SendACStat</a>, <a class="el" href="_security_system_8h_source.html#l00243">TB_SendAreaInfo</a>, <a class="el" href="_security_system_8h_source.html#l00241">TB_SendAreaList</a>, <a class="el" href="_security_system_8h_source.html#l00253">TB_SendAreaStat</a>, <a class="el" href="_security_system_8h_source.html#l00247">TB_SendAreaStateMsg</a>, <a class="el" href="_security_system_8h_source.html#l00236">TB_SendArmed</a>, <a class="el" href="_security_system_8h_source.html#l00255">TB_SendBatteryStat</a>, <a class="el" href="_security_system_8h_source.html#l00234">TB_SendConfigList</a>, <a class="el" href="_security_system_8h_source.html#l00237">TB_SendDisarm</a>, <a class="el" href="_security_system_8h_source.html#l00251">TB_SendError</a>, <a class="el" href="_security_system_8h_source.html#l00252">TB_SendGateStat</a>, <a class="el" href="_security_system_8h_source.html#l00250">TB_SendGatewayChanged</a>, <a class="el" href="_security_system_8h_source.html#l00239">TB_SendGatewayInfo</a>, <a class="el" href="_security_system_8h_source.html#l00248">TB_SendInvalidUser</a>, <a class="el" href="_security_system_8h_source.html#l00249">TB_SendInvalidUserTimestamp</a>, <a class="el" href="_security_system_8h_source.html#l00242">TB_SendZoneInfo</a>, <a class="el" href="_security_system_8h_source.html#l00240">TB_SendZoneList</a>, <a class="el" href="_security_system_8h_source.html#l00254">TB_SendZoneStat</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="_security_system_8h_source.html#l00016">XPLBUFFERSIZE</a>, and <a class="el" href="_security_system_8h_source.html#l00007">ZONECOUNT</a>.</p>

<p>Referenced by <a class="el" href="x_p_l_8c_source.html#l00263">XPLTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                       {

        <a class="code" href="x_p_l_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a> ReturnResult;
        <span class="keywordtype">int</span> iCounter, DeviceSelected, CurrentTask;

        <span class="comment">// If there are no tasks in queue check to see if the battery state should be checked</span>
        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#a15bcecd7cf38b7e1a6da604b9f96893b" title="Task number that is free to create a new task in.">FreePosition</a> == <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#abbf0faf76076ff68cafd60bd0e082055" title="End up being the last task that was processed.">CurentTask</a>) {
                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a291b50190c4eae5d0efd25cafddedc77" title="Timer checking the battery status.">BatteryCheckTimer</a> &lt; TickGet()) {
                        <a class="code" href="_security_system_8c.html#a291b50190c4eae5d0efd25cafddedc77" title="Timer checking the battery status.">BatteryCheckTimer</a> = TickGet() + TICK_SECOND;
                        <a class="code" href="_battery_8c.html#ad7abffae7b40c1538c5411bfd808a68a" title="Task process for managing the battery state.">BatteryTask</a>();
                }
        }


        <span class="comment">// Is there a task to work on?</span>
        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#a15bcecd7cf38b7e1a6da604b9f96893b" title="Task number that is free to create a new task in.">FreePosition</a> == <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#abbf0faf76076ff68cafd60bd0e082055" title="End up being the last task that was processed.">CurentTask</a>) {
                <span class="comment">// as there are no messages to be sent, check the IOTasks to see if the state of the zones has changed</span>
                ReturnResult = <a class="code" href="_security_system_8c.html#a3ccbc635f6f7bb31465920840c7db474">IOTasks</a>();
                <span class="keywordflow">return</span> ReturnResult;  <span class="comment">// Returns is a message was sent by the IOTasks</span>
                
                <span class="comment">// todo add a timer that prevents the xPL task from blocking access to IOTasks();</span>
        }

        <span class="comment">// If the current task has not completed make sure it has the chance to run again.</span>
        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#abbf0faf76076ff68cafd60bd0e082055" title="End up being the last task that was processed.">CurentTask</a>].<a class="code" href="structx_p_l_tasks.html#a3de9c2a149eebeb114bb3d7d43d40fff" title="0 means completed, &gt; 0 means more things to do. Value &gt; 0 can be used by task to track state...">TaskState</a> == 0) {
                <span class="comment">// updates the current Task, remember the current task will end up being the last task processed once this has run</span>
                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#abbf0faf76076ff68cafd60bd0e082055" title="End up being the last task that was processed.">CurentTask</a> &lt; (<a class="code" href="_security_system_8h.html#acdb1a1e550f9525246d5f268cd497452" title="the number of xPL messages that can be buffered for transmit">XPLBUFFERSIZE</a>-1))
                        <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#abbf0faf76076ff68cafd60bd0e082055" title="End up being the last task that was processed.">CurentTask</a>++;
                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#abbf0faf76076ff68cafd60bd0e082055" title="End up being the last task that was processed.">CurentTask</a> &gt;= (<a class="code" href="_security_system_8h.html#acdb1a1e550f9525246d5f268cd497452" title="the number of xPL messages that can be buffered for transmit">XPLBUFFERSIZE</a>-1))
                        <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#abbf0faf76076ff68cafd60bd0e082055" title="End up being the last task that was processed.">CurentTask</a> =0;
        }
        CurrentTask = <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#abbf0faf76076ff68cafd60bd0e082055" title="End up being the last task that was processed.">CurentTask</a>;   

        <span class="comment">// populate IsChangeFlagged from the zone array for the task to be processed</span>
        <span class="keywordflow">for</span>(iCounter =0; iCounter &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; iCounter++)
                 <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[iCounter].IsChangeFlagged = <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#abbf0faf76076ff68cafd60bd0e082055" title="End up being the last task that was processed.">CurentTask</a>].<a class="code" href="structx_p_l_tasks.html#adc72959bb001a58e0ac4809643ac4062" title="An array of the Zones that have been flagged for this message.">FlaggedZones</a>[iCounter];

        <span class="comment">// populate IsChangeFlagged from the area array for the task to be processed</span>
                <span class="keywordflow">for</span>(iCounter =0; iCounter &lt;= <a class="code" href="_security_system_8h.html#af9feef5e257517789486c320b17e82bd">AREACOUNT</a>; iCounter++)
                        <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[iCounter].<a class="code" href="struct_area_configs.html#a711da45ad4b0c06e1aaee9d2ba6108aa" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#abbf0faf76076ff68cafd60bd0e082055" title="End up being the last task that was processed.">CurentTask</a>].<a class="code" href="structx_p_l_tasks.html#a194342683536b1c2bbe3319655a3fd2c" title="An array of the Areas that have been flagged for this message.">FlaggedAreas</a>[iCounter];

        <span class="keywordflow">switch</span> (<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#abbf0faf76076ff68cafd60bd0e082055" title="End up being the last task that was processed.">CurentTask</a>].<a class="code" href="structx_p_l_tasks.html#a2a2ae019d1085568bd2b8c84ae8ec8ce" title="Type of task.">TaskBuffered</a>) {

                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba62487ade0039ada8325f00b58a204929">TB_SendConfigList</a>:
                        <a class="code" href="_security_system_8h.html#a07582d84515caf26cd22e534fd29f378">SendConfigList</a>(); <span class="comment">//very simple</span>
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38debaa94a96105763a0e83f669efef0921ecc">TB_ArmFailed</a>:
                        <a class="code" href="_security_system_8c.html#ab4b79e3122c6964725cec23bf923547a">StateChangeToArmFailed</a>(); <span class="comment">// needs zones or areas populated</span>
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba2f75946b7c4455271e0b1b684fa1fccd">TB_SendArmed</a>:
                        <a class="code" href="_security_system_8h.html#ae049c3724d5bacc955f50f724483ed91">SendArmed</a>(); <span class="comment">// extracts data from the zones &amp; area directly</span>
                        <span class="keywordflow">if</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a01d912d78612ae09e83da0487f415069" title="Send emails on all arm and disarm events.">SMTP_ArmDisarm</a> == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)
                                <a class="code" href="_security_system_8h.html#ae777555850cf9c897f46c8407ce1729f" title="Places a new email in the SMTP queue to be processed (sent)">SMTPQueueEmail</a> (<a class="code" href="_security_system_8h.html#adf08ba7d4e8e4395881e05cb2fabde71a621558074564a0ac1ed2b6cbcd0a8fc6">SMTP_Arm</a>); <span class="comment">// queue an email notification</span>
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba5dbdd6a4e8fd4a0d20c276a452fd9eb9">TB_SendDisarm</a>:
                        <a class="code" href="_security_system_8h.html#af1800c287b83d40961f39fcd9a751322">SendDisarm</a>();
                        <span class="keywordflow">if</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a01d912d78612ae09e83da0487f415069" title="Send emails on all arm and disarm events.">SMTP_ArmDisarm</a> == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)
                                <a class="code" href="_security_system_8h.html#ae777555850cf9c897f46c8407ce1729f" title="Places a new email in the SMTP queue to be processed (sent)">SMTPQueueEmail</a> (<a class="code" href="_security_system_8h.html#adf08ba7d4e8e4395881e05cb2fabde71a24aa6860db5441d0687ad842d9e4f86f">SMTP_Disarm</a>);
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38debaec54c751a669111ac9d7ecc2be16f2b0">TB_Panic</a>:
                        <a class="code" href="_security_system_8h.html#ae9e6733b7fed738a76787f01762bb284">SendAlarmingMsg</a>(99);
                        <a class="code" href="_security_system_8h.html#ae777555850cf9c897f46c8407ce1729f" title="Places a new email in the SMTP queue to be processed (sent)">SMTPQueueEmail</a> (<a class="code" href="_security_system_8h.html#adf08ba7d4e8e4395881e05cb2fabde71aeefaacd7ffe9237ff8436559742579b7">SMTP_Alarmed</a>);
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba3531a51bf0de6afa086227bd386757da">TB_SendGatewayInfo</a>:
                        <a class="code" href="_security_system_8h.html#a46495fd42c19f6703e4663cb7cf2d1ec">SendGatewayInfo</a>();
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba4958f2b5966c8bd39b22f0059854cd65">TB_SendZoneList</a>:
                        <a class="code" href="_security_system_8h.html#a5583c2b95797b8210dfe1b1a5e516c2d">SendZoneList</a>();
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38debadefe2c183f4cb0391d6a20a2a98abeb1">TB_SendAreaList</a>:
                        <a class="code" href="_security_system_8h.html#a43dbd62169c9f83be3663dc435e232c7">SendAreaList</a>();
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba481ff892e48385c5941818d48dfde8bf">TB_SendGateStat</a>:
                        <a class="code" href="_security_system_8h.html#aeb4ee205f02bf767a5d3b93608abc736">SendGateStat</a>();
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba25a621bc1f223ff1e6ef8980a4103932">TB_SendAreaStat</a>:
                        <span class="keywordflow">for</span>(iCounter =0; iCounter &lt; <a class="code" href="_security_system_8h.html#af9feef5e257517789486c320b17e82bd">AREACOUNT</a>; iCounter++)
                                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[CurrentTask].<a class="code" href="structx_p_l_tasks.html#a194342683536b1c2bbe3319655a3fd2c" title="An array of the Areas that have been flagged for this message.">FlaggedAreas</a>[iCounter] == 1)
                                        DeviceSelected = iCounter;
                        <a class="code" href="_security_system_8h.html#a5d91f06e22d49f6ecee37802e866e0e6">SendAreaStat</a> (DeviceSelected);
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38debadae4078c6aaf8dab7f05974d72be0b84">TB_SendZoneStat</a>:
                        <span class="keywordflow">for</span>(iCounter =0; iCounter &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; iCounter++)
                                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[CurrentTask].<a class="code" href="structx_p_l_tasks.html#adc72959bb001a58e0ac4809643ac4062" title="An array of the Zones that have been flagged for this message.">FlaggedZones</a>[iCounter] == 1)
                                        DeviceSelected = iCounter;
                        <a class="code" href="_security_system_8h.html#a7fdbfa1929e90a45cc905c6276ab7cae">SendZoneStat</a> (DeviceSelected);
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38debaa663ca6dd0a7b91286407c39174ad3c5">TB_SendZoneInfo</a>:
                        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) 
                                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[CurrentTask].<a class="code" href="structx_p_l_tasks.html#adc72959bb001a58e0ac4809643ac4062" title="An array of the Zones that have been flagged for this message.">FlaggedZones</a>[iCounter] == 1)
                                        DeviceSelected = iCounter;
                        <a class="code" href="_security_system_8h.html#ae149da75e2b494aa56f4976837706565">SendZoneInfo</a>(DeviceSelected);
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38debaa5ae73dc445f6834a30b88b5ec7741aa">TB_SendAreaInfo</a>:
                        <span class="keywordflow">for</span>(iCounter =0; iCounter &lt; <a class="code" href="_security_system_8h.html#af9feef5e257517789486c320b17e82bd">AREACOUNT</a>; iCounter++)
                                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[CurrentTask].<a class="code" href="structx_p_l_tasks.html#a194342683536b1c2bbe3319655a3fd2c" title="An array of the Areas that have been flagged for this message.">FlaggedAreas</a>[iCounter] == 1)
                                        DeviceSelected = iCounter;
                        <a class="code" href="_security_system_8h.html#acdb6126b5578c4ca8c06d5343a7b37df">SendAreaInfo</a>(DeviceSelected);
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba50a9d18dd2121632a2d41890f9e0dcad">TB_Isolate</a>:
                        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) 
                                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[CurrentTask].<a class="code" href="structx_p_l_tasks.html#adc72959bb001a58e0ac4809643ac4062" title="An array of the Zones that have been flagged for this message.">FlaggedZones</a>[iCounter] == 1)
                                        DeviceSelected = iCounter;
                        <a class="code" href="_security_system_8c.html#aa58e855f239c14c2cfc32dcfa244d31f">IsolateZone</a>(DeviceSelected);
                        <span class="keywordflow">break</span>;
                        
                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba1a2f5c1ced4a7a6ef76d5a6e0ebf26f1">TB_Bypass</a>:
                        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) 
                                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[CurrentTask].<a class="code" href="structx_p_l_tasks.html#adc72959bb001a58e0ac4809643ac4062" title="An array of the Zones that have been flagged for this message.">FlaggedZones</a>[iCounter] == 1)
                                        DeviceSelected = iCounter;
                        <a class="code" href="_security_system_8c.html#ab3be31caf1027bb142335a3a3d7d4eb1">bypassZone</a>(DeviceSelected);
                        <span class="keywordflow">break</span>;
                        
                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38debae35285ccd71be17edd6c76911642a84f">TB_Enable</a>:
                        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) 
                                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[CurrentTask].<a class="code" href="structx_p_l_tasks.html#adc72959bb001a58e0ac4809643ac4062" title="An array of the Zones that have been flagged for this message.">FlaggedZones</a>[iCounter] == 1)
                                        DeviceSelected = iCounter;
                        <a class="code" href="_security_system_8c.html#a14eb903eaa706a4874267274a2ffc6fa">EnableZone</a>(DeviceSelected);
                        <span class="keywordflow">break</span>;

        
                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba7b60d1d8fae6193592f42e97a2df8846">TB_SendAreaStateMsg</a>:
                        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) 
                                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[CurrentTask].<a class="code" href="structx_p_l_tasks.html#adc72959bb001a58e0ac4809643ac4062" title="An array of the Zones that have been flagged for this message.">FlaggedZones</a>[iCounter] == 1)
                                        DeviceSelected = iCounter;
                        <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[CurrentTask].<a class="code" href="structx_p_l_tasks.html#a3de9c2a149eebeb114bb3d7d43d40fff" title="0 means completed, &gt; 0 means more things to do. Value &gt; 0 can be used by task to track state...">TaskState</a> = <a class="code" href="_security_system_8h.html#ae77b19bae92f6c64f9a58f722b4bf193">SendAreaStateMsg</a> (<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[CurrentTask].<a class="code" href="structx_p_l_tasks.html#a3c4c2e2560efa711fd03282d2eb4e6f1" title="Used by SendAreaStateMsg to know what changes have been made.">NewZoneState</a>, DeviceSelected, <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[CurrentTask].<a class="code" href="structx_p_l_tasks.html#a3de9c2a149eebeb114bb3d7d43d40fff" title="0 means completed, &gt; 0 means more things to do. Value &gt; 0 can be used by task to track state...">TaskState</a>);
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba7cdac24e07915d54c69862bc686dbc3c">TB_SendInvalidUser</a>:
                        <a class="code" href="_security_system_8h.html#ab29cace49ca20af0048aac94e64c10dd">SendError</a>( (ROM <span class="keywordtype">char</span> *)<span class="stringliteral">&quot;user invalid&quot;</span>);
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba151bd1b8f717cac517f3bc2150ef004e">TB_SendInvalidUserTimestamp</a>:
                        <a class="code" href="_security_system_8h.html#ab29cace49ca20af0048aac94e64c10dd">SendError</a>( (ROM <span class="keywordtype">char</span> *)<span class="stringliteral">&quot;Timestamp out of range. Check system time&quot;</span>);
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba355e90cd3537b1c518aa6364d1307617">TB_SendGatewayChanged</a>:
                        <a class="code" href="_security_system_8h.html#a2c31ecf27fafa5085703f0719f6decac">SendGatewayChanged</a>();
                        <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#a48445b8ac06ecea79af8a778d3a7f6cc" title="Provides a delay in sending the xPL gateway changed message.">GatewayChangedTimer</a> = 0;
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38debade489309cf96b23ec7a59ab75f32e863">TB_SendError</a>:
                        <a class="code" href="_security_system_8h.html#ab29cace49ca20af0048aac94e64c10dd">SendError</a>(<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[CurrentTask].<a class="code" href="structx_p_l_tasks.html#a2c690f89f7d46cffb66d86187f378cb3" title="Error message passed to SendError.">ErrorMessage</a>);
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38debaf9f0cd38482d4fd02c39cd3890a4f882">TB_SendBatteryStat</a>:
                        <a class="code" href="_security_x_p_l_sender_8c.html#a80218fda4a4753b2d214453e14b400ff">SendBatteryStat</a>();
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38debac46bb2c8228114e288eeec66988d0448">TB_SendACStat</a>:
                        <a class="code" href="_security_x_p_l_sender_8c.html#aa79f220fe412930dbbe86acd8e506f48">SendACStat</a>();
                        <span class="keywordflow">break</span>;


        } <span class="comment">// switch</span>


        <span class="keywordflow">return</span> ReturnResult;

} <span class="comment">//SchemaTasks</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_a62b4d90791ab073f74677d42bfb64253_cgraph.svg" width="1574" height="1739" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_a62b4d90791ab073f74677d42bfb64253_icgraph.svg" width="467" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9b56fcd765dadf3ef1f50d01c51caf7b"></a><!-- doxytag: member="SecuritySystem.c::SetArming" ref="a9b56fcd765dadf3ef1f50d01c51caf7b" args="(char *TheValue, BOOL isZone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SetArming </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>TheValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BOOL&#160;</td>
          <td class="paramname"><em>isZone</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function SetArmingZone PreCondition: None Side Effects: Sets arming flags for zones Overview: Sets the arming flags for the zones based on values in the KVP</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">Value</td><td>from xPL message, BOOL is zone - False is Area </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l01537">1537</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="_security_system_8h_source.html#l00008">AREACOUNT</a>, <a class="el" href="_security_system_8c_source.html#l00035">i2Count</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_security_system_8h_source.html#l00191">AreaConfigs::IsChangeFlagged</a>, <a class="el" href="_security_system_8h_source.html#l00173">ZoneConfigs::IsChangeFlagged</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00023">xPLMSGVALUELENGTH</a>, and <a class="el" href="_security_system_8h_source.html#l00007">ZONECOUNT</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l01642">SchemaProcessUDPMsg()</a>.</p>
<div class="fragment"><pre class="fragment">                                             {

        <span class="keywordtype">int</span> DeviceID;
        <span class="keywordtype">char</span> TempBuffer[3];


        <span class="comment">//if &#39;all&#39; then set all zones to arming</span>
        <span class="keywordflow">if</span> (strncmppgm2ram(TheValue,<span class="stringliteral">&quot;all&quot;</span>,3)) {
                <span class="keywordflow">if</span> (isZone) {
                        <span class="comment">// Loop though all of the zones</span>
                        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                                <span class="keywordflow">if</span> ((!<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].IsIsolated) &amp;&amp; (!<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].IsBypassed)) {
                                        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#a3060ff1a56645c2b505274a4dd455582" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                                }
                        } <span class="comment">// for</span>
                } <span class="comment">// isZone</span>
                <span class="keywordflow">else</span> {
                        <span class="comment">// Loop though all of the Area&#39;s</span>
                        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#af9feef5e257517789486c320b17e82bd">AREACOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                                <span class="keywordflow">if</span> ((!<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].IsIsolated) &amp;&amp; (!<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].IsBypassed)) {
                                        <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_area_configs.html#a711da45ad4b0c06e1aaee9d2ba6108aa" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                                }
                        } <span class="comment">// for</span>
                }<span class="comment">// !isZone</span>
        }<span class="comment">// if (all)</span>
        <span class="keywordflow">else</span> {

                <span class="comment">// looking for digits seperated by a commar and terminated by new line eg (01, 02 ,3,4,12\n)</span>
                memset(TempBuffer,<span class="charliteral">&#39;\0&#39;</span>, 3);
                <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0, <a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a> =0;<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="x_p_l_8h.html#aae5a87b8c5b796965aa8548462ed8f39">xPLMSGVALUELENGTH</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                        <span class="keywordflow">if</span> (TheValue[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>] == <span class="charliteral">&#39; &#39;</span>) <span class="comment">//ignore spaces</span>
                                <span class="keywordflow">if</span> ((<a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a> ==0) &amp;&amp; (TheValue[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>] == <span class="charliteral">&#39;0&#39;</span>)) <span class="comment">//ignore leading zeros</span>
                                        <span class="keywordflow">if</span> ((TheValue[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>] == <span class="charliteral">&#39;,&#39;</span>) || (TheValue[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>] == <span class="charliteral">&#39;\n&#39;</span>)) {
                                                <span class="comment">//make sure we have data first</span>
                                                <span class="keywordflow">if</span> (!<a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a> == 0) {
                                                        DeviceID = atoi(TempBuffer);
                                                        <span class="comment">// ensure that the zone is valid, if so arm it</span>
                                                        <span class="keywordflow">if</span> (isZone) {
                                                                <span class="keywordflow">if</span> ((DeviceID &lt; ZONECOUNT) &amp;&amp; (DeviceID != 0)) <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#a3060ff1a56645c2b505274a4dd455582" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                                                        }
                                                        <span class="keywordflow">if</span> (!isZone) {
                                                                <span class="keywordflow">if</span> ((DeviceID &lt; AREACOUNT) &amp;&amp; (DeviceID != 0)) <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_area_configs.html#a711da45ad4b0c06e1aaee9d2ba6108aa" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                                                        }
                                                        <span class="keywordflow">if</span> (TheValue[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>] == <span class="charliteral">&#39;\n&#39;</span>) <span class="keywordflow">break</span>; <span class="comment">// signals the end of the line</span>
                                                        memset(TempBuffer,<span class="charliteral">&#39;\0&#39;</span>, 3);
                                                }<span class="comment">//(!i2Count == 0)</span>
                                        }<span class="comment">// ((TheValue[iCount] == &#39;,&#39;) || (TheValue[iCount] == &#39;\n&#39;))</span>
                                        <span class="keywordflow">else</span> {
                                                TempBuffer[<a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a>] = TheValue[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>];
                                                <a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a>++;
                                        }

                }<span class="comment">// for</span>

        } <span class="comment">// else</span>

} <span class="comment">// SetArmingZone</span>
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_a9b56fcd765dadf3ef1f50d01c51caf7b_icgraph.svg" width="1134" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="acdd105845812c1756a186b645fd33b8e"></a><!-- doxytag: member="SecuritySystem.c::SetArmingArea" ref="acdd105845812c1756a186b645fd33b8e" args="(char *TheValue)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SetArmingArea </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>TheValue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function SetArmingArea PreCondition: None Side Effects: Sets arming flags for areas Overview: Sets the arming flags for the area based on values in the KVP </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">Value</td><td>from xPL message </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l01521">1521</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>
<div class="fragment"><pre class="fragment">                                    {



}
</pre></div>
</div>
</div>
<a class="anchor" id="ab4846465588e6aede197b7e0dbfcea7a"></a><!-- doxytag: member="SecuritySystem.c::StateChangeToAlarmed" ref="ab4846465588e6aede197b7e0dbfcea7a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StateChangeToAlarmed </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function StateChangeToAlarmed PreCondition: None Side Effects: None Overview: Used to change the alarmed state </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>IO changes </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00993">993</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="_security_system_8h_source.html#l00113">Alarmed</a>, <a class="el" href="_security_system_8h_source.html#l00114">Alarmed24</a>, <a class="el" href="_security_system_8h_source.html#l00111">Alarming</a>, <a class="el" href="_security_system_8h_source.html#l00112">Alarming24</a>, <a class="el" href="_security_system_8c_source.html#l00029">AlarmingTimer</a>, <a class="el" href="_security_system_8c_source.html#l00017">AlarmState</a>, <a class="el" href="_hardware_profile_8h_source.html#l00072">EXT_SIREN_IO</a>, <a class="el" href="_hardware_profile_8h_source.html#l00070">INT_SIREN_IO</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, and <a class="el" href="_security_system_8c_source.html#l00031">SirenTimer</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l01025">TaskAlarming()</a>.</p>
<div class="fragment"><pre class="fragment">                                 {

        <span class="comment">// Tell the debugger</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;State changed to Alarmed, siren and strobe off\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        <span class="comment">//Clear timers</span>
        <a class="code" href="_security_system_8c.html#aa8ef5dfe0e57cb90dddff51dd7ec664a" title="Times how long the alarm will sound for.">AlarmingTimer</a> = 0;
        <a class="code" href="_security_system_8c.html#a207ce3b4724e48dd35dded40a44e14a8" title="Times the delay before acivating the external siren.">SirenTimer</a> = 0;

        <span class="comment">//Stop sirens</span>
        <a class="code" href="_hardware_profile_8h.html#a753ae1d13e216a920d733f2f842b5509">EXT_SIREN_IO</a> = 0;
        <a class="code" href="_hardware_profile_8h.html#a3d6972b809d9a8aa775020159fa48094">INT_SIREN_IO</a> = 0;

        <span class="comment">//Change internal state to alarmed</span>
        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> == <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfafb244666073c44c1f7554cdde4b17205">Alarming24</a>) <a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> = <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfada3b192c1ac5ea06b25fb09a1b514567">Alarmed24</a>;
        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> == <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfaa92b7a267bbc04bd0510d28db78210ed">Alarming</a>) <a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> = <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfa2160e3873e093db1b62cd10e5b6a27a3">Alarmed</a>;

}
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_ab4846465588e6aede197b7e0dbfcea7a_icgraph.svg" width="1179" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="accca294859199bc9e59cec74618c871c"></a><!-- doxytag: member="SecuritySystem.c::StateChangeToAlarming" ref="accca294859199bc9e59cec74618c871c" args="(int ZoneID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StateChangeToAlarming </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ZoneID</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Used to change the alarm state, sends out required messages and chages any IO lines such as siren and strobe</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ZoneID</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>IO changes </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00916">916</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="_security_system_8h_source.html#l00111">Alarming</a>, <a class="el" href="_security_system_8h_source.html#l00112">Alarming24</a>, <a class="el" href="_security_system_8h_source.html#l00207">xPLConfigs::Alarming24Duration</a>, <a class="el" href="_security_system_8h_source.html#l00206">xPLConfigs::AlarmingDuration</a>, <a class="el" href="_security_system_8c_source.html#l00029">AlarmingTimer</a>, <a class="el" href="_security_system_8c_source.html#l00017">AlarmState</a>, <a class="el" href="_security_system_8h_source.html#l00008">AREACOUNT</a>, <a class="el" href="_security_system_8c_source.html#l00021">EntryTimer</a>, <a class="el" href="_security_system_8c_source.html#l00025">ExitTimer</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_hardware_profile_8h_source.html#l00070">INT_SIREN_IO</a>, <a class="el" href="_security_system_8h_source.html#l00190">AreaConfigs::IsAlarmed</a>, <a class="el" href="_security_system_8h_source.html#l00172">ZoneConfigs::IsAlarmed</a>, <a class="el" href="_security_system_8c_source.html#l01467">isZoneMemberOfArea()</a>, <a class="el" href="_security_system_8c_source.html#l00039">LastZoneAlarmed</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00226">SendAlarmingMsg()</a>, <a class="el" href="_security_system_8h_source.html#l00136">Silent</a>, <a class="el" href="_security_system_8h_source.html#l00209">xPLConfigs::SirenDelay</a>, <a class="el" href="_security_system_8h_source.html#l00208">xPLConfigs::SirenDelay24h</a>, <a class="el" href="_security_system_8c_source.html#l00031">SirenTimer</a>, <a class="el" href="_security_system_8h_source.html#l00290">SMTP_Alarmed</a>, <a class="el" href="_security_system_8h_source.html#l00218">xPLConfigs::SMTP_OnlyInitalAlarm</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00613">SMTPQueueEmail()</a>, <a class="el" href="_security_system_8h_source.html#l00193">AreaConfigs::State</a>, <a class="el" href="_security_system_8h_source.html#l00175">ZoneConfigs::State</a>, <a class="el" href="_security_system_8h_source.html#l00160">StateAlarm</a>, <a class="el" href="_security_system_8h_source.html#l00158">StateBypass</a>, <a class="el" href="_security_system_8h_source.html#l00159">StateIsolate</a>, <a class="el" href="_hardware_profile_8h_source.html#l00074">STROBE_IO</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, and <a class="el" href="_security_system_8h_source.html#l00125">TwentyFourHour</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00780">IOTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                                        {

        <span class="keywordtype">int</span> AreaCount;

        <span class="comment">// Tell the dubugger</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;State change to alarming\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        <span class="comment">//Ensure entry and exit timers are cleared</span>
        <a class="code" href="_security_system_8c.html#afdcc9abdceb871043a45617d58de2057" title="Zone Entery timer.">EntryTimer</a> = 0;
        <a class="code" href="_security_system_8c.html#a8434e29b41874d33c95b3f339bd2bcdf" title="Exit timer - 0 means off.">ExitTimer</a> = 0;


        <span class="comment">// Start the strobe and internal siren</span>
        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[ZoneID].ZoneType != <a class="code" href="_security_system_8h.html#a785e9cb9358ef02350c5dbe8feacdce8a4b74c73f94da1d893710f28ecc1b689d">Silent</a>) {
                <a class="code" href="_hardware_profile_8h.html#a5721d9a420c592eb0b6d9e334eb84767">STROBE_IO</a> = 1;
                <a class="code" href="_hardware_profile_8h.html#a3d6972b809d9a8aa775020159fa48094">INT_SIREN_IO</a> = 1;
        }

        <span class="comment">// update the zone state</span>
        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[ZoneID].<a class="code" href="struct_zone_configs.html#a1053e4f4ba65f6a78cfd3b179c46eaaa" title="Did the zone cause the alarm to go off.">IsAlarmed</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[ZoneID].<a class="code" href="struct_zone_configs.html#a60445f2e21482e93c71508d9c2f44861" title="Current state of the zone.">State</a> = <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfa298ce309b93140eb01ed6204d58c1ecf">StateAlarm</a>;
        
        <span class="comment">// Update the area state</span>
        <span class="keywordflow">for</span> (AreaCount = 0; AreaCount &lt; <a class="code" href="_security_system_8h.html#af9feef5e257517789486c320b17e82bd">AREACOUNT</a>; AreaCount++) {
                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a290b0da69aaf212aa38c219c45a6d8a9">isZoneMemberOfArea</a>(ZoneID, AreaCount) == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)
                        <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[AreaCount].<a class="code" href="struct_area_configs.html#a8caed50b4c827a114fceba5e95d4a377" title="Did a zone in this area cause the alarm to go off.">IsAlarmed</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                        
                        <span class="comment">// if area is not isolted or bypassed</span>
                        <span class="keywordflow">if</span> ((<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[AreaCount].State != <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfad448fd95291fde3598bc0eafba11e4d4" title="In bypassed state.">StateBypass</a>) &amp;&amp; (<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[AreaCount].State != <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfa54990cdd4c65b38f8e38cc32b050056d" title="In Isolated state.">StateIsolate</a>)) 
                                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[AreaCount].<a class="code" href="struct_area_configs.html#a3a01a8765dcdad37d855251b85ae60ab" title="The current state of the area.">State</a> = <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfa298ce309b93140eb01ed6204d58c1ecf">StateAlarm</a>;       
        }

        <span class="comment">//Queue email</span>
        <a class="code" href="_security_system_8c.html#ab4811cda05bf084486e0e786e68498ea" title="The last zone to change to alarmed state. used in SMTP.c.">LastZoneAlarmed</a> = ZoneID;
        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8beaa9013aba813e75cdea886e6636d8" title="Only send emails on the inital alarm.">SMTP_OnlyInitalAlarm</a> == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
                <a class="code" href="_security_system_8h.html#ae777555850cf9c897f46c8407ce1729f" title="Places a new email in the SMTP queue to be processed (sent)">SMTPQueueEmail</a> (<a class="code" href="_security_system_8h.html#adf08ba7d4e8e4395881e05cb2fabde71aeefaacd7ffe9237ff8436559742579b7">SMTP_Alarmed</a>);

        <span class="comment">// Dont want to reset the alarm timers each time something is triggered</span>
        <span class="keywordflow">if</span> ((<a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> !=<a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfafb244666073c44c1f7554cdde4b17205">Alarming24</a>) &amp;&amp;  (<a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> !=<a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfaa92b7a267bbc04bd0510d28db78210ed">Alarming</a>))  {

                <span class="comment">//Queue email email</span>
                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a8beaa9013aba813e75cdea886e6636d8" title="Only send emails on the inital alarm.">SMTP_OnlyInitalAlarm</a> == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)
                        <a class="code" href="_security_system_8h.html#ae777555850cf9c897f46c8407ce1729f" title="Places a new email in the SMTP queue to be processed (sent)">SMTPQueueEmail</a> (<a class="code" href="_security_system_8h.html#adf08ba7d4e8e4395881e05cb2fabde71aeefaacd7ffe9237ff8436559742579b7">SMTP_Alarmed</a>);

                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[ZoneID].ZoneType != <a class="code" href="_security_system_8h.html#a0981dfebddc4a4cce1d1c3a1472d064dad9414e63b65f1805cdd3ec2e6b74c4af">TwentyFourHour</a>) {
                        <a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> = <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfaa92b7a267bbc04bd0510d28db78210ed">Alarming</a>;<span class="comment">//Change the current state to alarming</span>
                        <a class="code" href="_security_system_8c.html#a207ce3b4724e48dd35dded40a44e14a8" title="Times the delay before acivating the external siren.">SirenTimer</a> = TickGet() + (TICK_SECOND * <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a7d1d439ccc753cb0aaead9e23702e87b" title="Number of seconds before the external siren is activated.">SirenDelay</a>); <span class="comment">//check to see if external siren should be activated</span>
                        <a class="code" href="_security_system_8c.html#aa8ef5dfe0e57cb90dddff51dd7ec664a" title="Times how long the alarm will sound for.">AlarmingTimer</a> =  TickGet() + (TICK_SECOND * <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a459109edd9f494275b72d6158714eda2" title="Number of seconds that the alarm will ring for.">AlarmingDuration</a>);
                }
                <span class="keywordflow">else</span> {
                        <a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> = <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfafb244666073c44c1f7554cdde4b17205">Alarming24</a>; <span class="comment">//Change the current state to alarming</span>
                        <a class="code" href="_security_system_8c.html#a207ce3b4724e48dd35dded40a44e14a8" title="Times the delay before acivating the external siren.">SirenTimer</a> = TickGet() + (TICK_SECOND * <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a20fd6f6d2e7b1b8c8c492e20969ff6cb" title="Number of seconds before the external siren is activated for 24h alarm type.">SirenDelay24h</a>);
                        <a class="code" href="_security_system_8c.html#aa8ef5dfe0e57cb90dddff51dd7ec664a" title="Times how long the alarm will sound for.">AlarmingTimer</a> =  TickGet() + (TICK_SECOND * <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a55fac6d0098441a27949a25d9a138509" title="Number of seconds that the alarm will ring for a 24 hour alarm type.">Alarming24Duration</a>);
                }
        } <span class="comment">// !=Alarming</span>

        <span class="comment">// If the zone type is silent then do not allow the siren timer</span>
        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[ZoneID].ZoneType == <a class="code" href="_security_system_8h.html#a785e9cb9358ef02350c5dbe8feacdce8a4b74c73f94da1d893710f28ecc1b689d">Silent</a>)
                <a class="code" href="_security_system_8c.html#a207ce3b4724e48dd35dded40a44e14a8" title="Times the delay before acivating the external siren.">SirenTimer</a> = 0;

        <span class="comment">// Send the alarming message</span>
        <a class="code" href="_security_system_8h.html#ae9e6733b7fed738a76787f01762bb284">SendAlarmingMsg</a>(ZoneID);

}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_accca294859199bc9e59cec74618c871c_cgraph.svg" width="864" height="184" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_accca294859199bc9e59cec74618c871c_icgraph.svg" width="955" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad2cdbcce787b8a3c88addf52f996805f"></a><!-- doxytag: member="SecuritySystem.c::StateChangeToArm" ref="ad2cdbcce787b8a3c88addf52f996805f" args="(BOOL isLatchKey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StateChangeToArm </td>
          <td>(</td>
          <td class="paramtype">BOOL&#160;</td>
          <td class="paramname"><em>isLatchKey</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function StateChangeToArm PreCondition: ExitTimer must be set Side Effects: Changes Armed / arming flags and state Overview: Perform a test on all zones to ensure it is in a good state to be armed. If not it will generate an xPL error message. Converts all of the arming flags into Armed flags, then clears arming flags and sends the armed message</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l01296">1296</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="_security_x_p_l_sender_8c_source.html#l00017">addxPLMessage()</a>, <a class="el" href="_security_system_8c_source.html#l00017">AlarmState</a>, <a class="el" href="_security_system_8h_source.html#l00008">AREACOUNT</a>, <a class="el" href="_security_system_8h_source.html#l00116">Armed</a>, <a class="el" href="_security_system_8h_source.html#l00115">Armed_LatchKey</a>, <a class="el" href="_security_system_8c_source.html#l01607">ArmingZoneState()</a>, <a class="el" href="x_p_l_8h_source.html#l00006">BOOL</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8h_source.html#l00264">xPLTasks::FlaggedZones</a>, <a class="el" href="_security_system_8c_source.html#l00035">i2Count</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_security_system_8h_source.html#l00171">ZoneConfigs::IsArmed</a>, <a class="el" href="_security_system_8h_source.html#l00191">AreaConfigs::IsChangeFlagged</a>, <a class="el" href="_security_system_8c_source.html#l01467">isZoneMemberOfArea()</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_security_system_8h_source.html#l00155">StateNormal</a>, <a class="el" href="_security_system_8h_source.html#l00277">xPLTaskLists::Task</a>, <a class="el" href="_security_system_8h_source.html#l00235">TB_ArmFailed</a>, <a class="el" href="_security_system_8h_source.html#l00236">TB_SendArmed</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, and <a class="el" href="_security_system_8h_source.html#l00007">ZONECOUNT</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l01122">Arm()</a>, <a class="el" href="_security_system_8c_source.html#l01192">ArmAway()</a>, <a class="el" href="_security_system_8c_source.html#l01162">ArmHome()</a>, and <a class="el" href="_security_system_8c_source.html#l01220">ArmLatchkey()</a>.</p>
<div class="fragment"><pre class="fragment">                                        {

        <a class="code" href="x_p_l_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a> isAllZonesArmed, OneOrMoreZones, ArmFailed;
        <span class="keywordtype">int</span> Counter, TaskNumber, ZoneCounter;

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;State change to arm called\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        <span class="comment">// determine if an arming zone is triggered, if so cancel the action</span>
        ArmFailed = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
        <span class="keywordflow">for</span> (Counter=0;Counter &lt;= <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>;Counter++) {
                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a2d0a6f4e811adf18c96693529c2d81b4">ArmingZoneState</a>(Counter) != <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaff695d83533d89f59fa409f3d0301875" title="Since last check the zone has changed to normal.">StateNormal</a>) {  <span class="comment">// add entry &amp; exit zones here</span>
                        <span class="comment">// The test has failed</span>
                        <span class="keywordflow">if</span> (ArmFailed == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) {
                                <span class="comment">// This is the first failed zone</span>
                                TaskNumber = <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38debaa94a96105763a0e83f669efef0921ecc">TB_ArmFailed</a>); <span class="comment">// create the task</span>
                                <span class="keywordflow">for</span> (ZoneCounter=0;ZoneCounter &lt;= <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; ZoneCounter++) <span class="comment">// clear out the zone list</span>
                                        <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[TaskNumber].<a class="code" href="structx_p_l_tasks.html#adc72959bb001a58e0ac4809643ac4062" title="An array of the Zones that have been flagged for this message.">FlaggedZones</a>[ZoneCounter] = 0;
                                ArmFailed = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                        }
                        <span class="comment">// flag this zone as errored</span>
                        <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[TaskNumber].<a class="code" href="structx_p_l_tasks.html#adc72959bb001a58e0ac4809643ac4062" title="An array of the Zones that have been flagged for this message.">FlaggedZones</a>[Counter] = 1;         
                        }
        }


        <span class="keywordflow">if</span> (ArmFailed) { 
<span class="preprocessor">        #if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Arm failed as a zone is incorrect\r\n&quot;</span>);
<span class="preprocessor">        #endif</span>
<span class="preprocessor"></span>                <span class="keywordflow">goto</span> Exit_Here; <span class="comment">// do not arm the system</span>
        }
                        
                        

        <span class="comment">//Cycle through all of the zones</span>
        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> =0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {

                <span class="comment">//skip the bypassed or disabled. Arm anything that has the arming flag</span>
                <span class="keywordflow">if</span> ((!<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].IsIsolated) &amp;&amp; (!<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].IsBypassed))
                {
                        <span class="keywordflow">if</span>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].IsChangeFlagged) <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_zone_configs.html#abd82b1c153a91f2827b0bec6eee7ad7b" title="Is Zone Armed.">IsArmed</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                }
        }<span class="comment">// for loop</span>


        <span class="comment">// cycle though the area&#39;s, if all the zones in an area are armed, make the area armed as well</span>
        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#af9feef5e257517789486c320b17e82bd">AREACOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                <span class="keywordflow">if</span> ( (!<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].IsIsolated) &amp;&amp; (!<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].IsBypassed) ) {

                        isAllZonesArmed = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                        OneOrMoreZones = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a> = 0; <a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a> &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a>++) {
                                <span class="comment">//is this zone a member?</span>
                                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a290b0da69aaf212aa38c219c45a6d8a9">isZoneMemberOfArea</a>(<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>, <a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a>) == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>) {
                                        <span class="comment">// ensure it is not disable before arming</span>
                                        <span class="keywordflow">if</span> ((!<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a>].IsIsolated) &amp;&amp; (!<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a>].IsBypassed)) {
                                                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a>].IsArmed == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>) {
                                                        <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a>].<a class="code" href="struct_zone_configs.html#abd82b1c153a91f2827b0bec6eee7ad7b" title="Is Zone Armed.">IsArmed</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                                                        OneOrMoreZones = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                                                }
                                                <span class="keywordflow">else</span> isAllZonesArmed = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                                        } <span class="comment">// Zone not isolated or bypassed</span>
                                }<span class="comment">// IsMemberofArea</span>

                        } <span class="comment">// for i2Count</span>

                        <span class="keywordflow">if</span> (OneOrMoreZones &amp;&amp; isAllZonesArmed)
                                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].<a class="code" href="struct_area_configs.html#a711da45ad4b0c06e1aaee9d2ba6108aa" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;

                }<span class="comment">// IsChangeFlagged</span>
        }<span class="comment">// for iCount</span>



        <span class="comment">//Cycle through all areas, if one is arming enable all zones in the area</span>
        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#af9feef5e257517789486c320b17e82bd">AREACOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                <span class="keywordflow">if</span> ((<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].IsChangeFlagged) &amp;&amp; ((!<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].IsIsolated) &amp;&amp; (!<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].IsBypassed)) ) {

                        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a> = 0; <a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a> &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a>++) {
                                <span class="comment">//is this zone a member?</span>
                                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a290b0da69aaf212aa38c219c45a6d8a9">isZoneMemberOfArea</a>(<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>, <a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a>) == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>) {
                                        <span class="comment">// ensure it is not disable before arming</span>
                                        <span class="keywordflow">if</span> ((!<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a>].IsIsolated) &amp;&amp; (!<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a>].IsBypassed)) <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a>].<a class="code" href="struct_zone_configs.html#abd82b1c153a91f2827b0bec6eee7ad7b" title="Is Zone Armed.">IsArmed</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                                }<span class="comment">// IsMemberofArea</span>

                        } <span class="comment">// for i2Count</span>
                }<span class="comment">// IsChangeFlagged</span>
        }<span class="comment">// for iCount</span>

        <span class="comment">// Change the state</span>
        <span class="keywordflow">if</span> (isLatchKey) <a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> = <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfa8bb76e1105100766672990f93e063c3c">Armed_LatchKey</a>;
        <span class="keywordflow">else</span> <a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> = <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfa0943115c51834114c13d76fb189f56d0">Armed</a>;

        <span class="comment">// sends message and clears flags</span>
        <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a>(<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba2f75946b7c4455271e0b1b684fa1fccd">TB_SendArmed</a>);

Exit_Here:
        <span class="comment">// Greetings human</span>
        Counter = 0;
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_ad2cdbcce787b8a3c88addf52f996805f_cgraph.svg" width="819" height="192" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_ad2cdbcce787b8a3c88addf52f996805f_icgraph.svg" width="1438" height="259" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab4b79e3122c6964725cec23bf923547a"></a><!-- doxytag: member="SecuritySystem.c::StateChangeToArmFailed" ref="ab4b79e3122c6964725cec23bf923547a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StateChangeToArmFailed </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function StateChangeToArmFailed PreCondition: None Side Effects: Changes arming flags Overview: This is called when a Arming (any type) action fails. It will clear the arming flags </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l01411">1411</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="x_p_l_8h_source.html#l00006">BOOL</a>, <a class="el" href="x_p_l_8h_source.html#l00053">Class_Security</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00066">Type_Gateway</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00014">xPLMsgKey</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>, and <a class="el" href="_security_system_8h_source.html#l00007">ZONECOUNT</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                                   {

        <a class="code" href="x_p_l_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a> FirstZone = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;


<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;State change to arm failed\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# ArmFailed, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {

                <span class="comment">//Generate xPL head with type security.gateway</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba044979f8b65ecedf0ca73e5ab66bd7ad">Class_Security</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a1ffc8fbc4fd8675c7ac9a73abcb5b2ec" title="Part of the security schema.">Type_Gateway</a>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;event=error\nzone-list=&quot;</span>);

                <span class="comment">//Scan all zones, list those that are triggered and of status arming</span>
                <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> =0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                        <span class="keywordflow">if</span> ((<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].IsTriggered) &amp;&amp; (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].IsChangeFlagged))
                        {
                                <span class="keywordflow">if</span> (FirstZone == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) UDPPut(<span class="charliteral">&#39;,&#39;</span>);
                                itoa(<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>);
                                UDPPutArray(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>,strlen(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>));
                                FirstZone = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                        }
                }

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nerror=Arm fail as zone tripped&quot;</span>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n}\n&quot;</span>);
                <span class="comment">// Now transmit it.</span>
                UDPFlush();
        }


}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_ab4b79e3122c6964725cec23bf923547a_cgraph.svg" width="518" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_ab4b79e3122c6964725cec23bf923547a_icgraph.svg" width="798" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a75fd42e4a596598bc65a32ee0c863ac6"></a><!-- doxytag: member="SecuritySystem.c::TaskAlarmed" ref="a75fd42e4a596598bc65a32ee0c863ac6" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TaskAlarmed </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function TaskAlarmed PreCondition: None Side Effects: None Overview: Used to change the IO outputs while in the alarmed state </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>IO changes </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l01074">1074</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00780">IOTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                        {

        <span class="comment">//nothing to do here</span>


}
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_a75fd42e4a596598bc65a32ee0c863ac6_icgraph.svg" width="862" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa4b206c6022f03ed09cc1e7c0c1c64ac"></a><!-- doxytag: member="SecuritySystem.c::TaskAlarming" ref="aa4b206c6022f03ed09cc1e7c0c1c64ac" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TaskAlarming </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function TaskAlarming PreCondition: None Side Effects: None Overview: Used to change the IO outputs while in the alarming state </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>IO changes </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l01025">1025</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="_security_system_8c_source.html#l00029">AlarmingTimer</a>, <a class="el" href="_hardware_profile_8h_source.html#l00072">EXT_SIREN_IO</a>, <a class="el" href="_hardware_profile_8h_source.html#l00070">INT_SIREN_IO</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_hardware_profile_8h_source.html#l00201">putsUART</a>, <a class="el" href="_security_system_8c_source.html#l00031">SirenTimer</a>, and <a class="el" href="_security_system_8c_source.html#l00993">StateChangeToAlarmed()</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00780">IOTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                         {

        <span class="keyword">static</span> <span class="keywordtype">int</span> DebugTimer; <span class="comment">// Only prints updates on new second</span>
        <span class="keywordtype">int</span> SecondsLeft;
        <span class="keywordtype">char</span> DebugOut[6];

        <span class="comment">// Time delay before activating the external siren</span>
        <span class="keywordflow">if</span> ((<a class="code" href="_security_system_8c.html#a207ce3b4724e48dd35dded40a44e14a8" title="Times the delay before acivating the external siren.">SirenTimer</a> != (<span class="keywordtype">unsigned</span>) 0) &amp;&amp; (TickGet() &gt; <a class="code" href="_security_system_8c.html#a207ce3b4724e48dd35dded40a44e14a8" title="Times the delay before acivating the external siren.">SirenTimer</a>))  <a class="code" href="_security_system_8c.html#a207ce3b4724e48dd35dded40a44e14a8" title="Times the delay before acivating the external siren.">SirenTimer</a> = 0;

        <span class="comment">//Set sirens</span>
        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a207ce3b4724e48dd35dded40a44e14a8" title="Times the delay before acivating the external siren.">SirenTimer</a> == (<span class="keywordtype">unsigned</span>) 0) {
                <a class="code" href="_hardware_profile_8h.html#a753ae1d13e216a920d733f2f842b5509">EXT_SIREN_IO</a> = 1;
                <a class="code" href="_hardware_profile_8h.html#a3d6972b809d9a8aa775020159fa48094">INT_SIREN_IO</a> = 1;
        }

        <span class="comment">// has the siren gone on for long enough?</span>
        <span class="keywordflow">if</span> (TickGet() &gt; <a class="code" href="_security_system_8c.html#aa8ef5dfe0e57cb90dddff51dd7ec664a" title="Times how long the alarm will sound for.">AlarmingTimer</a>) {
                <a class="code" href="_security_system_8c.html#ab4846465588e6aede197b7e0dbfcea7a">StateChangeToAlarmed</a>();
                DebugTimer = 0;
                <a class="code" href="_security_system_8c.html#aa8ef5dfe0e57cb90dddff51dd7ec664a" title="Times how long the alarm will sound for.">AlarmingTimer</a> = 0;
        }

        <span class="comment">// Debug output</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        SecondsLeft = (<a class="code" href="_security_system_8c.html#aa8ef5dfe0e57cb90dddff51dd7ec664a" title="Times how long the alarm will sound for.">AlarmingTimer</a> - TickGet()) / TICK_SECOND;
        <span class="keywordflow">if</span> (DebugTimer != SecondsLeft) {
                DebugTimer = SecondsLeft;
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Alarming count down: &quot;</span>);
                uitoa(DebugTimer,  DebugOut);
                <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(DebugOut);
                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_aa4b206c6022f03ed09cc1e7c0c1c64ac_cgraph.svg" width="502" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_aa4b206c6022f03ed09cc1e7c0c1c64ac_icgraph.svg" width="864" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a05993d6944a2de72b8463a2ca719d3f1"></a><!-- doxytag: member="SecuritySystem.c::xPLFactoryRestart" ref="a05993d6944a2de72b8463a2ca719d3f1" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void xPLFactoryRestart </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function xPLFactoryRestart PreCondition: None Side Effects: Kills the starting character of the EEProm config data Overview: Performs a factory restart of the device, clearing everything </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None </dd></dl>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00515">515</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>References <a class="el" href="x_p_l_8h_source.html#l00051">Class_HBeat</a>, <a class="el" href="_security_system_8h_source.html#l00042">EEDATASTART_AREA</a>, <a class="el" href="_main_demo_8c_source.html#l00025">EEDATASTART_CONFIG</a>, <a class="el" href="_security_system_8h_source.html#l00040">EEDATASTART_XPL</a>, <a class="el" href="_security_system_8h_source.html#l00041">EEDATASTART_ZONE</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_t_c_p_i_p_config_8h_source.html#l00138">MPFS_RESERVE_BLOCK</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00060">Type_END</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, and <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>.</p>
<div class="fragment"><pre class="fragment">                             {
        <span class="keywordtype">char</span> TempVal[9];

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;##### Factory restart in progress #####\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        <span class="comment">// I dont think this will work as we do not call the StackTasks to send the message</span>

        <span class="comment">// if we have a good socket send the message, if not then do not bother</span>
        <span class="keywordflow">if</span> (UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
                <span class="comment">// Send header</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba44befdda86d7f36ef171a2385f3ad3b5">Class_HBeat</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a0807e49b316f6fb051b116a381793d0f">Type_END</a>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;interval=0\n}\n&quot;</span>);
                <span class="comment">// Now transmit it.</span>
                UDPFlush();
        }


    XEEBeginWrite(<a class="code" href="_security_system_8h.html#a84d6a5346b04effd1160f34d13abd01c">EEDATASTART_ZONE</a>); <span class="comment">// Zone config</span>
    XEEWrite(0x00); <span class="comment">// 0x00 will cause the xPLLoadEEConfig function to fail and revert to default settings.</span>
    XEEEndWrite();

    XEEBeginWrite(<a class="code" href="_security_system_8h.html#a61748f301d79db0c4ecb09432705d105">EEDATASTART_AREA</a>); <span class="comment">// area config</span>
    XEEWrite(0x00); <span class="comment">// 0x00 will cause the xPLLoadEEConfig function to fail and revert to default settings.</span>
    XEEEndWrite();

    XEEBeginWrite(<a class="code" href="_security_system_8h.html#ae33a92f4e46c1d70d59e71bd1eecc209">EEDATASTART_XPL</a>); <span class="comment">// device config</span>
    XEEWrite(0x00); <span class="comment">// 0x00 will cause the xPLLoadEEConfig function to fail and revert to default settings.</span>
    XEEEndWrite();

    XEEBeginWrite(<a class="code" href="_main_demo_8c.html#a91b87b60e38a5f2cad2d0725a1ae6306">EEDATASTART_CONFIG</a>); <span class="comment">// IP address, this is a part of the TCIP stack</span>
    XEEWrite(0x00); <span class="comment">// 0x00 will cause the xPLLoadEEConfig function to fail and revert to default settings.</span>
    XEEEndWrite();

    <span class="keywordflow">while</span>(XEEIsBusy());

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Clearing config data\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        <span class="comment">// Blank everything</span>
    <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = <a class="code" href="_security_system_8h.html#ae33a92f4e46c1d70d59e71bd1eecc209">EEDATASTART_XPL</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; (<a class="code" href="_t_c_p_i_p_config_8h.html#ae744cb7b573b1129e923eb07a9912893">MPFS_RESERVE_BLOCK</a> - 2); <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {

                XEEBeginWrite(<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>);
                XEEWrite(<span class="charliteral">&#39;.&#39;</span>);
        XEEEndWrite();
                <span class="keywordflow">while</span>(XEEIsBusy());
    }

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;All config data has been deleted. \r\n&quot;</span>);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Restarting device.............\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

    <span class="comment">// perform a Hardware restart</span>
        Reset();

}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_system_8c_a05993d6944a2de72b8463a2ca719d3f1_cgraph.svg" width="462" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="aa8ef5dfe0e57cb90dddff51dd7ec664a"></a><!-- doxytag: member="SecuritySystem.c::AlarmingTimer" ref="aa8ef5dfe0e57cb90dddff51dd7ec664a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TICK <a class="el" href="_security_system_8c.html#aa8ef5dfe0e57cb90dddff51dd7ec664a">AlarmingTimer</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Times how long the alarm will sound for. </p>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00029">29</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l01249">Panic()</a>, <a class="el" href="_security_system_8c_source.html#l00993">StateChangeToAlarmed()</a>, <a class="el" href="_security_system_8c_source.html#l00916">StateChangeToAlarming()</a>, and <a class="el" href="_security_system_8c_source.html#l01025">TaskAlarming()</a>.</p>

</div>
</div>
<a class="anchor" id="a016286d63fa2bb14fec565ed023b35cf"></a><!-- doxytag: member="SecuritySystem.c::AlarmState" ref="a016286d63fa2bb14fec565ed023b35cf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_security_system_8h.html#a8e5064a1f89199b73b816c1be8190bff">Alarm_States</a> <a class="el" href="_security_system_8h.html#a016286d63fa2bb14fec565ed023b35cf">AlarmState</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reflects the state of the alarm. </p>
<p>D E C L A R A T I O N S </p>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00017">17</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l01938">Disarm()</a>, <a class="el" href="_h_t_t_p_forms_8c_source.html#l00028">HTTPExecuteGet()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00191">HTTPPrint_AlarmState()</a>, <a class="el" href="_security_system_8c_source.html#l00780">IOTasks()</a>, <a class="el" href="_security_system_8c_source.html#l01249">Panic()</a>, <a class="el" href="_security_system_8c_source.html#l00193">SchemaInit()</a>, <a class="el" href="_security_system_8c_source.html#l01642">SchemaProcessUDPMsg()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l01002">SendGateStat()</a>, <a class="el" href="_security_system_8c_source.html#l00993">StateChangeToAlarmed()</a>, <a class="el" href="_security_system_8c_source.html#l00916">StateChangeToAlarming()</a>, and <a class="el" href="_security_system_8c_source.html#l01296">StateChangeToArm()</a>.</p>

</div>
</div>
<a class="anchor" id="a8cba7131f5350817bd065e867459fa69"></a><!-- doxytag: member="SecuritySystem.c::AlarmTypesText" ref="a8cba7131f5350817bd065e867459fa69" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROM char* <a class="el" href="_security_system_8h.html#a8cba7131f5350817bd065e867459fa69">AlarmTypesText</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment">
{
        <span class="stringliteral">&quot;buglary&quot;</span>,
        <span class="stringliteral">&quot;fire&quot;</span>,
        <span class="stringliteral">&quot;flood&quot;</span>,
        <span class="stringliteral">&quot;gas&quot;</span>,
        <span class="stringliteral">&quot;silent&quot;</span>,
        <span class="stringliteral">&quot;duress&quot;</span>,
        <span class="stringliteral">&quot;other&quot;</span>,
        <span class="stringliteral">&quot;&quot;</span>
}
</pre></div>
<p>determines the text outputed in the xPL message for each of the alarm types </p>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00044">44</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>Referenced by <a class="el" href="_h_t_t_p_variables_8c_source.html#l00227">HTTPPrint_AlarmTypeList()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00226">SendAlarmingMsg()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l01084">SendAreaStat()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l01002">SendGateStat()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00637">SendZoneInfo()</a>, and <a class="el" href="_security_x_p_l_sender_8c_source.html#l01180">SendZoneStat()</a>.</p>

</div>
</div>
<a class="anchor" id="a6d79e0918c6b94528f6283856d663a9b"></a><!-- doxytag: member="SecuritySystem.c::AreaConfig" ref="a6d79e0918c6b94528f6283856d663a9b" args="[AREACOUNT]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_area_configs.html">AreaConfigs</a> <a class="el" href="_security_system_8h.html#a6d79e0918c6b94528f6283856d663a9b">AreaConfig</a>[AREACOUNT]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stores each Area configuration information. </p>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00149">149</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>Referenced by <a class="el" href="_security_x_p_l_sender_8c_source.html#l00017">addxPLMessage()</a>, <a class="el" href="_h_t_t_p_forms_8c_source.html#l00028">HTTPExecuteGet()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00746">HTTPPrint_AreasAlarmed()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00771">HTTPPrint_AreasAlarmType()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00719">HTTPPrint_AreasArmed()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00638">HTTPPrint_AreasBypassed()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00664">HTTPPrint_AreasIsolated()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00693">HTTPPrint_AreasTriggered()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00823">HTTPPrint_AreaTampered()</a>, <a class="el" href="_e_o_l_8c_source.html#l00154">IsZoneTriggered()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l01084">SendAreaStat()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00132">SendAreaStateMsg()</a>, and <a class="el" href="_security_x_p_l_sender_8c_source.html#l00395">SendArmed()</a>.</p>

</div>
</div>
<a class="anchor" id="a291b50190c4eae5d0efd25cafddedc77"></a><!-- doxytag: member="SecuritySystem.c::BatteryCheckTimer" ref="a291b50190c4eae5d0efd25cafddedc77" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TICK <a class="el" href="_security_system_8c.html#a291b50190c4eae5d0efd25cafddedc77">BatteryCheckTimer</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Timer checking the battery status. </p>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00033">33</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>.</p>

</div>
</div>
<a class="anchor" id="a134d28a3f8166df7163955525f14b25d"></a><!-- doxytag: member="SecuritySystem.c::dwLastUpdateTick" ref="a134d28a3f8166df7163955525f14b25d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DWORD <a class="el" href="_security_system_8c.html#a134d28a3f8166df7163955525f14b25d">dwLastUpdateTick</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tick count of last update. </p>

<p>Definition at line <a class="el" href="_custom_s_n_t_p_8c_source.html#l00134">134</a> of file <a class="el" href="_custom_s_n_t_p_8c_source.html">CustomSNTP.c</a>.</p>

<p>Referenced by <a class="el" href="_custom_s_n_t_p_8c_source.html#l00159">HTTPPrint_NTPLastUpdate()</a>, <a class="el" href="_security_system_8c_source.html#l00193">SchemaInit()</a>, <a class="el" href="_custom_s_n_t_p_8c_source.html#l00237">SNTPClient()</a>, and <a class="el" href="_custom_s_n_t_p_8c_source.html#l00470">SNTPGetUTCSeconds()</a>.</p>

</div>
</div>
<a class="anchor" id="afdcc9abdceb871043a45617d58de2057"></a><!-- doxytag: member="SecuritySystem.c::EntryTimer" ref="afdcc9abdceb871043a45617d58de2057" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TICK <a class="el" href="_security_system_8c.html#afdcc9abdceb871043a45617d58de2057">EntryTimer</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Zone Entery timer. </p>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00021">21</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l01938">Disarm()</a>, <a class="el" href="_security_system_8c_source.html#l00780">IOTasks()</a>, <a class="el" href="_security_system_8c_source.html#l01249">Panic()</a>, <a class="el" href="_security_system_8c_source.html#l00193">SchemaInit()</a>, and <a class="el" href="_security_system_8c_source.html#l00916">StateChangeToAlarming()</a>.</p>

</div>
</div>
<a class="anchor" id="a8434e29b41874d33c95b3f339bd2bcdf"></a><!-- doxytag: member="SecuritySystem.c::ExitTimer" ref="a8434e29b41874d33c95b3f339bd2bcdf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TICK <a class="el" href="_security_system_8c.html#a8434e29b41874d33c95b3f339bd2bcdf">ExitTimer</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Exit timer - 0 means off. </p>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00025">25</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l01122">Arm()</a>, <a class="el" href="_security_system_8c_source.html#l01192">ArmAway()</a>, <a class="el" href="_security_system_8c_source.html#l01162">ArmHome()</a>, <a class="el" href="_security_system_8c_source.html#l01220">ArmLatchkey()</a>, <a class="el" href="_security_system_8c_source.html#l01938">Disarm()</a>, <a class="el" href="_security_system_8c_source.html#l00780">IOTasks()</a>, <a class="el" href="_security_system_8c_source.html#l01249">Panic()</a>, <a class="el" href="_security_system_8c_source.html#l00193">SchemaInit()</a>, and <a class="el" href="_security_system_8c_source.html#l00916">StateChangeToAlarming()</a>.</p>

</div>
</div>
<a class="anchor" id="a57f58df4fd7d5efb217812f40e79a968"></a><!-- doxytag: member="SecuritySystem.c::i2Count" ref="a57f58df4fd7d5efb217812f40e79a968" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="_security_system_8h.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00035">35</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l01122">Arm()</a>, <a class="el" href="_e_o_l_8c_source.html#l00154">IsZoneTriggered()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l01084">SendAreaStat()</a>, <a class="el" href="_security_system_8c_source.html#l01537">SetArming()</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00412">SMTPTaskProcess()</a>, and <a class="el" href="_security_system_8c_source.html#l01296">StateChangeToArm()</a>.</p>

</div>
</div>
<a class="anchor" id="a45c8f1ff198e164451795c949f64747a"></a><!-- doxytag: member="SecuritySystem.c::iCount" ref="a45c8f1ff198e164451795c949f64747a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="_security_system_8h.html#a45c8f1ff198e164451795c949f64747a">iCount</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Counters that are used in a number of places, centraly defined to reduce memory use. </p>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00035">35</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l01122">Arm()</a>, <a class="el" href="_security_system_8c_source.html#l01192">ArmAway()</a>, <a class="el" href="_security_system_8c_source.html#l01162">ArmHome()</a>, <a class="el" href="_security_system_8c_source.html#l01220">ArmLatchkey()</a>, <a class="el" href="_authenticate_8c_source.html#l00188">Authenticate()</a>, <a class="el" href="_security_system_8c_source.html#l02162">bypassArea()</a>, <a class="el" href="_security_system_8c_source.html#l01091">ClearArmingFlags()</a>, <a class="el" href="_h_t_t_p_forms_8c_source.html#l00542">DecodeIntFromGET()</a>, <a class="el" href="_security_system_8c_source.html#l01938">Disarm()</a>, <a class="el" href="_security_system_8c_source.html#l02311">EnableArea()</a>, <a class="el" href="_authenticate_8c_source.html#l00592">HTTPCheckAuth()</a>, <a class="el" href="_h_t_t_p_forms_8c_source.html#l00028">HTTPExecuteGet()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00227">HTTPPrint_AlarmTypeList()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00796">HTTPPrint_AreaDesc()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00746">HTTPPrint_AreasAlarmed()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00771">HTTPPrint_AreasAlarmType()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00719">HTTPPrint_AreasArmed()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00638">HTTPPrint_AreasBypassed()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00664">HTTPPrint_AreasIsolated()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00693">HTTPPrint_AreasTriggered()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00823">HTTPPrint_AreaTampered()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00207">HTTPPrint_TypeList()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00570">HTTPPrint_ZoneDesc()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00418">HTTPPrint_ZonesAlarmed()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00521">HTTPPrint_ZonesAlarmType()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00546">HTTPPrint_ZonesAreaList()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00394">HTTPPrint_ZonesArmed()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00320">HTTPPrint_ZonesBypassed()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00443">HTTPPrint_ZonesEntry()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00345">HTTPPrint_ZonesIsolated()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00468">HTTPPrint_ZonesNO()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00596">HTTPPrint_ZonesTampered()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00370">HTTPPrint_ZonesTriggered()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00494">HTTPPrint_ZonesType()</a>, <a class="el" href="_security_system_8c_source.html#l02048">IsolateArea()</a>, <a class="el" href="_e_o_l_8c_source.html#l00154">IsZoneTriggered()</a>, <a class="el" href="_security_system_8c_source.html#l00433">LoadDefaultConfig()</a>, <a class="el" href="_authenticate_8c_source.html#l00487">ModifyUser()</a>, <a class="el" href="_h_t_t_p_forms_8c_source.html#l00526">SaveDeviceDescription()</a>, <a class="el" href="x_p_l_8c_source.html#l00969">SaveKVP()</a>, <a class="el" href="_authenticate_8c_source.html#l00447">SaveUserNameEEdata()</a>, <a class="el" href="_authenticate_8c_source.html#l00403">SaveUserPasswordEEdata()</a>, <a class="el" href="_security_system_8c_source.html#l00193">SchemaInit()</a>, <a class="el" href="_security_system_8c_source.html#l01642">SchemaProcessUDPMsg()</a>, <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00226">SendAlarmingMsg()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00711">SendAreaInfo()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00587">SendAreaList()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l01084">SendAreaStat()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00395">SendArmed()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00814">SendConfigCurrent()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l01002">SendGateStat()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00637">SendZoneInfo()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00545">SendZoneList()</a>, <a class="el" href="_security_system_8c_source.html#l01537">SetArming()</a>, <a class="el" href="_security_system_8c_source.html#l01296">StateChangeToArm()</a>, <a class="el" href="_security_system_8c_source.html#l01411">StateChangeToArmFailed()</a>, <a class="el" href="_authenticate_8c_source.html#l00039">xPLAuthenticate()</a>, <a class="el" href="_security_system_8c_source.html#l00515">xPLFactoryRestart()</a>, <a class="el" href="x_p_l_8c_source.html#l00938">xPLFindArrayInKVP()</a>, <a class="el" href="x_p_l_8c_source.html#l00829">xPLProcess_MsgField()</a>, <a class="el" href="x_p_l_8c_source.html#l00884">xPLProcessMsgCompair()</a>, <a class="el" href="x_p_l_8c_source.html#l00194">xPLSaveEEConfig()</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, and <a class="el" href="x_p_l_8c_source.html#l00300">XPLSendHeartBeat()</a>.</p>

</div>
</div>
<a class="anchor" id="ab4811cda05bf084486e0e786e68498ea"></a><!-- doxytag: member="SecuritySystem.c::LastZoneAlarmed" ref="ab4811cda05bf084486e0e786e68498ea" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="_security_system_8h.html#ab4811cda05bf084486e0e786e68498ea">LastZoneAlarmed</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The last zone to change to alarmed state. used in <a class="el" href="_s_m_t_p_8c.html" title="All things Email.">SMTP.c</a>. </p>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00039">39</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00193">SchemaInit()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l01002">SendGateStat()</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00412">SMTPTaskProcess()</a>, and <a class="el" href="_security_system_8c_source.html#l00916">StateChangeToAlarming()</a>.</p>

</div>
</div>
<a class="anchor" id="a23978f149ac907eb92db7176cbf9fec3"></a><!-- doxytag: member="SecuritySystem.c::NextZoneCheckDelay" ref="a23978f149ac907eb92db7176cbf9fec3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TICK <a class="el" href="_security_system_8c.html#a23978f149ac907eb92db7176cbf9fec3">NextZoneCheckDelay</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Delay used so we are not always checking the status of the zones. </p>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00027">27</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00780">IOTasks()</a>, and <a class="el" href="_security_system_8c_source.html#l00193">SchemaInit()</a>.</p>

</div>
</div>
<a class="anchor" id="a47fd0ffa1fbd1faa655f15085dc0d801"></a><!-- doxytag: member="SecuritySystem.c::PreviousAlarmState" ref="a47fd0ffa1fbd1faa655f15085dc0d801" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_security_system_8h.html#a8e5064a1f89199b73b816c1be8190bff">Alarm_States</a> <a class="el" href="_security_system_8c.html#a47fd0ffa1fbd1faa655f15085dc0d801">PreviousAlarmState</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The previous state of the alarm system, used when state change fails. </p>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00019">19</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l01938">Disarm()</a>, and <a class="el" href="_security_system_8c_source.html#l00193">SchemaInit()</a>.</p>

</div>
</div>
<a class="anchor" id="af91208010d91e259396c6c53d667fcba"></a><!-- doxytag: member="SecuritySystem.c::SecurityCommandText" ref="af91208010d91e259396c6c53d667fcba" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROM char* <a class="el" href="_security_system_8c.html#af91208010d91e259396c6c53d667fcba">SecurityCommandText</a>[]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment">
{
        <span class="stringliteral">&quot;arm&quot;</span>,
        <span class="stringliteral">&quot;arm-home&quot;</span>,
        <span class="stringliteral">&quot;arm-away&quot;</span>,
        <span class="stringliteral">&quot;arm-latchkey&quot;</span>,
        <span class="stringliteral">&quot;disarm&quot;</span>,
        <span class="stringliteral">&quot;panic&quot;</span>,
        <span class="stringliteral">&quot;isolate&quot;</span>,
        <span class="stringliteral">&quot;bypass&quot;</span>,
        <span class="stringliteral">&quot;enable&quot;</span>
}
</pre></div>
<p>Security command Types. </p>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00068">68</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l01642">SchemaProcessUDPMsg()</a>.</p>

</div>
</div>
<a class="anchor" id="a336f7f26b04a493c92ff0eae09249b04"></a><!-- doxytag: member="SecuritySystem.c::SecurityRequestsText" ref="a336f7f26b04a493c92ff0eae09249b04" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROM char* <a class="el" href="_security_system_8c.html#a336f7f26b04a493c92ff0eae09249b04">SecurityRequestsText</a>[]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment">
{
        <span class="stringliteral">&quot;gateinfo&quot;</span>,
        <span class="stringliteral">&quot;zonelist&quot;</span>,
        <span class="stringliteral">&quot;arealist&quot;</span>,
        <span class="stringliteral">&quot;zoneinfo&quot;</span>,
        <span class="stringliteral">&quot;areainfo&quot;</span>,
        <span class="stringliteral">&quot;gatestat&quot;</span>,
        <span class="stringliteral">&quot;zonestat&quot;</span>,
        <span class="stringliteral">&quot;areastat&quot;</span>
}
</pre></div>
<p>xPL feild values for the different security requests </p>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00109">109</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l01642">SchemaProcessUDPMsg()</a>.</p>

</div>
</div>
<a class="anchor" id="a207ce3b4724e48dd35dded40a44e14a8"></a><!-- doxytag: member="SecuritySystem.c::SirenTimer" ref="a207ce3b4724e48dd35dded40a44e14a8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TICK <a class="el" href="_security_system_8c.html#a207ce3b4724e48dd35dded40a44e14a8">SirenTimer</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Times the delay before acivating the external siren. </p>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00031">31</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l01249">Panic()</a>, <a class="el" href="_security_system_8c_source.html#l00993">StateChangeToAlarmed()</a>, <a class="el" href="_security_system_8c_source.html#l00916">StateChangeToAlarming()</a>, and <a class="el" href="_security_system_8c_source.html#l01025">TaskAlarming()</a>.</p>

</div>
</div>
<a class="anchor" id="a151f460a0544a0b747a38efae4124e24"></a><!-- doxytag: member="SecuritySystem.c::TriggeredEntryZone" ref="a151f460a0544a0b747a38efae4124e24" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TICK <a class="el" href="_security_system_8c.html#a151f460a0544a0b747a38efae4124e24">TriggeredEntryZone</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Triggered Entery Zone that set off the timer. </p>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00023">23</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00780">IOTasks()</a>, and <a class="el" href="_security_system_8c_source.html#l00193">SchemaInit()</a>.</p>

</div>
</div>
<a class="anchor" id="af1c18f7532835833de15218c3aa5d146"></a><!-- doxytag: member="SecuritySystem.c::UserID" ref="af1c18f7532835833de15218c3aa5d146" args="[USERNAMELENGTH]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="_security_system_8h.html#af1c18f7532835833de15218c3aa5d146">UserID</a>[USERNAMELENGTH]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Name of user. </p>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00037">37</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>Referenced by <a class="el" href="_authenticate_8c_source.html#l00188">Authenticate()</a>, <a class="el" href="_authenticate_8c_source.html#l00487">ModifyUser()</a>, <a class="el" href="_security_system_8c_source.html#l01642">SchemaProcessUDPMsg()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00395">SendArmed()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00504">SendDisarm()</a>, and <a class="el" href="_s_m_t_p_8c_source.html#l00412">SMTPTaskProcess()</a>.</p>

</div>
</div>
<a class="anchor" id="adaa5e54872217e9a75a2bfdadf293d12"></a><!-- doxytag: member="SecuritySystem.c::xPLConfig" ref="adaa5e54872217e9a75a2bfdadf293d12" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structx_p_l_configs.html">xPLConfigs</a> <a class="el" href="_security_system_8h.html#adaa5e54872217e9a75a2bfdadf293d12">xPLConfig</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Configuration entries. </p>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00136">136</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>Referenced by <a class="el" href="_h_t_t_p_forms_8c_source.html#l00028">HTTPExecuteGet()</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00228">HTTPPostSMTPConfig()</a>, <a class="el" href="_custom_s_n_t_p_8c_source.html#l00150">HTTPPrint_AES_Active()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00277">HTTPPrint_Alarming24Duration()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00271">HTTPPrint_AlarmingDuration()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00265">HTTPPrint_EntryDelay()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00259">HTTPPrint_ExitDelay()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00253">HTTPPrint_HeartBeatTime()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00248">HTTPPrint_InstanceName()</a>, <a class="el" href="_custom_s_n_t_p_8c_source.html#l00142">HTTPPrint_NTPServer()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00289">HTTPPrint_SirenDelay()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00283">HTTPPrint_SirenDelay24h()</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00148">HTTPPrint_SMTP_Active()</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00162">HTTPPrint_SMTP_ArmDisarm()</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00155">HTTPPrint_SMTP_OnlyInitalAlarm()</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00091">HTTPPrint_SMTP_Password()</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00108">HTTPPrint_SMTP_Port()</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00057">HTTPPrint_SMTP_Server()</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00039">HTTPPrint_SMTP_To()</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00074">HTTPPrint_SMTP_User()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00814">SendConfigCurrent()</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00613">SMTPQueueEmail()</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00412">SMTPTaskProcess()</a>, <a class="el" href="_custom_s_n_t_p_8c_source.html#l00237">SNTPClient()</a>, <a class="el" href="_authenticate_8c_source.html#l00039">xPLAuthenticate()</a>, <a class="el" href="x_p_l_8c_source.html#l00224">XPLHeartBeatTiming()</a>, <a class="el" href="x_p_l_8c_source.html#l00109">xPLInit()</a>, <a class="el" href="x_p_l_8c_source.html#l00496">XPLProcessUDPMsgHeader()</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, and <a class="el" href="x_p_l_8c_source.html#l00300">XPLSendHeartBeat()</a>.</p>

</div>
</div>
<a class="anchor" id="a129e6683e32d77565169cb282dc552c2"></a><!-- doxytag: member="SecuritySystem.c::xPLTaskList" ref="a129e6683e32d77565169cb282dc552c2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structx_p_l_task_lists.html">xPLTaskLists</a> <a class="el" href="_security_system_8h.html#a129e6683e32d77565169cb282dc552c2">xPLTaskList</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The Task buffer for sending xPL messages. </p>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00128">128</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>Referenced by <a class="el" href="_security_x_p_l_sender_8c_source.html#l00017">addxPLMessage()</a>, and <a class="el" href="_h_t_t_p_forms_8c_source.html#l00028">HTTPExecuteGet()</a>.</p>

</div>
</div>
<a class="anchor" id="af027bc313be80301e927d4717cb0dc90"></a><!-- doxytag: member="SecuritySystem.c::ZoneConfig" ref="af027bc313be80301e927d4717cb0dc90" args="[ZONECOUNT]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_zone_configs.html">ZoneConfigs</a> <a class="el" href="_security_system_8h.html#af027bc313be80301e927d4717cb0dc90">ZoneConfig</a>[ZONECOUNT]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stores each Zones configuration information. </p>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00143">143</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>Referenced by <a class="el" href="_security_x_p_l_sender_8c_source.html#l00017">addxPLMessage()</a>, <a class="el" href="_e_o_l_8c_source.html#l00023">CheckEOL()</a>, <a class="el" href="_h_t_t_p_forms_8c_source.html#l00028">HTTPExecuteGet()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00418">HTTPPrint_ZonesAlarmed()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00521">HTTPPrint_ZonesAlarmType()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00546">HTTPPrint_ZonesAreaList()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00394">HTTPPrint_ZonesArmed()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00320">HTTPPrint_ZonesBypassed()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00443">HTTPPrint_ZonesEntry()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00345">HTTPPrint_ZonesIsolated()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00468">HTTPPrint_ZonesNO()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00596">HTTPPrint_ZonesTampered()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00370">HTTPPrint_ZonesTriggered()</a>, <a class="el" href="_h_t_t_p_variables_8c_source.html#l00494">HTTPPrint_ZonesType()</a>, <a class="el" href="_e_o_l_8c_source.html#l00154">IsZoneTriggered()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00226">SendAlarmingMsg()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00395">SendArmed()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l01002">SendGateStat()</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00637">SendZoneInfo()</a>, and <a class="el" href="_security_x_p_l_sender_8c_source.html#l01180">SendZoneStat()</a>.</p>

</div>
</div>
<a class="anchor" id="aa5d4120799cb431593bcf942bea5e521"></a><!-- doxytag: member="SecuritySystem.c::ZoneTypesText" ref="aa5d4120799cb431593bcf942bea5e521" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROM char* <a class="el" href="_security_system_8h.html#aa5d4120799cb431593bcf942bea5e521">ZoneTypesText</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment">
{
        <span class="stringliteral">&quot;perimeter&quot;</span>,
        <span class="stringliteral">&quot;interior&quot;</span>,
        <span class="stringliteral">&quot;24hour&quot;</span>,
        <span class="stringliteral">&quot;&quot;</span>
}
</pre></div>
<p>determines the text outputed in the xpl message for each of the zone types </p>

<p>Definition at line <a class="el" href="_security_system_8c_source.html#l00058">58</a> of file <a class="el" href="_security_system_8c_source.html">SecuritySystem.c</a>.</p>

<p>Referenced by <a class="el" href="_h_t_t_p_variables_8c_source.html#l00207">HTTPPrint_TypeList()</a>, and <a class="el" href="_security_x_p_l_sender_8c_source.html#l00637">SendZoneInfo()</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Mon Apr 25 2011 23:31:10 for Alarm Cabinent by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
