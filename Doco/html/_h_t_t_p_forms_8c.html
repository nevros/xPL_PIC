<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Alarm Cabinent: PIC Code/HTTPForms.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Alarm Cabinent</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">PIC Code/HTTPForms.c File Reference</div>  </div>
</div>
<div class="contents">

<p>Processes data from HTML forms.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;TCPIP Stack/TCPIP.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="_security_system_8h_source.html">SecuritySystem.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="x_p_l_8h_source.html">xPL.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for HTTPForms.c:</div>
<div class="dyncontent">
<div class="center"><iframe src="_h_t_t_p_forms_8c__incl.svg" width="659" height="150" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="_h_t_t_p_forms_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_h_t_t_p_forms_8c.html#a22aa0be985d26b39cbd8b27b6be8fdf3">__CUSTOMHTTPAPP_C</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_h_t_t_p_forms_8c.html#a7d91fa3d3022b54068c26022b4db089d">HTTP_POST_CONFIG_MAX_LEN</a>&#160;&#160;&#160;(HTTP_MAX_DATA_LEN - sizeof(<a class="el" href="x_p_l_8h.html#a67540808395519081be1333c4e9aa1f8">AppConfig</a>) - 3)</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static HTTP_IO_RESULT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_h_t_t_p_forms_8c.html#a53d6ed1464f1ff112f0b356601ed8cdf">HTTPPostConfig</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_h_t_t_p_forms_8c.html#aa3c409ffd21320f7da0499631f024dd9">SaveDeviceDescription</a> (int StartAddress, BYTE *p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HTTP_IO_RESULT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_h_t_t_p_forms_8c.html#a686ae35a16ecb63daffafcd015ddb070">HTTPExecuteGet</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes all HTTP GETS.  <a href="#a686ae35a16ecb63daffafcd015ddb070"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_h_t_t_p_forms_8c.html#a6e8f2eab6326e5e8d0884ac0f3329628">DecodeIntFromGET</a> (BYTE *GETptr, rom char *DebugMesg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Decodes and int value from a HTTP buffer (GET)  <a href="#a6e8f2eab6326e5e8d0884ac0f3329628"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HTTP_IO_RESULT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_h_t_t_p_forms_8c.html#a821765eef4f0b64f901828f4d667fb17">HTTPExecutePost</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes HTTP POST's.  <a href="#a821765eef4f0b64f901828f4d667fb17"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Processes data from HTML forms. </p>

<p>Definition in file <a class="el" href="_h_t_t_p_forms_8c_source.html">HTTPForms.c</a>.</p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="a22aa0be985d26b39cbd8b27b6be8fdf3"></a><!-- doxytag: member="HTTPForms.c::__CUSTOMHTTPAPP_C" ref="a22aa0be985d26b39cbd8b27b6be8fdf3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define __CUSTOMHTTPAPP_C</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_h_t_t_p_forms_8c_source.html#l00003">3</a> of file <a class="el" href="_h_t_t_p_forms_8c_source.html">HTTPForms.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7d91fa3d3022b54068c26022b4db089d"></a><!-- doxytag: member="HTTPForms.c::HTTP_POST_CONFIG_MAX_LEN" ref="a7d91fa3d3022b54068c26022b4db089d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HTTP_POST_CONFIG_MAX_LEN&#160;&#160;&#160;(HTTP_MAX_DATA_LEN - sizeof(<a class="el" href="x_p_l_8h.html#a67540808395519081be1333c4e9aa1f8">AppConfig</a>) - 3)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function: HTTP_IO_RESULT <a class="el" href="_h_t_t_p_forms_8c.html#a53d6ed1464f1ff112f0b356601ed8cdf">HTTPPostConfig(void)</a></p>
<p>PreCondition: curHTTP is loaded</p>
<p>Input: None</p>
<p>Output: HTTP_IO_DONE on success HTTP_IO_NEED_DATA if more data is requested HTTP_IO_WAITING if waiting for asynchronous process</p>
<p>Side Effects: None</p>
<p>Overview: This function reads an input parameter from the POSTed data, and writes that string to the AppConfig (NIC related config).</p>
<p>Note: None </p>

<p>Definition at line <a class="el" href="_h_t_t_p_forms_8c_source.html#l00626">626</a> of file <a class="el" href="_h_t_t_p_forms_8c_source.html">HTTPForms.c</a>.</p>

<p>Referenced by <a class="el" href="_h_t_t_p_forms_8c_source.html#l00628">HTTPPostConfig()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a6e8f2eab6326e5e8d0884ac0f3329628"></a><!-- doxytag: member="HTTPForms.c::DecodeIntFromGET" ref="a6e8f2eab6326e5e8d0884ac0f3329628" args="(BYTE *GETptr, rom char *DebugMesg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DecodeIntFromGET </td>
          <td>(</td>
          <td class="paramtype">BYTE *&#160;</td>
          <td class="paramname"><em>GETptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">rom char *&#160;</td>
          <td class="paramname"><em>DebugMesg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Decodes and int value from a HTTP buffer (GET) </p>

<p>Definition at line <a class="el" href="_h_t_t_p_forms_8c_source.html#l00542">542</a> of file <a class="el" href="_h_t_t_p_forms_8c_source.html">HTTPForms.c</a>.</p>

<p>References <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_hardware_profile_8h_source.html#l00201">putsUART</a>, and <a class="el" href="_h_t_t_p_variables_8c_source.html#l00031">Tempdigits</a>.</p>

<p>Referenced by <a class="el" href="_h_t_t_p_forms_8c_source.html#l00028">HTTPExecuteGet()</a>, and <a class="el" href="_authenticate_8c_source.html#l00487">ModifyUser()</a>.</p>
<div class="fragment"><pre class="fragment">                                                         {

        <span class="keywordtype">char</span> <a class="code" href="_h_t_t_p_variables_8c.html#a4a12a73a2ac88a3f8232f8fd13a932b4" title="used for int conversions">Tempdigits</a>[4];

        memset(Tempdigits,<span class="charliteral">&#39;\0&#39;</span>,<span class="keyword">sizeof</span>(Tempdigits));

        <span class="keywordflow">for</span>(<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0;(*GETptr != <span class="charliteral">&#39;\0&#39;</span>) &amp;&amp; (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <span class="keyword">sizeof</span>(Tempdigits) -1); <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                <span class="keywordflow">if</span>((*GETptr &lt; <span class="charliteral">&#39;0&#39;</span>) || (*GETptr &gt; <span class="charliteral">&#39;9&#39;</span>)) *GETptr = <span class="charliteral">&#39;0&#39;</span>; <span class="comment">// only accept 0 - 9</span>
                Tempdigits[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>] = *GETptr;
                GETptr++;
        }<span class="comment">// for</span>

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>(DebugMesg);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; = &quot;</span>);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(Tempdigits);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*) <span class="stringliteral">&quot;\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        <span class="keywordflow">if</span> (atoi(Tempdigits) &gt;= 1) <span class="keywordflow">return</span> atoi(Tempdigits);
        <span class="keywordflow">return</span> 0;
}
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_h_t_t_p_forms_8c_a6e8f2eab6326e5e8d0884ac0f3329628_icgraph.svg" width="683" height="110" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a686ae35a16ecb63daffafcd015ddb070"></a><!-- doxytag: member="HTTPForms.c::HTTPExecuteGet" ref="a686ae35a16ecb63daffafcd015ddb070" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HTTP_IO_RESULT HTTPExecuteGet </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Processes all HTTP GETS. </p>

<p>Definition at line <a class="el" href="_h_t_t_p_forms_8c_source.html#l00028">28</a> of file <a class="el" href="_h_t_t_p_forms_8c_source.html">HTTPForms.c</a>.</p>

<p>References <a class="el" href="_security_x_p_l_sender_8c_source.html#l00017">addxPLMessage()</a>, <a class="el" href="_security_system_8h_source.html#l00207">xPLConfigs::Alarming24Duration</a>, <a class="el" href="_security_system_8h_source.html#l00206">xPLConfigs::AlarmingDuration</a>, <a class="el" href="_security_system_8c_source.html#l00017">AlarmState</a>, <a class="el" href="_security_system_8c_source.html#l00149">AreaConfig</a>, <a class="el" href="_security_system_8h_source.html#l00178">ZoneConfigs::AreaList</a>, <a class="el" href="_security_system_8c_source.html#l01192">ArmAway()</a>, <a class="el" href="_security_system_8c_source.html#l01162">ArmHome()</a>, <a class="el" href="_security_system_8c_source.html#l01220">ArmLatchkey()</a>, <a class="el" href="_security_system_8c_source.html#l01091">ClearArmingFlags()</a>, <a class="el" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>, <a class="el" href="_h_t_t_p_forms_8c_source.html#l00542">DecodeIntFromGET()</a>, <a class="el" href="_security_system_8h_source.html#l00012">DEVICEDESCLENGTH</a>, <a class="el" href="_security_system_8c_source.html#l01938">Disarm()</a>, <a class="el" href="_security_system_8h_source.html#l00110">Disarmed</a>, <a class="el" href="_security_system_8h_source.html#l00042">EEDATASTART_AREA</a>, <a class="el" href="_security_system_8h_source.html#l00044">EEDATASTART_DEVICEDESC</a>, <a class="el" href="_security_system_8h_source.html#l00040">EEDATASTART_XPL</a>, <a class="el" href="_security_system_8h_source.html#l00041">EEDATASTART_ZONE</a>, <a class="el" href="_security_system_8h_source.html#l00205">xPLConfigs::EntryDelay</a>, <a class="el" href="_security_system_8h_source.html#l00204">xPLConfigs::ExitDelay</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8h_source.html#l00056">GATEWAYCHANGEDDELAY</a>, <a class="el" href="_security_system_8h_source.html#l00276">xPLTaskLists::GatewayChangedTimer</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_security_system_8h_source.html#l00191">AreaConfigs::IsChangeFlagged</a>, <a class="el" href="_security_system_8h_source.html#l00173">ZoneConfigs::IsChangeFlagged</a>, <a class="el" href="_security_system_8h_source.html#l00168">ZoneConfigs::IsEntry</a>, <a class="el" href="_security_system_8h_source.html#l00167">ZoneConfigs::IsNO</a>, <a class="el" href="_authenticate_8c_source.html#l00487">ModifyUser()</a>, <a class="el" href="_security_system_8h_source.html#l00220">xPLConfigs::NTP_Server</a>, <a class="el" href="_security_system_8h_source.html#l00062">NTP_TEST_DONE</a>, <a class="el" href="_security_system_8h_source.html#l00063">NTP_TEST_PROGRESS</a>, <a class="el" href="_security_system_8h_source.html#l00067">NTP_TEST_TIMEOUT</a>, <a class="el" href="_custom_s_n_t_p_8c_source.html#l00137">NTPTestResponse</a>, <a class="el" href="_security_system_8c_source.html#l01249">Panic()</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_h_t_t_p_forms_8c_source.html#l00526">SaveDeviceDescription()</a>, <a class="el" href="_security_system_8h_source.html#l00209">xPLConfigs::SirenDelay</a>, <a class="el" href="_security_system_8h_source.html#l00208">xPLConfigs::SirenDelay24h</a>, <a class="el" href="_security_system_8h_source.html#l00321">SM_HOME</a>, <a class="el" href="_security_system_8h_source.html#l00332">SM_SHORT_WAIT</a>, <a class="el" href="_security_system_8h_source.html#l00333">SM_WAIT</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00030">SMPTTestResult</a>, <a class="el" href="_security_system_8h_source.html#l00287">SMTP_Test</a>, <a class="el" href="_security_system_8h_source.html#l00060">SMTP_TEST_DONE</a>, <a class="el" href="_security_system_8h_source.html#l00059">SMTP_TEST_WAITING</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00613">SMTPQueueEmail()</a>, <a class="el" href="_custom_s_n_t_p_8c_source.html#l00138">SNTPState</a>, <a class="el" href="_security_system_8h_source.html#l00245">TB_Bypass</a>, <a class="el" href="_security_system_8h_source.html#l00246">TB_Enable</a>, <a class="el" href="_security_system_8h_source.html#l00244">TB_Isolate</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="_security_system_8h_source.html#l00215">xPLConfigs::Use_AES</a>, <a class="el" href="_security_system_8h_source.html#l00202">xPLConfigs::xPL_Heartbeat_Interval</a>, <a class="el" href="_security_system_8h_source.html#l00203">xPLConfigs::xPL_My_Instance_ID</a>, <a class="el" href="_security_system_8c_source.html#l00136">xPLConfig</a>, <a class="el" href="x_p_l_8c_source.html#l00194">xPLSaveEEConfig()</a>, <a class="el" href="_security_system_8c_source.html#l00128">xPLTaskList</a>, <a class="el" href="_security_system_8h_source.html#l00194">AreaConfigs::ZoneAlarmType</a>, <a class="el" href="_security_system_8h_source.html#l00177">ZoneConfigs::ZoneAlarmType</a>, <a class="el" href="_security_system_8c_source.html#l00143">ZoneConfig</a>, <a class="el" href="_security_system_8h_source.html#l00007">ZONECOUNT</a>, and <a class="el" href="_security_system_8h_source.html#l00176">ZoneConfigs::ZoneType</a>.</p>
<div class="fragment"><pre class="fragment">                                    {

        BYTE *ptr;
        BYTE filename[20];
        <span class="keywordtype">int</span> DeviceID = 0;
        <span class="keywordtype">int</span> <span class="keywordtype">short</span> ExitDelay;

        <span class="comment">// Load the file name</span>
        <span class="comment">// Make sure BYTE filename[] above is large enough for your longest name</span>
        MPFSGetFilename(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.file, filename, 20);
        <span class="comment">/*</span>
<span class="comment">         #if defined(DEBUG_UART)</span>
<span class="comment">         putrsUART((ROM char*)&quot;HTTP Get received from file:&quot;);</span>
<span class="comment">         putsUART(filename);</span>
<span class="comment">         putrsUART((ROM char*)&quot;\r\n&quot;);</span>
<span class="comment">         #endif</span>
<span class="comment">         */</span>


        <span class="comment">// ######### Zone configuration #########</span>
        <span class="keywordflow">if</span>(!memcmppgm2ram(filename, <span class="stringliteral">&quot;admin/zoneconfig.htm&quot;</span>, 20)) {

                <span class="keywordflow">if</span>(<a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> == <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfacf99f746f17e92913d15be9fc92d708c">Disarmed</a>) {


                        <span class="comment">//ID of the zone</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;id&quot;</span>);
                        <span class="keywordflow">if</span>(*ptr)
                                DeviceID = <a class="code" href="_h_t_t_p_forms_8c.html#a6e8f2eab6326e5e8d0884ac0f3329628" title="Decodes and int value from a HTTP buffer (GET)">DecodeIntFromGET</a>(ptr,(ROM BYTE *)<span class="stringliteral">&quot;Zone ID&quot;</span>);

                        <span class="comment">// Bypass the zone</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;bypass&quot;</span>);
                        <span class="keywordflow">if</span>(*ptr == <span class="charliteral">&#39;1&#39;</span>)  {
                                <a class="code" href="_security_system_8c.html#a491f8822a8274ca5244c41d226e7136e">ClearArmingFlags</a>();
                                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[DeviceID].<a class="code" href="struct_zone_configs.html#a3060ff1a56645c2b505274a4dd455582" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                                <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba1a2f5c1ced4a7a6ef76d5a6e0ebf26f1">TB_Bypass</a>);
                                <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>, <a class="code" href="_security_system_8h.html#a84d6a5346b04effd1160f34d13abd01c">EEDATASTART_ZONE</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>));      <span class="comment">//now save the changes</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Bypass of Zone\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                <span class="keywordflow">return</span> HTTP_IO_DONE;
                        }

                        <span class="comment">// Isolate the zone</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;isolate&quot;</span>);
                        <span class="keywordflow">if</span>(*ptr == <span class="charliteral">&#39;1&#39;</span>)  {
                                <a class="code" href="_security_system_8c.html#a491f8822a8274ca5244c41d226e7136e">ClearArmingFlags</a>();
                                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[DeviceID].<a class="code" href="struct_zone_configs.html#a3060ff1a56645c2b505274a4dd455582" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                                <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba50a9d18dd2121632a2d41890f9e0dcad">TB_Isolate</a>);
                                <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>, <a class="code" href="_security_system_8h.html#a84d6a5346b04effd1160f34d13abd01c">EEDATASTART_ZONE</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>));      <span class="comment">//now save the changes</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Isolate\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                <span class="keywordflow">return</span> HTTP_IO_DONE;
                        }


                        <span class="comment">// Enable the zone</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;enable&quot;</span>);
                        <span class="keywordflow">if</span>(*ptr == <span class="charliteral">&#39;1&#39;</span>)  {
                                <a class="code" href="_security_system_8c.html#a491f8822a8274ca5244c41d226e7136e">ClearArmingFlags</a>();
                                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[DeviceID].<a class="code" href="struct_zone_configs.html#a3060ff1a56645c2b505274a4dd455582" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                                <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38debae35285ccd71be17edd6c76911642a84f">TB_Enable</a>);
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;web enable\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                <span class="keywordflow">return</span> HTTP_IO_DONE;
                        }

                        <span class="comment">// Normaly Open</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;no&quot;</span>);

                        <span class="keywordflow">if</span>(*ptr == <span class="charliteral">&#39;1&#39;</span>)  {
                                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[DeviceID].<a class="code" href="struct_zone_configs.html#abe35b13843a6aa14b59d61f31673204b" title="Is the zone Normally Open (fales = Normally Closed)">IsNO</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Normaly Open = True\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>, <a class="code" href="_security_system_8h.html#a84d6a5346b04effd1160f34d13abd01c">EEDATASTART_ZONE</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>));      <span class="comment">//now save the changes</span>
                                <span class="keywordflow">return</span> HTTP_IO_DONE;
                        }
                        <span class="keywordflow">if</span>(*ptr == <span class="charliteral">&#39;0&#39;</span>) {
                                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[DeviceID].<a class="code" href="struct_zone_configs.html#abe35b13843a6aa14b59d61f31673204b" title="Is the zone Normally Open (fales = Normally Closed)">IsNO</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Normaly Open = False\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>, <a class="code" href="_security_system_8h.html#a84d6a5346b04effd1160f34d13abd01c">EEDATASTART_ZONE</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>));      <span class="comment">//now save the changes</span>
                                <span class="keywordflow">return</span> HTTP_IO_DONE;
                        }


                        <span class="comment">// Entry Zone</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;entry&quot;</span>);

                        <span class="keywordflow">if</span>(*ptr == <span class="charliteral">&#39;1&#39;</span>) {
                                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[DeviceID].<a class="code" href="struct_zone_configs.html#a4ee15171174e0a37eb536e320374b409" title="Is this zone an entry and exit point.">IsEntry</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Entry = True\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>, <a class="code" href="_security_system_8h.html#a84d6a5346b04effd1160f34d13abd01c">EEDATASTART_ZONE</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>));      <span class="comment">//now save the changes</span>
                                <span class="keywordflow">return</span> HTTP_IO_DONE;
                        }
                        <span class="keywordflow">if</span>(*ptr == <span class="charliteral">&#39;0&#39;</span>)  {
                                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[DeviceID].<a class="code" href="struct_zone_configs.html#a4ee15171174e0a37eb536e320374b409" title="Is this zone an entry and exit point.">IsEntry</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Entry = False\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>, <a class="code" href="_security_system_8h.html#a84d6a5346b04effd1160f34d13abd01c">EEDATASTART_ZONE</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>));      <span class="comment">//now save the changes</span>
                                <span class="keywordflow">return</span> HTTP_IO_DONE;
                        }


                        <span class="comment">// Zone type ( perimeter,interior,24hour)</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;type&quot;</span>);
                        <span class="keywordflow">if</span>((*ptr)&amp;&amp; (*ptr != <span class="charliteral">&#39;a&#39;</span>)) {
                                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[DeviceID].<a class="code" href="struct_zone_configs.html#af50f6bb1b97631e41efc90ed3a45d569" title="xPL Type of zone (perimeter, interior or 24 hour)">ZoneType</a> = <a class="code" href="_h_t_t_p_forms_8c.html#a6e8f2eab6326e5e8d0884ac0f3329628" title="Decodes and int value from a HTTP buffer (GET)">DecodeIntFromGET</a>(ptr, (ROM BYTE *)<span class="stringliteral">&quot;Zone type&quot;</span>);
                                <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#a48445b8ac06ecea79af8a778d3a7f6cc" title="Provides a delay in sending the xPL gateway changed message.">GatewayChangedTimer</a> = TickGet() + (<a class="code" href="_security_system_8h.html#a4abfbdf2d01de8b44897b9992a885914">GATEWAYCHANGEDDELAY</a> * TICK_SECOND);
                                <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>, <a class="code" href="_security_system_8h.html#a84d6a5346b04effd1160f34d13abd01c">EEDATASTART_ZONE</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>));      <span class="comment">//now save the changes</span>
                                <span class="keywordflow">return</span> HTTP_IO_DONE;
                        }<span class="comment">//if(prt)</span>


                        <span class="comment">// Zone alarm type ( fire, flood gas)</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;alarmtype&quot;</span>);
                        <span class="keywordflow">if</span>((*ptr)&amp;&amp; (*ptr != <span class="charliteral">&#39;a&#39;</span>)) {
                                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[DeviceID].<a class="code" href="struct_zone_configs.html#ab47b513fec97f9480895eebb17d759bd" title="xPL Alarm type (eg fire, flood, gas etc)">ZoneAlarmType</a> = <a class="code" href="_h_t_t_p_forms_8c.html#a6e8f2eab6326e5e8d0884ac0f3329628" title="Decodes and int value from a HTTP buffer (GET)">DecodeIntFromGET</a>(ptr, (ROM BYTE *)<span class="stringliteral">&quot;Zone alarm type&quot;</span>);
                                <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#a48445b8ac06ecea79af8a778d3a7f6cc" title="Provides a delay in sending the xPL gateway changed message.">GatewayChangedTimer</a> = TickGet() + (<a class="code" href="_security_system_8h.html#a4abfbdf2d01de8b44897b9992a885914">GATEWAYCHANGEDDELAY</a> * TICK_SECOND);
                                <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>, <a class="code" href="_security_system_8h.html#a84d6a5346b04effd1160f34d13abd01c">EEDATASTART_ZONE</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>));      <span class="comment">//now save the changes</span>
                                <span class="keywordflow">return</span> HTTP_IO_DONE;
                        }<span class="comment">//if(prt)</span>



                        <span class="comment">// Zones area list as a single digit integer</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;arealist&quot;</span>);
                        <span class="keywordflow">if</span>((*ptr)&amp;&amp; (*ptr != <span class="charliteral">&#39;a&#39;</span>)) {
                                <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[DeviceID].<a class="code" href="struct_zone_configs.html#a2c6fd882d20cac5f28aa0b1e11d35b09" title="Bit field list of the areas that this zone is a member of.">AreaList</a> = <a class="code" href="_h_t_t_p_forms_8c.html#a6e8f2eab6326e5e8d0884ac0f3329628" title="Decodes and int value from a HTTP buffer (GET)">DecodeIntFromGET</a>(ptr, (ROM BYTE *)<span class="stringliteral">&quot;Zone area list&quot;</span>);
                                <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#a48445b8ac06ecea79af8a778d3a7f6cc" title="Provides a delay in sending the xPL gateway changed message.">GatewayChangedTimer</a> = TickGet() + (<a class="code" href="_security_system_8h.html#a4abfbdf2d01de8b44897b9992a885914">GATEWAYCHANGEDDELAY</a> * TICK_SECOND);
                                <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>, <a class="code" href="_security_system_8h.html#a84d6a5346b04effd1160f34d13abd01c">EEDATASTART_ZONE</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>));      <span class="comment">//now save the changes</span>
                                <span class="keywordflow">return</span> HTTP_IO_DONE;
                        }<span class="comment">//if(prt)</span>


                        <span class="comment">// Zones description</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;desc&quot;</span>);
                        <span class="keywordflow">if</span>((*ptr)&amp;&amp; (*ptr != <span class="charliteral">&#39;\0&#39;</span>)) {

                                <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = <a class="code" href="_security_system_8h.html#aa099c08420f2e838607142a7edaa8aa8">EEDATASTART_DEVICEDESC</a>;
                                <span class="keywordflow">if</span> (DeviceID != 0)
                                        <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> += ((int)DeviceID * <a class="code" href="_security_system_8h.html#a61145d9f711460b73af75ef123fc76f6">DEVICEDESCLENGTH</a>) + 1;

                                <a class="code" href="_h_t_t_p_forms_8c.html#aa3c409ffd21320f7da0499631f024dd9">SaveDeviceDescription</a>(<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>, ptr);
                                <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#a48445b8ac06ecea79af8a778d3a7f6cc" title="Provides a delay in sending the xPL gateway changed message.">GatewayChangedTimer</a> = TickGet() + (<a class="code" href="_security_system_8h.html#a4abfbdf2d01de8b44897b9992a885914">GATEWAYCHANGEDDELAY</a> * TICK_SECOND);
                                <span class="keywordflow">return</span> HTTP_IO_DONE;
                        }<span class="comment">//if(prt)</span>

                        strcpypgm2ram((<span class="keywordtype">char</span>*)<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM <span class="keywordtype">void</span>*)<span class="stringliteral">&quot;/admin/zoneconfig.htm&quot;</span>);
                        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.httpStatus = HTTP_REDIRECT;


                } <span class="comment">//    if(AlarmState == Disarmed) {</span>
                <span class="keywordflow">else</span> {
                        strcpypgm2ram((<span class="keywordtype">char</span>*)<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM <span class="keywordtype">void</span>*)<span class="stringliteral">&quot;/admin/disarmconfig_error.htm&quot;</span>);
                        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.httpStatus = HTTP_REDIRECT;
                } <span class="comment">// AlarmState != Disarmed</span>

        }<span class="comment">// zoneconfig.htm</span>

        <span class="comment">// ######### Area configuration #########</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!memcmppgm2ram(filename, <span class="stringliteral">&quot;admin/areaconfig.htm&quot;</span>, 20)) {

                <span class="keywordflow">if</span>(<a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> == <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfacf99f746f17e92913d15be9fc92d708c">Disarmed</a>) {

                        <span class="comment">//ID of the Area</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;id&quot;</span>);
                        <span class="keywordflow">if</span>(*ptr)
                                DeviceID = <a class="code" href="_h_t_t_p_forms_8c.html#a6e8f2eab6326e5e8d0884ac0f3329628" title="Decodes and int value from a HTTP buffer (GET)">DecodeIntFromGET</a>(ptr,(ROM BYTE *)<span class="stringliteral">&quot;Area ID&quot;</span>);

                        <span class="comment">// Bypass the area</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;bypass&quot;</span>);
                        <span class="keywordflow">if</span>(*ptr == <span class="charliteral">&#39;1&#39;</span>)  {
                                <a class="code" href="_security_system_8c.html#a491f8822a8274ca5244c41d226e7136e">ClearArmingFlags</a>();
                                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[DeviceID].<a class="code" href="struct_area_configs.html#a711da45ad4b0c06e1aaee9d2ba6108aa" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                                <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba1a2f5c1ced4a7a6ef76d5a6e0ebf26f1">TB_Bypass</a>);
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Bypass of Area\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                        }


                        <span class="comment">// Isolate the area</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;isolate&quot;</span>);
                        <span class="keywordflow">if</span>(*ptr == <span class="charliteral">&#39;1&#39;</span>)  {
                                <a class="code" href="_security_system_8c.html#a491f8822a8274ca5244c41d226e7136e">ClearArmingFlags</a>();
                                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[DeviceID].<a class="code" href="struct_area_configs.html#a711da45ad4b0c06e1aaee9d2ba6108aa" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                                <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38deba50a9d18dd2121632a2d41890f9e0dcad">TB_Isolate</a>);
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Isolate Area\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                        }

                        <span class="comment">// Enable the area</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;enable&quot;</span>);
                        <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;1&#39;</span>)  {
                                <a class="code" href="_security_system_8c.html#a491f8822a8274ca5244c41d226e7136e">ClearArmingFlags</a>();
                                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[DeviceID].<a class="code" href="struct_area_configs.html#a711da45ad4b0c06e1aaee9d2ba6108aa" title="Used for state changes.">IsChangeFlagged</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                                <a class="code" href="_security_system_8h.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="code" href="_security_system_8h.html#a0a181dc5b89b91c60e4db10971c38debae35285ccd71be17edd6c76911642a84f">TB_Enable</a>);
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Enable Area\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                        }


                        <span class="comment">// Area alarm type ( perimeter,interior,24hour)</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;alarmtype&quot;</span>);
                        <span class="keywordflow">if</span> ((*ptr)&amp;&amp; (*ptr != <span class="charliteral">&#39;a&#39;</span>)) {
                                <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[DeviceID].<a class="code" href="struct_area_configs.html#a022bb5e6aeee73a394075b335515dd44" title="xPL Alarm type (eg fire, flood, gas etc)">ZoneAlarmType</a> = <a class="code" href="_h_t_t_p_forms_8c.html#a6e8f2eab6326e5e8d0884ac0f3329628" title="Decodes and int value from a HTTP buffer (GET)">DecodeIntFromGET</a>(ptr, (ROM BYTE *)<span class="stringliteral">&quot;Zone Alarm Type&quot;</span>);
                                <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#a48445b8ac06ecea79af8a778d3a7f6cc" title="Provides a delay in sending the xPL gateway changed message.">GatewayChangedTimer</a> = TickGet() + (<a class="code" href="_security_system_8h.html#a4abfbdf2d01de8b44897b9992a885914">GATEWAYCHANGEDDELAY</a> * TICK_SECOND);
                        }<span class="comment">//if(prt)</span>

                        <span class="comment">// Area description</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;desc&quot;</span>);
                        <span class="keywordflow">if</span>((*ptr) &amp;&amp; (*ptr != <span class="charliteral">&#39;\0&#39;</span>)) {

                                <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = (int)<a class="code" href="_security_system_8h.html#aa099c08420f2e838607142a7edaa8aa8">EEDATASTART_DEVICEDESC</a> + ((<span class="keywordtype">int</span>)<a class="code" href="_security_system_8h.html#a61145d9f711460b73af75ef123fc76f6">DEVICEDESCLENGTH</a> * (int)<a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>) +1;
                                <span class="keywordflow">if</span> (DeviceID != 0)
                                        <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> += DeviceID * (int)<a class="code" href="_security_system_8h.html#a61145d9f711460b73af75ef123fc76f6">DEVICEDESCLENGTH</a>;

                                <a class="code" href="_h_t_t_p_forms_8c.html#aa3c409ffd21320f7da0499631f024dd9">SaveDeviceDescription</a>( <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>, ptr);
                                <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#a48445b8ac06ecea79af8a778d3a7f6cc" title="Provides a delay in sending the xPL gateway changed message.">GatewayChangedTimer</a> = TickGet() + (<a class="code" href="_security_system_8h.html#a4abfbdf2d01de8b44897b9992a885914">GATEWAYCHANGEDDELAY</a> * TICK_SECOND);
                        }<span class="comment">//if(prt)</span>


                        <span class="comment">//now save the changes</span>
                        <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>, <a class="code" href="_security_system_8h.html#a61748f301d79db0c4ecb09432705d105">EEDATASTART_AREA</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>));

                        strcpypgm2ram((<span class="keywordtype">char</span>*)<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM <span class="keywordtype">void</span>*)<span class="stringliteral">&quot;/admin/areaconfig.htm&quot;</span>);
                        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.httpStatus = HTTP_REDIRECT;
                        <span class="keywordflow">return</span> HTTP_IO_DONE;


                } <span class="comment">//    if(AlarmState == Disarmed)</span>
                <span class="keywordflow">else</span> {
                        strcpypgm2ram((<span class="keywordtype">char</span>*)<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM <span class="keywordtype">void</span>*)<span class="stringliteral">&quot;/admin/disarmconfig_error.htm&quot;</span>);
                        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.httpStatus = HTTP_REDIRECT;
                } <span class="comment">// AlarmState != Disarmed</span>


        } <span class="comment">// areaconfig.htm</span>

        <span class="comment">//######### Alarm Control #############</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!memcmppgm2ram(filename, <span class="stringliteral">&quot;control.htm&quot;</span>, 11)) {

                <span class="comment">// Delay</span>
                ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;delay&quot;</span>);

                <span class="keywordflow">if</span>(*ptr == <span class="charliteral">&#39;d&#39;</span>) {
                        <span class="comment">// load default value</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Exit delay, default\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                        ExitDelay = <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#ad7d66e7cbab58c033063b466e51e0f13" title="Number of seconds you have to exit from an entry/exit zone.">ExitDelay</a>;
                } <span class="comment">//d</span>

                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(*ptr)
                        ExitDelay = <a class="code" href="_h_t_t_p_forms_8c.html#a6e8f2eab6326e5e8d0884ac0f3329628" title="Decodes and int value from a HTTP buffer (GET)">DecodeIntFromGET</a>(ptr,(ROM BYTE *) <span class="stringliteral">&quot;Exit delay&quot;</span>);

                <span class="keywordflow">else</span>
                        ExitDelay = <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#ad7d66e7cbab58c033063b466e51e0f13" title="Number of seconds you have to exit from an entry/exit zone.">ExitDelay</a>;

                <span class="comment">// Control</span>
                ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;control&quot;</span>);

                <span class="keywordflow">if</span>(*ptr == <span class="charliteral">&#39;d&#39;</span>) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Disarm Alarm system\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                        <a class="code" href="_security_system_8c.html#a3ca20943ab34a0d560cd22d88c0ba324">Disarm</a>();
                } <span class="comment">//d</span>

                <span class="keywordflow">if</span>(*ptr == <span class="charliteral">&#39;h&#39;</span>) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Arm Home\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                        <a class="code" href="_security_system_8c.html#afba09fe6505822eb03078088f14ef89b">ArmHome</a> (ExitDelay);
                } <span class="comment">//h</span>


                <span class="keywordflow">if</span>(*ptr == <span class="charliteral">&#39;a&#39;</span>) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Arm Away\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                        <a class="code" href="_security_system_8c.html#af7b9ebfe6bb90725304e83cadb4cced8">ArmAway</a> (ExitDelay);
                } <span class="comment">//a</span>

                <span class="keywordflow">if</span>(*ptr == <span class="charliteral">&#39;l&#39;</span>) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Arm Latch key\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                        <a class="code" href="_security_system_8c.html#aad7b06369f4a1f3b427e137a9f84a5c0">ArmLatchkey</a> (ExitDelay);

                } <span class="comment">//l</span>

                <span class="keywordflow">if</span>(*ptr == <span class="charliteral">&#39;p&#39;</span>) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Panic\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                        <a class="code" href="_security_system_8c.html#a1e04428a714d6c8c97cb8685f96933ee">Panic</a> ();
                } <span class="comment">//p</span>


                <span class="comment">// Clean the URL</span>
                strcpypgm2ram((<span class="keywordtype">char</span>*)<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM <span class="keywordtype">void</span>*)<span class="stringliteral">&quot;/control.htm&quot;</span>);
                <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.httpStatus = HTTP_REDIRECT;
                <span class="keywordflow">return</span> HTTP_IO_DONE;

        } <span class="comment">//control.htm</span>

        <span class="comment">//######### Alarm Configuration #############</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!memcmppgm2ram(filename, <span class="stringliteral">&quot;admin/alarmconfig.ht&quot;</span>, 20)) {

                <span class="keywordflow">if</span>(<a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> == <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfacf99f746f17e92913d15be9fc92d708c">Disarmed</a>) {


                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;TestNTP&quot;</span>);
                        <span class="keywordflow">if</span>(*ptr ==<span class="charliteral">&#39;1&#39;</span>) {
                                <span class="keywordflow">if</span> (<a class="code" href="_custom_s_n_t_p_8c.html#a6fec3fdfff459a953822db2e8ff9b462" title="stores the response from a SNTP test">NTPTestResponse</a> == <a class="code" href="_security_system_8h.html#a2ea42e00e0151b35178b5ddac534e048">NTP_TEST_DONE</a>) {
                                        <a class="code" href="_custom_s_n_t_p_8c.html#a6fec3fdfff459a953822db2e8ff9b462" title="stores the response from a SNTP test">NTPTestResponse</a> = <a class="code" href="_security_system_8h.html#afbb75fe1a85f4ed679e2b28609e528db">NTP_TEST_PROGRESS</a>;
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; - TEST done state\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                        <span class="keywordflow">if</span> (<a class="code" href="_custom_s_n_t_p_8c.html#ac6e22465161b7de2caf5f35cea78318e">SNTPState</a> == <a class="code" href="_security_system_8h.html#a3e4d7c3657d49c0a82757c17fb3e4a99a030e7676ddc0611f9db274ad2c0e1bad">SM_WAIT</a> || <a class="code" href="_custom_s_n_t_p_8c.html#ac6e22465161b7de2caf5f35cea78318e">SNTPState</a> == <a class="code" href="_security_system_8h.html#a3e4d7c3657d49c0a82757c17fb3e4a99a2c17b68ae4178611296803bc0788eb07">SM_SHORT_WAIT</a>){
                                                <a class="code" href="_custom_s_n_t_p_8c.html#ac6e22465161b7de2caf5f35cea78318e">SNTPState</a> = <a class="code" href="_security_system_8h.html#a3e4d7c3657d49c0a82757c17fb3e4a99aea7247ebfc50d7f911c172da37f49e23">SM_HOME</a>;
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; - TEST SM_HOMe\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                        }
                                        <span class="keywordflow">else</span> {
                                                <a class="code" href="_custom_s_n_t_p_8c.html#a6fec3fdfff459a953822db2e8ff9b462" title="stores the response from a SNTP test">NTPTestResponse</a> == <a class="code" href="_security_system_8h.html#a635a61ffac11392ce261a74a5a1e48d9">NTP_TEST_TIMEOUT</a>;
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; - TEST timeout from start\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                        }
                                }

                                <span class="keywordflow">if</span> (<a class="code" href="_custom_s_n_t_p_8c.html#a6fec3fdfff459a953822db2e8ff9b462" title="stores the response from a SNTP test">NTPTestResponse</a> == <a class="code" href="_security_system_8h.html#afbb75fe1a85f4ed679e2b28609e528db">NTP_TEST_PROGRESS</a>)
                                        <span class="keywordflow">return</span> HTTP_IO_WAITING;

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; - fuck a duck\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                <span class="comment">// redirect the to result of the test email</span>
                                strcpypgm2ram((<span class="keywordtype">char</span>*)<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM <span class="keywordtype">void</span>*)<span class="stringliteral">&quot;/admin/NTPtest.htm&quot;</span>);
                                <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.httpStatus = HTTP_REDIRECT;
                                <span class="keywordflow">return</span> HTTP_IO_DONE;
                        }


<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Alarm is being updated\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

                        <span class="comment">// Instance ID</span>

                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;Ins&quot;</span>);

                        <span class="keywordflow">if</span>(*ptr) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;instance \r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                <span class="keywordflow">for</span>(<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0;((*ptr != <span class="charliteral">&#39;\0&#39;</span>) &amp;&amp; (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a9c46c7c2fe40ff45c5a12adb588bf4d5" title="xPL instance name of this device">xPL_My_Instance_ID</a>))); <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                                        <span class="keywordflow">if</span>(*ptr &gt;= <span class="charliteral">&#39;A&#39;</span> &amp;&amp; *ptr &lt;= <span class="charliteral">&#39;Z&#39;</span>)
                                                *ptr -= <span class="charliteral">&#39;A&#39;</span> - <span class="charliteral">&#39;a&#39;</span>; <span class="comment">//Convert to lower case</span>
                                        <span class="keywordflow">if</span>((*ptr &lt; <span class="charliteral">&#39;0&#39;</span>) || (*ptr &gt; <span class="charliteral">&#39;z&#39;</span>) || (*ptr &gt; <span class="charliteral">&#39;9&#39;</span> &amp;&amp; *ptr &lt; <span class="charliteral">&#39;a&#39;</span>)) *ptr = <span class="charliteral">&#39;0&#39;</span>; <span class="comment">// only accept 0 - 9 and a - z</span>
                                        <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a9c46c7c2fe40ff45c5a12adb588bf4d5" title="xPL instance name of this device">xPL_My_Instance_ID</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>] = *ptr;
                                        ptr++;
                                }<span class="comment">// for</span>
                                <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a9c46c7c2fe40ff45c5a12adb588bf4d5" title="xPL instance name of this device">xPL_My_Instance_ID</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>] = <span class="charliteral">&#39;\0&#39;</span>;

                        } <span class="comment">//ptr</span>

                        <span class="comment">// Heart Beat interval</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;Int&quot;</span>);
                        <span class="keywordflow">if</span>(*ptr)
                                <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a7111b59426453cce173352e2d7ef9dc3" title="Interval of the xPL heatbeat message in seconds.">xPL_Heartbeat_Interval</a> = <a class="code" href="_h_t_t_p_forms_8c.html#a6e8f2eab6326e5e8d0884ac0f3329628" title="Decodes and int value from a HTTP buffer (GET)">DecodeIntFromGET</a>(ptr, (ROM BYTE *)<span class="stringliteral">&quot;Heart Beat interval&quot;</span>);

                        <span class="comment">// Exit delay</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;ExD&quot;</span>);
                        <span class="keywordflow">if</span>(*ptr)
                                <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#ad7d66e7cbab58c033063b466e51e0f13" title="Number of seconds you have to exit from an entry/exit zone.">ExitDelay</a> = <a class="code" href="_h_t_t_p_forms_8c.html#a6e8f2eab6326e5e8d0884ac0f3329628" title="Decodes and int value from a HTTP buffer (GET)">DecodeIntFromGET</a>(ptr, (ROM BYTE *)<span class="stringliteral">&quot;Exit Delay&quot;</span>);

                        <span class="comment">// Entry Delay</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;EnD&quot;</span>);
                        <span class="keywordflow">if</span>(*ptr)
                                <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a5fc9d8b5fd181ed6d371af86dd8a15b5" title="Number of seconds you have to disarm alarm from an entry/exit zone before alarm goes off...">EntryDelay</a> = <a class="code" href="_h_t_t_p_forms_8c.html#a6e8f2eab6326e5e8d0884ac0f3329628" title="Decodes and int value from a HTTP buffer (GET)">DecodeIntFromGET</a>(ptr, (ROM BYTE *)<span class="stringliteral">&quot;Entry Delay&quot;</span>);

                        <span class="comment">// Alarming Duration</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;ADu&quot;</span>);
                        <span class="keywordflow">if</span>(*ptr)
                                <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a459109edd9f494275b72d6158714eda2" title="Number of seconds that the alarm will ring for.">AlarmingDuration</a> = <a class="code" href="_h_t_t_p_forms_8c.html#a6e8f2eab6326e5e8d0884ac0f3329628" title="Decodes and int value from a HTTP buffer (GET)">DecodeIntFromGET</a>(ptr, (ROM BYTE *)<span class="stringliteral">&quot;Alarming Duration&quot;</span>);

                        <span class="comment">// Alarming 24hour Duration</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;AD2&quot;</span>);
                        <span class="keywordflow">if</span>(*ptr)
                                <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a55fac6d0098441a27949a25d9a138509" title="Number of seconds that the alarm will ring for a 24 hour alarm type.">Alarming24Duration</a> = <a class="code" href="_h_t_t_p_forms_8c.html#a6e8f2eab6326e5e8d0884ac0f3329628" title="Decodes and int value from a HTTP buffer (GET)">DecodeIntFromGET</a>(ptr, (ROM BYTE *)<span class="stringliteral">&quot;Alarming 24hour Duration&quot;</span>);

                        <span class="comment">// Siren Delay 24h</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;SD2&quot;</span>);
                        <span class="keywordflow">if</span>(*ptr)
                                <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a20fd6f6d2e7b1b8c8c492e20969ff6cb" title="Number of seconds before the external siren is activated for 24h alarm type.">SirenDelay24h</a> = <a class="code" href="_h_t_t_p_forms_8c.html#a6e8f2eab6326e5e8d0884ac0f3329628" title="Decodes and int value from a HTTP buffer (GET)">DecodeIntFromGET</a>(ptr, (ROM BYTE *)<span class="stringliteral">&quot;Siren Delay 24h&quot;</span>);

                        <span class="comment">// Heart Beat interval</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;SDe&quot;</span>);
                        <span class="keywordflow">if</span>(*ptr)
                                <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a7d1d439ccc753cb0aaead9e23702e87b" title="Number of seconds before the external siren is activated.">SirenDelay</a> = <a class="code" href="_h_t_t_p_forms_8c.html#a6e8f2eab6326e5e8d0884ac0f3329628" title="Decodes and int value from a HTTP buffer (GET)">DecodeIntFromGET</a>(ptr, (ROM BYTE *)<span class="stringliteral">&quot;Siren Delay&quot;</span>);

                        <span class="comment">// NTP Server name</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;NTP&quot;</span>);
                        <span class="keywordflow">if</span>(*ptr) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;NTP Server \r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                                memset(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a70e871f8c8a200e0f5888f56f48e19f8" title="NTP Server name.">NTP_Server</a>, <span class="charliteral">&#39;\0&#39;</span>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a70e871f8c8a200e0f5888f56f48e19f8" title="NTP Server name.">NTP_Server</a>));

                                <span class="keywordflow">for</span>(<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0;((*ptr != <span class="charliteral">&#39;\0&#39;</span>) &amp;&amp; (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a70e871f8c8a200e0f5888f56f48e19f8" title="NTP Server name.">NTP_Server</a>))); <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                                        <span class="keywordflow">if</span>(*ptr &gt;= <span class="charliteral">&#39;A&#39;</span> &amp;&amp; *ptr &lt;= <span class="charliteral">&#39;Z&#39;</span>)
                                                *ptr -= <span class="charliteral">&#39;A&#39;</span> - <span class="charliteral">&#39;a&#39;</span>; <span class="comment">//Convert to lower case</span>
                                        <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a70e871f8c8a200e0f5888f56f48e19f8" title="NTP Server name.">NTP_Server</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>] = *ptr;
                                        ptr++;
                                }<span class="comment">// for</span>
                                <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a70e871f8c8a200e0f5888f56f48e19f8" title="NTP Server name.">NTP_Server</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>] = <span class="charliteral">&#39;\0&#39;</span>;

                        } <span class="comment">//ptr</span>

                        <span class="comment">// UseAES</span>
                        ptr = HTTPGetROMArg(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM BYTE *)<span class="stringliteral">&quot;UseAES&quot;</span>);
                        <span class="keywordflow">if</span>(*ptr == <span class="charliteral">&#39;1&#39;</span>)
                                <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#aece9a02d06221a468e469a45e371be01" title="Use AES encryption on the user feild in the xPL message.">Use_AES</a> = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                        <span class="keywordflow">if</span>(*ptr == <span class="charliteral">&#39;0&#39;</span>)
                                <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#aece9a02d06221a468e469a45e371be01" title="Use AES encryption on the user feild in the xPL message.">Use_AES</a> = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;


                        <span class="comment">// now we save the shit</span>
                        <a class="code" href="x_p_l_8c.html#a1099a7d6ccfe562deba149fd4acef424">xPLSaveEEConfig</a>(&amp;<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>, <a class="code" href="_security_system_8h.html#ae33a92f4e46c1d70d59e71bd1eecc209">EEDATASTART_XPL</a>, <span class="keyword">sizeof</span>(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>));

                        <span class="comment">// Clean the URL</span>
                        strcpypgm2ram((<span class="keywordtype">char</span>*)<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM <span class="keywordtype">void</span>*)<span class="stringliteral">&quot;/admin/alarmconfig.htm&quot;</span>);
                        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.httpStatus = HTTP_REDIRECT;
                        <span class="keywordflow">return</span> HTTP_IO_DONE;



                }<span class="comment">//     if(AlarmState != Disarmed)</span>
                <span class="keywordflow">else</span> {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Disarm the alarm before updating the config\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
                        strcpypgm2ram((<span class="keywordtype">char</span>*)<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM <span class="keywordtype">void</span>*)<span class="stringliteral">&quot;/admin/disarmconfig_error.htm&quot;</span>);
                        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.httpStatus = HTTP_REDIRECT;
                        <span class="keywordflow">return</span> HTTP_IO_DONE;
                } <span class="comment">// AlarmState != Disarmed</span>


        } <span class="comment">//admin/alarmconfig.htm</span>

        <span class="comment">//######### User Authentication #############</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!memcmppgm2ram(filename, <span class="stringliteral">&quot;admin/users.htm&quot;</span>, 14))
                <a class="code" href="_authenticate_8c.html#a73d4e378556fa6a028b9460759871f2c">ModifyUser</a>(ptr);

        <span class="comment">//######### Send Test Email #############</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!memcmppgm2ram(filename, <span class="stringliteral">&quot;email/index.htm&quot;</span>, 15)) {

                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8h.html#a9cbd255a539aaee43372b00cbc47498e" title="used for testing email">SMPTTestResult</a> == <a class="code" href="_security_system_8h.html#a9b173d9d938f8987dbfbcbc284e1f3d1">SMTP_TEST_DONE</a>) {
                        <a class="code" href="_security_system_8h.html#a9cbd255a539aaee43372b00cbc47498e" title="used for testing email">SMPTTestResult</a> = <a class="code" href="_security_system_8h.html#ab642958e77b4ce6fd3119a6a028e29e3">SMTP_TEST_WAITING</a>;
                        <a class="code" href="_security_system_8h.html#ae777555850cf9c897f46c8407ce1729f" title="Places a new email in the SMTP queue to be processed (sent)">SMTPQueueEmail</a>(<a class="code" href="_security_system_8h.html#adf08ba7d4e8e4395881e05cb2fabde71ab3c9d4bf0dca93207eab351655af17df">SMTP_Test</a>);
                }

                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8h.html#a9cbd255a539aaee43372b00cbc47498e" title="used for testing email">SMPTTestResult</a> == <a class="code" href="_security_system_8h.html#ab642958e77b4ce6fd3119a6a028e29e3">SMTP_TEST_WAITING</a>)
                        <span class="keywordflow">return</span> HTTP_IO_WAITING;

                <span class="comment">// redirect the to result of the test email</span>
                strcpypgm2ram((<span class="keywordtype">char</span>*)<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM <span class="keywordtype">void</span>*)<span class="stringliteral">&quot;/email/test.htm&quot;</span>);
                <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.httpStatus = HTTP_REDIRECT;

        }


        <span class="keywordflow">return</span> HTTP_IO_DONE;


}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_h_t_t_p_forms_8c_a686ae35a16ecb63daffafcd015ddb070_cgraph.svg" width="1534" height="740" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a821765eef4f0b64f901828f4d667fb17"></a><!-- doxytag: member="HTTPForms.c::HTTPExecutePost" ref="a821765eef4f0b64f901828f4d667fb17" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HTTP_IO_RESULT HTTPExecutePost </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Processes HTTP POST's. </p>

<p>Definition at line <a class="el" href="_h_t_t_p_forms_8c_source.html#l00573">573</a> of file <a class="el" href="_h_t_t_p_forms_8c_source.html">HTTPForms.c</a>.</p>

<p>References <a class="el" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>, <a class="el" href="_h_t_t_p_forms_8c_source.html#l00628">HTTPPostConfig()</a>, <a class="el" href="_s_m_t_p_8c_source.html#l00228">HTTPPostSMTPConfig()</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, and <a class="el" href="_hardware_profile_8h_source.html#l00201">putsUART</a>.</p>
<div class="fragment"><pre class="fragment">                                     {

        <span class="comment">// Resolve which function to use and pass along</span>
        BYTE filename[20];

        <span class="comment">// Load the file name</span>
        <span class="comment">// Make sure BYTE filename[] above is large enough for your longest name</span>
        MPFSGetFilename(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.file, filename, 20);

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;HTTP POST received from file:&quot;</span>);
        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(filename);
        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

        <span class="keywordflow">if</span>(!memcmppgm2ram(filename, <span class="stringliteral">&quot;admin/ipconfig.htm&quot;</span>, 18))
                <span class="keywordflow">return</span> <a class="code" href="_h_t_t_p_forms_8c.html#a53d6ed1464f1ff112f0b356601ed8cdf">HTTPPostConfig</a>();

<span class="preprocessor">#if defined STACK_USE_DYNAMICDNS_CLIENT</span>
<span class="preprocessor"></span>
        <span class="keywordflow">if</span>(!memcmppgm2ram(filename, <span class="stringliteral">&quot;admin/dyndns.htm&quot;</span>, 18))
                <span class="keywordflow">return</span> HTTPPostDDNSConfig();

<span class="preprocessor">#endif // DYNDNS</span>
<span class="preprocessor"></span>
        <span class="keywordflow">if</span>(!strcmppgm2ram((<span class="keywordtype">char</span>*)filename, <span class="stringliteral">&quot;email/index.htm&quot;</span>))
                <span class="keywordflow">return</span> <a class="code" href="_security_system_8h.html#a9684d57d301c8de28dba3a1dc22d4708" title="This function reads an input parameter from the POSTed data, and writes that string to the configurat...">HTTPPostSMTPConfig</a>();

        <span class="keywordflow">return</span> HTTP_IO_DONE;
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_h_t_t_p_forms_8c_a821765eef4f0b64f901828f4d667fb17_cgraph.svg" width="822" height="126" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a53d6ed1464f1ff112f0b356601ed8cdf"></a><!-- doxytag: member="HTTPForms.c::HTTPPostConfig" ref="a53d6ed1464f1ff112f0b356601ed8cdf" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static HTTP_IO_RESULT HTTPPostConfig </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>D E C L A R A T I O N S P R I V A T E P R O T O T Y P E S </p>

<p>Definition at line <a class="el" href="_h_t_t_p_forms_8c_source.html#l00628">628</a> of file <a class="el" href="_h_t_t_p_forms_8c_source.html">HTTPForms.c</a>.</p>

<p>References <a class="el" href="_main_demo_8c_source.html#l00030">AppConfig</a>, <a class="el" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>, <a class="el" href="_main_demo_8c_source.html#l00025">EEDATASTART_CONFIG</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_h_t_t_p_forms_8c_source.html#l00626">HTTP_POST_CONFIG_MAX_LEN</a>, and <a class="el" href="_security_system_8h_source.html#l00013">XPLEECONFIGVERSION</a>.</p>

<p>Referenced by <a class="el" href="_h_t_t_p_forms_8c_source.html#l00573">HTTPExecutePost()</a>.</p>
<div class="fragment"><pre class="fragment">                                           {
        APP_CONFIG *app;
        BYTE *ptr;
        WORD len;

        <span class="comment">// Set app config pointer to use data array</span>
        app = (APP_CONFIG*)&amp;<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data[<a class="code" href="_h_t_t_p_forms_8c.html#a7d91fa3d3022b54068c26022b4db089d">HTTP_POST_CONFIG_MAX_LEN</a>];

        <span class="comment">// Use data[0] as a state machine.  0x01 is initialized, 0x02 is error, else uninit</span>
        <span class="keywordflow">if</span>(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data[0] != 0x01 &amp;&amp; <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data[0] != 0x02)
        {
                <span class="comment">// First run, so use current config as defaults</span>
                memcpy((<span class="keywordtype">void</span>*)app, (<span class="keywordtype">void</span>*)&amp;<a class="code" href="_main_demo_8c.html#a67540808395519081be1333c4e9aa1f8">AppConfig</a>, <span class="keyword">sizeof</span>(AppConfig));
                app-&gt;Flags.bIsDHCPEnabled = 0;
                <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data[0] = 0x01;
        }


        <span class="comment">// if TCPFind == 0xffff means no result</span>
        <span class="comment">// curHTTP.byteCount = How many bytes have been read so far</span>
        <span class="comment">// TCPIsGetReady = number of bytes available in socket</span>
        <span class="comment">// sktHTTP = Access the current socket</span>



        <span class="comment">// Loop over all parameters</span>
        <span class="keywordflow">while</span>(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.byteCount) <span class="comment">// how many bytes have been read so far</span>
        {
                <span class="comment">// Find end of next parameter string</span>
                len = TCPFind(sktHTTP, <span class="charliteral">&#39;&amp;&#39;</span>, 0, <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);

                <span class="comment">// if &#39;&amp;&#39; was not found and number of bytes in socket == bytes read so far</span>
                <span class="keywordflow">if</span>(len == 0xffff &amp;&amp; TCPIsGetReady(sktHTTP) == <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.byteCount)
                        len = TCPIsGetReady(sktHTTP);

                <span class="comment">// If there&#39;s no end in sight, then ask for more data</span>
                <span class="keywordflow">if</span>(len == 0xffff)
                        <span class="keywordflow">return</span> HTTP_IO_NEED_DATA;

                <span class="comment">// Read in as much data as we can</span>
                <span class="keywordflow">if</span>(len &gt; HTTP_MAX_DATA_LEN-<span class="keyword">sizeof</span>(<a class="code" href="_main_demo_8c.html#a67540808395519081be1333c4e9aa1f8">AppConfig</a>))
                {<span class="comment">// If there&#39;s too much, read as much as possible</span>
                        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.byteCount -= TCPGetArray(sktHTTP, <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data+1, <a class="code" href="_h_t_t_p_forms_8c.html#a7d91fa3d3022b54068c26022b4db089d">HTTP_POST_CONFIG_MAX_LEN</a>);
                        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.byteCount -= TCPGetArray(sktHTTP, NULL, len - <a class="code" href="_h_t_t_p_forms_8c.html#a7d91fa3d3022b54068c26022b4db089d">HTTP_POST_CONFIG_MAX_LEN</a>);
                        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data[<a class="code" href="_h_t_t_p_forms_8c.html#a7d91fa3d3022b54068c26022b4db089d">HTTP_POST_CONFIG_MAX_LEN</a>-1] = <span class="charliteral">&#39;\0&#39;</span>;
                }
                <span class="keywordflow">else</span>
                {<span class="comment">// Otherwise, read as much as we wanted to</span>
                        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.byteCount -= TCPGetArray(sktHTTP, <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data+1, len);
                        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data[len+1] = <span class="charliteral">&#39;\0&#39;</span>;
                }

                <span class="comment">// Decode the string</span>
                HTTPURLDecode(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data+1);

                <span class="comment">// Compare the string to those we&#39;re looking for</span>
                <span class="keywordflow">if</span>(!memcmppgm2ram(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data+1, <span class="stringliteral">&quot;ip\0&quot;</span>, 3))
                {
                        <span class="keywordflow">if</span>(StringToIPAddress(&amp;<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data[3+1], &amp;(app-&gt;MyIPAddr)))
                                memcpy((<span class="keywordtype">void</span>*)&amp;(app-&gt;DefaultIPAddr), (<span class="keywordtype">void</span>*)&amp;(app-&gt;MyIPAddr), <span class="keyword">sizeof</span>(IP_ADDR));
                        <span class="keywordflow">else</span>
                                <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data[0] = 0x02;
                }
                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!memcmppgm2ram(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data+1, <span class="stringliteral">&quot;gw\0&quot;</span>, 3))
                {
                        <span class="keywordflow">if</span>(!StringToIPAddress(&amp;<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data[3+1], &amp;(app-&gt;MyGateway)))
                                <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data[0] = 0x02;
                }
                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!memcmppgm2ram(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data+1, <span class="stringliteral">&quot;subnet\0&quot;</span>, 7))
                {
                        <span class="keywordflow">if</span>(StringToIPAddress(&amp;<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data[7+1], &amp;(app-&gt;MyMask)))
                                memcpy((<span class="keywordtype">void</span>*)&amp;(app-&gt;DefaultMask), (<span class="keywordtype">void</span>*)&amp;(app-&gt;MyMask), <span class="keyword">sizeof</span>(IP_ADDR));
                        <span class="keywordflow">else</span>
                                <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data[0] = 0x02;
                }
                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!memcmppgm2ram(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data+1, <span class="stringliteral">&quot;dns1\0&quot;</span>, 5))
                {
                        <span class="keywordflow">if</span>(!StringToIPAddress(&amp;<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data[5+1], &amp;(app-&gt;PrimaryDNSServer)))
                                <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data[0] = 0x02;
                }
                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!memcmppgm2ram(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data+1, <span class="stringliteral">&quot;dns2\0&quot;</span>, 5))
                {
                        <span class="keywordflow">if</span>(!StringToIPAddress(&amp;<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data[5+1], &amp;(app-&gt;SecondaryDNSServer)))
                                <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data[0] = 0x02;
                }
                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!memcmppgm2ram(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data+1, <span class="stringliteral">&quot;mac\0&quot;</span>, 4))
                {
                        WORD_VAL w;
                        BYTE i, mac[12];

                        ptr = &amp;<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data[4+1];

                        <span class="keywordflow">for</span>(i = 0; i &lt; 12; i++)
                        {<span class="comment">// Read the MAC address</span>

                                <span class="comment">// Skip non-hex bytes</span>
                                <span class="keywordflow">while</span>( *ptr != 0x00 &amp;&amp; !(*ptr &gt;= <span class="charliteral">&#39;0&#39;</span> &amp;&amp; *ptr &lt; <span class="charliteral">&#39;9&#39;</span>) &amp;&amp; !(*ptr &gt;= <span class="charliteral">&#39;A&#39;</span> &amp;&amp; *ptr &lt;= <span class="charliteral">&#39;F&#39;</span>) &amp;&amp; !(*ptr &gt;= <span class="charliteral">&#39;a&#39;</span> &amp;&amp; *ptr &lt;= <span class="charliteral">&#39;f&#39;</span>) )
                                        ptr++;

                                <span class="comment">// MAC string is over, so zeroize the rest</span>
                                <span class="keywordflow">if</span>(*ptr == 0x00)
                                {
                                        <span class="keywordflow">for</span>(; i &lt; 12; i++)
                                                mac[i] = <span class="charliteral">&#39;0&#39;</span>;
                                        <span class="keywordflow">break</span>;
                                }

                                <span class="comment">// Save the MAC byte</span>
                                mac[i] = *ptr++;
                        }

                        <span class="comment">// Read MAC Address, one byte at a time</span>
                        <span class="keywordflow">for</span>(i = 0; i &lt; 6; i++)
                        {
                                w.v[1] = mac[i*2];
                                w.v[0] = mac[i*2+1];
                                app-&gt;MyMACAddr.v[i] = hexatob(w);
                        }
                }
                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!memcmppgm2ram(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data+1, <span class="stringliteral">&quot;host\0&quot;</span>, 5))
                {
                        memset(app-&gt;NetBIOSName, <span class="charliteral">&#39; &#39;</span>, 15);
                        app-&gt;NetBIOSName[15] = 0x00;
                        memcpy((<span class="keywordtype">void</span>*)app-&gt;NetBIOSName, (<span class="keywordtype">void</span>*)&amp;<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data[5+1], strlen((<span class="keywordtype">char</span>*)&amp;<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data[5+1]));
                        strupr((<span class="keywordtype">char</span>*)app-&gt;NetBIOSName);
                }

                <span class="comment">// Trash the separator character</span>
                <span class="keywordflow">while</span>( TCPFind(sktHTTP, <span class="charliteral">&#39;&amp;&#39;</span>, 0, <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)  == 0 ||
                          TCPFind(sktHTTP, <span class="charliteral">&#39;\r&#39;</span>, 0, <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) == 0 ||
                          TCPFind(sktHTTP, <span class="charliteral">&#39;\n&#39;</span>, 0, <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) == 0  )
                {
                        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.byteCount -= TCPGet(sktHTTP, NULL);
                }

        }


        <span class="comment">//We dont want DHCP as an option.</span>
        app-&gt;Flags.bIsDHCPEnabled = 0;

        <span class="comment">// Check if all settings were successful</span>
        <span class="keywordflow">if</span>(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data[0] == 0x01)
        {<span class="comment">// Save the new AppConfig</span>

                ptr = (BYTE*)app;
<span class="preprocessor">#if defined(MPFS_USE_EEPROM)</span>
<span class="preprocessor"></span>            XEEBeginWrite(<a class="code" href="_main_demo_8c.html#a91b87b60e38a5f2cad2d0725a1ae6306">EEDATASTART_CONFIG</a>);
            XEEWrite(<a class="code" href="_security_system_8h.html#aaad19aa5437f84c85f9e2535098af81c">XPLEECONFIGVERSION</a>);
            <span class="keywordflow">for</span> (len = 0; len &lt; <span class="keyword">sizeof</span>(<a class="code" href="_main_demo_8c.html#a67540808395519081be1333c4e9aa1f8">AppConfig</a>); len++ )
                XEEWrite(*ptr++);
            XEEEndWrite();
        <span class="keywordflow">while</span>(XEEIsBusy());
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
                <span class="comment">// Set the board to reboot to the new address</span>
                strcpypgm2ram((<span class="keywordtype">char</span>*)<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM <span class="keywordtype">void</span>*)<span class="stringliteral">&quot;/admin/reboot.htm?&quot;</span>);
                memcpy((<span class="keywordtype">void</span>*)(<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data+18), (<span class="keywordtype">void</span>*)app-&gt;NetBIOSName, 16);
                ptr = <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data;
                <span class="keywordflow">while</span>(*ptr != <span class="charliteral">&#39; &#39;</span> &amp;&amp; *ptr != <span class="charliteral">&#39;\0&#39;</span>)
                        ptr++;
                *ptr = <span class="charliteral">&#39;\0&#39;</span>;
        }
        <span class="keywordflow">else</span>
        {<span class="comment">// Error parsing IP, so don&#39;t save to avoid errors</span>
                strcpypgm2ram((<span class="keywordtype">char</span>*)<a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.data, (ROM <span class="keywordtype">void</span>*)<span class="stringliteral">&quot;/admin/config_error.htm&quot;</span>);
        }

        <a class="code" href="_h_t_t_p_variables_8c.html#a56dd5313e3ef1f8da6a1a98c9457eac1">curHTTP</a>.httpStatus = HTTP_REDIRECT;

        <span class="keywordflow">return</span> HTTP_IO_DONE;
}
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_h_t_t_p_forms_8c_a53d6ed1464f1ff112f0b356601ed8cdf_icgraph.svg" width="464" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa3c409ffd21320f7da0499631f024dd9"></a><!-- doxytag: member="HTTPForms.c::SaveDeviceDescription" ref="aa3c409ffd21320f7da0499631f024dd9" args="(int StartAddress, BYTE *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SaveDeviceDescription </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>StartAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BYTE *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Writes the device description to the EE Prom </p>

<p>Definition at line <a class="el" href="_h_t_t_p_forms_8c_source.html#l00526">526</a> of file <a class="el" href="_h_t_t_p_forms_8c_source.html">HTTPForms.c</a>.</p>

<p>References <a class="el" href="_security_system_8h_source.html#l00012">DEVICEDESCLENGTH</a>, and <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>.</p>

<p>Referenced by <a class="el" href="_h_t_t_p_forms_8c_source.html#l00028">HTTPExecuteGet()</a>.</p>
<div class="fragment"><pre class="fragment">                                                      {

        <span class="keywordflow">for</span>(<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#a61145d9f711460b73af75ef123fc76f6">DEVICEDESCLENGTH</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                XEEBeginWrite(StartAddress + <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>);
                <span class="keywordflow">if</span>(<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &gt; strlen(p))
                        XEEWrite(<span class="charliteral">&#39;\0&#39;</span>);
                <span class="keywordflow">else</span>
                        XEEWrite(p[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>]);
                XEEEndWrite();
                <span class="keywordflow">while</span>(XEEIsBusy());
        }

} <span class="comment">// SaveDeviceDescription</span>
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_h_t_t_p_forms_8c_aa3c409ffd21320f7da0499631f024dd9_icgraph.svg" width="507" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Mon Apr 25 2011 23:31:10 for Alarm Cabinent by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
