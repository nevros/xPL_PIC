<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Alarm Cabinent: PIC Code/SecurityXPLSender.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Alarm Cabinent</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">PIC Code/SecurityXPLSender.c File Reference</div>  </div>
</div>
<div class="contents">

<p>Sends all security xPL messages.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;TCPIP Stack/TCPIP.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="x_p_l_8h_source.html">xPL.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_security_system_8h_source.html">SecuritySystem.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for SecurityXPLSender.c:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c__incl.svg" width="659" height="150" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="_security_x_p_l_sender_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_x_p_l_sender_8c.html#a30c3c9cdda2491c17d5d6d5cc6426b31">addxPLMessage</a> (<a class="el" href="_security_system_8h.html#a91316bbcd27d874bc6aa4afca917a4dd">TaskBuffers</a> TaskBuffered)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_x_p_l_sender_8c.html#ab01e7f6872c9f26dd9f91bc24f43f4b6">SendZoneStateMsg</a> (<a class="el" href="_security_system_8h.html#abdc99e93ae47c7d6cb907274a3018ff4">Zone_States</a> MessageType, int TheZone)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_x_p_l_sender_8c.html#ae77b19bae92f6c64f9a58f722b4bf193">SendAreaStateMsg</a> (<a class="el" href="_security_system_8h.html#abdc99e93ae47c7d6cb907274a3018ff4">Zone_States</a> CurrentZoneState, int TheZone, int StartPoint)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_x_p_l_sender_8c.html#ae9e6733b7fed738a76787f01762bb284">SendAlarmingMsg</a> (int TheZone)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_x_p_l_sender_8c.html#a46495fd42c19f6703e4663cb7cf2d1ec">SendGatewayInfo</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_x_p_l_sender_8c.html#ad811bd225b593df01e168e1bb0967713">SendGatewayReady</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_x_p_l_sender_8c.html#ae049c3724d5bacc955f50f724483ed91">SendArmed</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_x_p_l_sender_8c.html#ab29cace49ca20af0048aac94e64c10dd">SendError</a> (rom char *ErrorMessage)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_x_p_l_sender_8c.html#af1800c287b83d40961f39fcd9a751322">SendDisarm</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_x_p_l_sender_8c.html#a5583c2b95797b8210dfe1b1a5e516c2d">SendZoneList</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_x_p_l_sender_8c.html#a43dbd62169c9f83be3663dc435e232c7">SendAreaList</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_x_p_l_sender_8c.html#ae149da75e2b494aa56f4976837706565">SendZoneInfo</a> (int TheZone)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_x_p_l_sender_8c.html#acdb6126b5578c4ca8c06d5343a7b37df">SendAreaInfo</a> (int TheArea)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_x_p_l_sender_8c.html#a07582d84515caf26cd22e534fd29f378">SendConfigList</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_x_p_l_sender_8c.html#a729b2eb0275e2affcdf87121b20125fc">SendConfigCurrent</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_x_p_l_sender_8c.html#a0a59aa6a73171b98b88cf2f9070ceac4">SendIPValue</a> (IP_ADDR IPVal)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_x_p_l_sender_8c.html#a2c31ecf27fafa5085703f0719f6decac">SendGatewayChanged</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_x_p_l_sender_8c.html#a80218fda4a4753b2d214453e14b400ff">SendBatteryStat</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_x_p_l_sender_8c.html#aa79f220fe412930dbbe86acd8e506f48">SendACStat</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_x_p_l_sender_8c.html#aeb4ee205f02bf767a5d3b93608abc736">SendGateStat</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_x_p_l_sender_8c.html#a5d91f06e22d49f6ecee37802e866e0e6">SendAreaStat</a> (int TheArea)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_security_x_p_l_sender_8c.html#a7fdbfa1929e90a45cc905c6276ab7cae">SendZoneStat</a> (int TheZone)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Sends all security xPL messages. </p>

<p>Definition in file <a class="el" href="_security_x_p_l_sender_8c_source.html">SecurityXPLSender.c</a>.</p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="a30c3c9cdda2491c17d5d6d5cc6426b31"></a><!-- doxytag: member="SecurityXPLSender.c::addxPLMessage" ref="a30c3c9cdda2491c17d5d6d5cc6426b31" args="(TaskBuffers TaskBuffered)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int addxPLMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_security_system_8h.html#a91316bbcd27d874bc6aa4afca917a4dd">TaskBuffers</a>&#160;</td>
          <td class="paramname"><em>TaskBuffered</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Adds a new xPL message into the queue for transmittion. Caller populates IsChangeFlagged flag on the zone and area that should be applied. Note: Additional values should be populated manually</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">TaskBuffered,type</td><td>of xPL message that will be sent </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>returns the task number used to populate additional task info </dd></dl>

<p>Definition at line <a class="el" href="_security_x_p_l_sender_8c_source.html#l00017">17</a> of file <a class="el" href="_security_x_p_l_sender_8c_source.html">SecurityXPLSender.c</a>.</p>

<p>References <a class="el" href="_security_system_8c_source.html#l00149">AreaConfig</a>, <a class="el" href="_security_system_8h_source.html#l00008">AREACOUNT</a>, <a class="el" href="_security_system_8c_source.html#l01091">ClearArmingFlags()</a>, <a class="el" href="_security_system_8h_source.html#l00265">xPLTasks::FlaggedAreas</a>, <a class="el" href="_security_system_8h_source.html#l00264">xPLTasks::FlaggedZones</a>, <a class="el" href="_security_system_8h_source.html#l00274">xPLTaskLists::FreePosition</a>, <a class="el" href="_security_system_8h_source.html#l00191">AreaConfigs::IsChangeFlagged</a>, <a class="el" href="_security_system_8h_source.html#l00173">ZoneConfigs::IsChangeFlagged</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_hardware_profile_8h_source.html#l00201">putsUART</a>, <a class="el" href="_security_system_8h_source.html#l00277">xPLTaskLists::Task</a>, <a class="el" href="_security_system_8h_source.html#l00262">xPLTasks::TaskBuffered</a>, <a class="el" href="_security_system_8h_source.html#l00267">xPLTasks::TaskState</a>, <a class="el" href="_security_system_8h_source.html#l00016">XPLBUFFERSIZE</a>, <a class="el" href="_security_system_8c_source.html#l00128">xPLTaskList</a>, <a class="el" href="_security_system_8c_source.html#l00143">ZoneConfig</a>, and <a class="el" href="_security_system_8h_source.html#l00007">ZONECOUNT</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l01122">Arm()</a>, <a class="el" href="_battery_8c_source.html#l00144">BatteryTask()</a>, <a class="el" href="_security_system_8c_source.html#l01938">Disarm()</a>, <a class="el" href="_h_t_t_p_forms_8c_source.html#l00028">HTTPExecuteGet()</a>, <a class="el" href="_security_system_8c_source.html#l00780">IOTasks()</a>, <a class="el" href="_security_system_8c_source.html#l01249">Panic()</a>, <a class="el" href="_security_system_8c_source.html#l01642">SchemaProcessUDPMsg()</a>, <a class="el" href="_security_system_8c_source.html#l01296">StateChangeToArm()</a>, and <a class="el" href="_authenticate_8c_source.html#l00039">xPLAuthenticate()</a>.</p>
<div class="fragment"><pre class="fragment">                                             {

        <span class="keywordtype">int</span> iCounter, Result;

<span class="preprocessor">        #if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <span class="keywordtype">char</span> TempString[3]; <span class="comment">// used for debug only</span>
                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;xPL message placed in queue \r\n  - task position&quot;</span>);
                uitoa(<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#a15bcecd7cf38b7e1a6da604b9f96893b" title="Task number that is free to create a new task in.">FreePosition</a>,  TempString);
                <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(TempString);
                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);
<span class="preprocessor">        #endif</span>
<span class="preprocessor"></span>
        <span class="comment">// set new properties of the task</span>
        <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#a15bcecd7cf38b7e1a6da604b9f96893b" title="Task number that is free to create a new task in.">FreePosition</a>].<a class="code" href="structx_p_l_tasks.html#a2a2ae019d1085568bd2b8c84ae8ec8ce" title="Type of task.">TaskBuffered</a> = TaskBuffered;
        Result = <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#a15bcecd7cf38b7e1a6da604b9f96893b" title="Task number that is free to create a new task in.">FreePosition</a>;
        <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[Result].<a class="code" href="structx_p_l_tasks.html#a3de9c2a149eebeb114bb3d7d43d40fff" title="0 means completed, &gt; 0 means more things to do. Value &gt; 0 can be used by task to track state...">TaskState</a> = 0;

        <span class="comment">// populate zone array from the current IsChangeFlagged values</span>
        <span class="keywordflow">for</span>(iCounter =0; iCounter &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; iCounter++)
                 <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#a15bcecd7cf38b7e1a6da604b9f96893b" title="Task number that is free to create a new task in.">FreePosition</a>].<a class="code" href="structx_p_l_tasks.html#adc72959bb001a58e0ac4809643ac4062" title="An array of the Zones that have been flagged for this message.">FlaggedZones</a>[iCounter] = <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[iCounter].<a class="code" href="struct_zone_configs.html#a3060ff1a56645c2b505274a4dd455582" title="Used for state changes.">IsChangeFlagged</a>;

        <span class="comment">// populate area array from the current IsChangeFlagged values</span>
        <span class="keywordflow">for</span>(iCounter =0; iCounter &lt; <a class="code" href="_security_system_8h.html#af9feef5e257517789486c320b17e82bd">AREACOUNT</a>; iCounter++)
                 <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#ab4210652df016dc56664218dda31be3b" title="an array of the tasks, see SMTPTaskStack">Task</a>[<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#a15bcecd7cf38b7e1a6da604b9f96893b" title="Task number that is free to create a new task in.">FreePosition</a>].<a class="code" href="structx_p_l_tasks.html#a194342683536b1c2bbe3319655a3fd2c" title="An array of the Areas that have been flagged for this message.">FlaggedAreas</a>[iCounter] = <a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[iCounter].<a class="code" href="struct_area_configs.html#a711da45ad4b0c06e1aaee9d2ba6108aa" title="Used for state changes.">IsChangeFlagged</a>;

        <a class="code" href="_security_system_8c.html#a491f8822a8274ca5244c41d226e7136e">ClearArmingFlags</a>();

        <span class="comment">// Increaments the Free position, ready for the next task.</span>
        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#a15bcecd7cf38b7e1a6da604b9f96893b" title="Task number that is free to create a new task in.">FreePosition</a> &lt; (<a class="code" href="_security_system_8h.html#acdb1a1e550f9525246d5f268cd497452" title="the number of xPL messages that can be buffered for transmit">XPLBUFFERSIZE</a>-1))
                <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#a15bcecd7cf38b7e1a6da604b9f96893b" title="Task number that is free to create a new task in.">FreePosition</a>++;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#a15bcecd7cf38b7e1a6da604b9f96893b" title="Task number that is free to create a new task in.">FreePosition</a> &gt;= (<a class="code" href="_security_system_8h.html#acdb1a1e550f9525246d5f268cd497452" title="the number of xPL messages that can be buffered for transmit">XPLBUFFERSIZE</a>-1))
                <a class="code" href="_security_system_8c.html#a129e6683e32d77565169cb282dc552c2" title="The Task buffer for sending xPL messages.">xPLTaskList</a>.<a class="code" href="structx_p_l_task_lists.html#a15bcecd7cf38b7e1a6da604b9f96893b" title="Task number that is free to create a new task in.">FreePosition</a> =0;
                
<span class="keywordflow">return</span> Result;
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_a30c3c9cdda2491c17d5d6d5cc6426b31_cgraph.svg" width="451" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_a30c3c9cdda2491c17d5d6d5cc6426b31_icgraph.svg" width="1715" height="695" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa79f220fe412930dbbe86acd8e506f48"></a><!-- doxytag: member="SecurityXPLSender.c::SendACStat" ref="aa79f220fe412930dbbe86acd8e506f48" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SendACStat </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_security_x_p_l_sender_8c_source.html#l00965">965</a> of file <a class="el" href="_security_x_p_l_sender_8c_source.html">SecurityXPLSender.c</a>.</p>

<p>References <a class="el" href="_security_system_8h_source.html#l00103">Battery_InUse</a>, <a class="el" href="_battery_8c_source.html#l00026">BatteryState</a>, <a class="el" href="x_p_l_8h_source.html#l00052">Class_Config</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00066">Type_Gateway</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, and <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                       {

        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# SendACStat, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {
                <span class="comment">//security.gateway</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba14f0290b427ed1601cbd6b99072f4401">Class_Config</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a1ffc8fbc4fd8675c7ac9a73abcb5b2ec" title="Part of the security schema.">Type_Gateway</a>);

                <span class="keywordflow">if</span> (<a class="code" href="_battery_8c.html#a35b967426a12072affebab82da722ef3" title="Keeps track of the battery state.">BatteryState</a> == <a class="code" href="_security_system_8h.html#a462bad824ca26348ba295528d4a61f23a11cc1f448ca555568d3c5e4f649c76d9">Battery_InUse</a>)
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;event=ac-fail\n}\n&quot;</span>);
                <span class="keywordflow">else</span>
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;event=ac-restored\n}\n&quot;</span>);

                <span class="comment">// Now transmit it.</span>
                UDPFlush();

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;SendACStat sent&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        }<span class="comment">//UDPIsPutReady(XPLSocket)</span>
} <span class="comment">//SendACStat</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_aa79f220fe412930dbbe86acd8e506f48_cgraph.svg" width="408" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_aa79f220fe412930dbbe86acd8e506f48_icgraph.svg" width="688" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae9e6733b7fed738a76787f01762bb284"></a><!-- doxytag: member="SecurityXPLSender.c::SendAlarmingMsg" ref="ae9e6733b7fed738a76787f01762bb284" args="(int TheZone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SendAlarmingMsg </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>TheZone</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_security_x_p_l_sender_8c_source.html#l00226">226</a> of file <a class="el" href="_security_x_p_l_sender_8c_source.html">SecurityXPLSender.c</a>.</p>

<p>References <a class="el" href="_security_system_8c_source.html#l00044">AlarmTypesText</a>, <a class="el" href="_security_system_8h_source.html#l00008">AREACOUNT</a>, <a class="el" href="x_p_l_8h_source.html#l00006">BOOL</a>, <a class="el" href="x_p_l_8h_source.html#l00053">Class_Security</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_security_system_8c_source.html#l01467">isZoneMemberOfArea()</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_hardware_profile_8h_source.html#l00201">putsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00066">Type_Gateway</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00014">xPLMsgKey</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>, <a class="el" href="_security_system_8h_source.html#l00177">ZoneConfigs::ZoneAlarmType</a>, and <a class="el" href="_security_system_8c_source.html#l00143">ZoneConfig</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>, and <a class="el" href="_security_system_8c_source.html#l00916">StateChangeToAlarming()</a>.</p>
<div class="fragment"><pre class="fragment">                                   {

        <a class="code" href="x_p_l_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a> isFirstZone = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
        <span class="keywordtype">char</span> TempBuffer[3];


        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# SendAlarmingMsg, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {

                <span class="comment">//Generate xPL head with type security.gateway</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba044979f8b65ecedf0ca73e5ab66bd7ad">Class_Security</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a1ffc8fbc4fd8675c7ac9a73abcb5b2ec" title="Part of the security schema.">Type_Gateway</a>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;event=alarm&quot;</span>);
                <span class="keywordflow">if</span> (TheZone != 99 ) { <span class="comment">// Zone 99 is for Panic</span>
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nzone-list=&quot;</span>);
                        itoa(TheZone, TempBuffer);
                        UDPPutArray(TempBuffer,strlen(TempBuffer));
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\narea-list=&quot;</span>);

                        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#af9feef5e257517789486c320b17e82bd">AREACOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a290b0da69aaf212aa38c219c45a6d8a9">isZoneMemberOfArea</a>(TheZone, <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>) == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>) {
                                        <span class="keywordflow">if</span> (!isFirstZone) UDPPut(<span class="charliteral">&#39;,&#39;</span>);
                                        isFirstZone = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                                        UDPPut(<span class="charliteral">&#39;0&#39;</span>+<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>);
                                }<span class="comment">// isZoneMemberOfArea</span>
                        }<span class="comment">// for iCount</span>

                        <span class="comment">//alarm-type=Alarm type of the zone triggered</span>
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nalarm-type=&quot;</span>);
                        <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = <a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].<a class="code" href="struct_zone_configs.html#ab47b513fec97f9480895eebb17d759bd" title="xPL Alarm type (eg fire, flood, gas etc)">ZoneAlarmType</a>;
                        UDPPutROMString(<a class="code" href="_security_system_8c.html#a8cba7131f5350817bd065e867459fa69" title="determines the text outputed in the xPL message for each of the alarm types">AlarmTypesText</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>]);

                } <span class="comment">// TheZone != 99 ie Panic</span>



                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n}\n&quot;</span>);


<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;SendAlarmingMsg Message Sent\r\n&quot;</span>);

                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Zone: &quot;</span>);
                itoa(TheZone, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>);
                <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>);

                <span class="keywordflow">if</span> (TheZone == 99 )
                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot; Panic Alarm&quot;</span>);
                <span class="keywordflow">else</span> {
                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;ZoneAlarmType: &quot;</span>);
                        itoa(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].ZoneAlarmType, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>);
                        <a class="code" href="_hardware_profile_8h.html#a83f63fc3181f38af4c937906f34341c8">putsUART</a>(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>);
                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Text: &quot;</span>);
                        <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>(<a class="code" href="_security_system_8c.html#a8cba7131f5350817bd065e867459fa69" title="determines the text outputed in the xPL message for each of the alarm types">AlarmTypesText</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>]);
                }
                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;\r\n&quot;</span>);


<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

                <span class="comment">// Jobs not over until you have wiped and flushed</span>
                UDPFlush();
        } <span class="comment">// UDPIsPutReady(XPLSocket)</span>

} <span class="comment">// SendAlarmingMsg</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_ae9e6733b7fed738a76787f01762bb284_cgraph.svg" width="518" height="126" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_ae9e6733b7fed738a76787f01762bb284_icgraph.svg" width="1259" height="110" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="acdb6126b5578c4ca8c06d5343a7b37df"></a><!-- doxytag: member="SecurityXPLSender.c::SendAreaInfo" ref="acdb6126b5578c4ca8c06d5343a7b37df" args="(int TheArea)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SendAreaInfo </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>TheArea</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_security_x_p_l_sender_8c_source.html#l00711">711</a> of file <a class="el" href="_security_x_p_l_sender_8c_source.html">SecurityXPLSender.c</a>.</p>

<p>References <a class="el" href="x_p_l_8h_source.html#l00006">BOOL</a>, <a class="el" href="x_p_l_8h_source.html#l00053">Class_Security</a>, <a class="el" href="_security_system_8h_source.html#l00012">DEVICEDESCLENGTH</a>, <a class="el" href="_security_system_8h_source.html#l00044">EEDATASTART_DEVICEDESC</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_security_system_8c_source.html#l01467">isZoneMemberOfArea()</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00070">Type_Areainfo</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00014">xPLMsgKey</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>, and <a class="el" href="_security_system_8h_source.html#l00007">ZONECOUNT</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                                {

        <span class="keywordtype">int</span> <span class="keywordtype">short</span> iTotal;
        <a class="code" href="x_p_l_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a> isFirstZone = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;

        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# SendAreaInfo, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {
                <span class="comment">//security.gateway</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba044979f8b65ecedf0ca73e5ab66bd7ad">Class_Security</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014aba9b7129264b9f34ae69037d02ae8faf" title="Part of the security schema.">Type_Areainfo</a>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;area=&quot;</span>);
                UDPPut(<span class="charliteral">&#39;0&#39;</span>+ TheArea);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nzone-list=&quot;</span>);

                iTotal = 0;
                <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a290b0da69aaf212aa38c219c45a6d8a9">isZoneMemberOfArea</a>(<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>, TheArea) == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>) {
                                <span class="keywordflow">if</span> (!isFirstZone) UDPPut(<span class="charliteral">&#39;,&#39;</span>);
                                isFirstZone = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                                itoa(<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>);
                                UDPPutArray(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>,strlen(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>));
                                iTotal++;
                        } <span class="comment">// ZoneConfig</span>
                }<span class="comment">// for iCount</span>

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nzone-count=&quot;</span>);
                itoa(iTotal, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>);
                UDPPutArray(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>,strlen(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>));

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nroom=&quot;</span>);

                <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = (int)<a class="code" href="_security_system_8h.html#aa099c08420f2e838607142a7edaa8aa8">EEDATASTART_DEVICEDESC</a> + ((<span class="keywordtype">int</span>)<a class="code" href="_security_system_8h.html#a61145d9f711460b73af75ef123fc76f6">DEVICEDESCLENGTH</a> * (int)ZONECOUNT) + 1;
                <span class="keywordflow">if</span> (TheArea != 0)
                        <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> += (int)TheArea * (<span class="keywordtype">int</span>)<a class="code" href="_security_system_8h.html#a61145d9f711460b73af75ef123fc76f6">DEVICEDESCLENGTH</a> ;

                XEEReadArray ((DWORD) <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a> , (BYTE) <a class="code" href="_security_system_8h.html#a61145d9f711460b73af75ef123fc76f6">DEVICEDESCLENGTH</a>);
                TCPPutArray(sktHTTP, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>, <a class="code" href="_security_system_8h.html#a61145d9f711460b73af75ef123fc76f6">DEVICEDESCLENGTH</a>);

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;}\n&quot;</span>);

                <span class="comment">// Now transmit it.</span>
                UDPFlush();

        }<span class="comment">//UDPIsPutReady(XPLSocket)</span>

} <span class="comment">// SendAreaInfo</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_acdb6126b5578c4ca8c06d5343a7b37df_cgraph.svg" width="483" height="126" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_acdb6126b5578c4ca8c06d5343a7b37df_icgraph.svg" width="699" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a43dbd62169c9f83be3663dc435e232c7"></a><!-- doxytag: member="SecurityXPLSender.c::SendAreaList" ref="a43dbd62169c9f83be3663dc435e232c7" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SendAreaList </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_security_x_p_l_sender_8c_source.html#l00587">587</a> of file <a class="el" href="_security_x_p_l_sender_8c_source.html">SecurityXPLSender.c</a>.</p>

<p>References <a class="el" href="_security_system_8h_source.html#l00008">AREACOUNT</a>, <a class="el" href="x_p_l_8h_source.html#l00006">BOOL</a>, <a class="el" href="x_p_l_8h_source.html#l00053">Class_Security</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00073">Type_Arealist</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, and <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                         {

        <span class="keywordtype">int</span> <span class="keywordtype">short</span> <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>;
        <a class="code" href="x_p_l_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a> isFirstZone = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;

        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# SendAreaList, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {
                <span class="comment">//security.gateway</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba044979f8b65ecedf0ca73e5ab66bd7ad">Class_Security</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a81db81080b48d653baf6a7f98d3e0e22" title="Part of the security schema.">Type_Arealist</a>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;area-list=&quot;</span>);

                <span class="keywordflow">for</span> (iCount = 0; iCount &lt; <a class="code" href="_security_system_8h.html#af9feef5e257517789486c320b17e82bd">AREACOUNT</a>; iCount++) {
                        <span class="keywordflow">if</span> (!isFirstZone) UDPPut(<span class="charliteral">&#39;,&#39;</span>);
                        isFirstZone = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                        UDPPut(<span class="charliteral">&#39;0&#39;</span>+iCount);
                }<span class="comment">// for iCount</span>

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n}\n&quot;</span>);

                <span class="comment">// Now transmit it.</span>
                UDPFlush();

        }<span class="comment">//UDPIsPutReady(XPLSocket)</span>

} <span class="comment">// SendAreaList</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_a43dbd62169c9f83be3663dc435e232c7_cgraph.svg" width="419" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_a43dbd62169c9f83be3663dc435e232c7_icgraph.svg" width="699" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5d91f06e22d49f6ecee37802e866e0e6"></a><!-- doxytag: member="SecurityXPLSender.c::SendAreaStat" ref="a5d91f06e22d49f6ecee37802e866e0e6" args="(int TheArea)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SendAreaStat </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>TheArea</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_security_x_p_l_sender_8c_source.html#l01084">1084</a> of file <a class="el" href="_security_x_p_l_sender_8c_source.html">SecurityXPLSender.c</a>.</p>

<p>References <a class="el" href="_security_system_8c_source.html#l00044">AlarmTypesText</a>, <a class="el" href="_security_system_8c_source.html#l00149">AreaConfig</a>, <a class="el" href="x_p_l_8h_source.html#l00052">Class_Config</a>, <a class="el" href="_security_system_8c_source.html#l00035">i2Count</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_security_system_8c_source.html#l01467">isZoneMemberOfArea()</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00067">Type_Areastat</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00014">xPLMsgKey</a>, <a class="el" href="x_p_l_8h_source.html#l00022">xPLMSGKEYLENGTH</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>, and <a class="el" href="_security_system_8h_source.html#l00007">ZONECOUNT</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                                {


        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# SendAreaStat, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {
                <span class="comment">//security.gateway</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba14f0290b427ed1601cbd6b99072f4401">Class_Config</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014abc2a5ebedc397c760915df455e5f20a5" title="Part of the security schema.">Type_Areastat</a>);

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;area=&quot;</span>);
                UDPPut(<span class="charliteral">&#39;0&#39;</span>+ TheArea);

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\narmed=&quot;</span>);
                <span class="keywordflow">if</span>(<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[TheArea].IsArmed == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;true&quot;</span>);
                <span class="keywordflow">else</span>
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;false&quot;</span>);

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nalert=&quot;</span>);
                <span class="keywordflow">if</span>(<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[TheArea].IsTriggered == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;true&quot;</span>);
                <span class="keywordflow">else</span>
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;false&quot;</span>);

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nalarm=&quot;</span>);
                <span class="keywordflow">if</span>(<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[TheArea].IsAlarmed == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>) {

                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;true\nalarm-type=&quot;</span>);
                        UDPPutROMString(<a class="code" href="_security_system_8c.html#a8cba7131f5350817bd065e867459fa69" title="determines the text outputed in the xPL message for each of the alarm types">AlarmTypesText</a>[<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[TheArea].ZoneAlarmType]);

                        <a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a> =0;
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nalarm-zones=&quot;</span>);
                        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a290b0da69aaf212aa38c219c45a6d8a9">isZoneMemberOfArea</a>(<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>, TheArea) == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>) {
                                        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a> != 0) UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;,&quot;</span>);
                                        <a class="code" href="_security_system_8c.html#a57f58df4fd7d5efb217812f40e79a968">i2Count</a> = 1;
                                        memset(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>,<span class="charliteral">&#39;\0&#39;</span>,<a class="code" href="x_p_l_8h.html#a8093f823771092ea99bef8d0b1ce5454">xPLMSGKEYLENGTH</a>);
                                        uitoa(<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>,  <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>);
                                        UDPPutString(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>);
                                }<span class="comment">// isZoneMemberOfArea</span>
                        }<span class="comment">// for</span>
                }<span class="comment">//     IsAlarmed == TRUE</span>


                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\ntamper=&quot;</span>);
                <span class="keywordflow">if</span>(<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[TheArea].IsTampered == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;true&quot;</span>);
                <span class="keywordflow">else</span>
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;false&quot;</span>);


                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nisolated=&quot;</span>);
                <span class="keywordflow">if</span>(<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[TheArea].IsIsolated == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;true&quot;</span>);
                <span class="keywordflow">else</span>
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;false&quot;</span>);


                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nbypassed=&quot;</span>);
                <span class="keywordflow">if</span>(<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[TheArea].IsBypassed == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;true&quot;</span>);
                <span class="keywordflow">else</span>
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;false&quot;</span>);


                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n}\n&quot;</span>);

                <span class="comment">// Now transmit it.</span>
                UDPFlush();

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;SendAreaStat sent&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        }<span class="comment">//UDPIsPutReady(XPLSocket)</span>


} <span class="comment">//SendGateStat</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_a5d91f06e22d49f6ecee37802e866e0e6_cgraph.svg" width="488" height="126" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_a5d91f06e22d49f6ecee37802e866e0e6_icgraph.svg" width="704" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae77b19bae92f6c64f9a58f722b4bf193"></a><!-- doxytag: member="SecurityXPLSender.c::SendAreaStateMsg" ref="ae77b19bae92f6c64f9a58f722b4bf193" args="(Zone_States CurrentZoneState, int TheZone, int StartPoint)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SendAreaStateMsg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_security_system_8h.html#abdc99e93ae47c7d6cb907274a3018ff4">Zone_States</a>&#160;</td>
          <td class="paramname"><em>CurrentZoneState</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>TheZone</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>StartPoint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create and send the xPL message for a change in state within a area. This only covers Tamper, Trigger and normal events, not alarmed. This needs to be called until the result = 0</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">MessageType</td><td>only support Tamper, Trigger and normal events </td></tr>
    <tr><td class="paramname">TheZone,yes</td><td>zone to send area messages </td></tr>
    <tr><td class="paramname">StartPoint,is</td><td>the starting area, used to resume from previous point </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 = no message sent, 1 = message sent &amp; must call again </dd></dl>

<p>Definition at line <a class="el" href="_security_x_p_l_sender_8c_source.html#l00132">132</a> of file <a class="el" href="_security_x_p_l_sender_8c_source.html">SecurityXPLSender.c</a>.</p>

<p>References <a class="el" href="_security_system_8c_source.html#l00149">AreaConfig</a>, <a class="el" href="_security_system_8h_source.html#l00008">AREACOUNT</a>, <a class="el" href="x_p_l_8h_source.html#l00006">BOOL</a>, <a class="el" href="x_p_l_8h_source.html#l00053">Class_Security</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8c_source.html#l01467">isZoneMemberOfArea()</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_security_system_8h_source.html#l00155">StateNormal</a>, <a class="el" href="_security_system_8h_source.html#l00157">StateTamper</a>, <a class="el" href="_security_system_8h_source.html#l00156">StateTrigger</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00064">Type_Area</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, and <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                 {

        <span class="keywordtype">int</span> iCounter, TheArea;
        <span class="keywordtype">char</span> TheAreaTxt[2];
        <a class="code" href="x_p_l_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a> FirstArea = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
        <a class="code" href="x_p_l_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a> UpdateRequired = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;


        <span class="comment">// Check to see if this zone is a member of any area(s), if not no update is required</span>
        <span class="comment">// if it we save the area id for later</span>
        <span class="keywordflow">for</span> (iCounter = StartPoint; iCounter &lt;= <a class="code" href="_security_system_8h.html#af9feef5e257517789486c320b17e82bd">AREACOUNT</a>-1; iCounter++) {
                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a290b0da69aaf212aa38c219c45a6d8a9">isZoneMemberOfArea</a>(TheZone, iCounter) == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)  {
                        
                        <span class="comment">// if tampered we only update the area state if the state is normal, triggered or tampered</span>
                        <span class="keywordflow">if</span> (CurrentZoneState == <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaef85932220f85c5f09ff9f3999755180" title="Since last check the zone has changes to Tampered.">StateTamper</a>) {
                                <span class="keywordflow">if</span> ((<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[iCounter].State == <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaff695d83533d89f59fa409f3d0301875" title="Since last check the zone has changed to normal.">StateNormal</a>) || (<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[iCounter].State == <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfa28c4bd56c6dff19d5f2741a0cb5ed47f" title="Since last check the zone has changes to Triggered.">StateTrigger</a>) || (<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[iCounter].State == <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaef85932220f85c5f09ff9f3999755180" title="Since last check the zone has changes to Tampered.">StateTamper</a>)) {
                                        UpdateRequired = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                                        TheArea = iCounter;
                                        <span class="keywordflow">break</span>; 
                                }       
                        }       
                        
                        <span class="comment">// if triggered we only update the area state if the state is normal or triggered</span>
                        <span class="keywordflow">if</span> (CurrentZoneState == <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfa28c4bd56c6dff19d5f2741a0cb5ed47f" title="Since last check the zone has changes to Triggered.">StateTrigger</a>) {
                                <span class="keywordflow">if</span> ((<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[iCounter].State == <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaff695d83533d89f59fa409f3d0301875" title="Since last check the zone has changed to normal.">StateNormal</a>) || (<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[iCounter].State == <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfa28c4bd56c6dff19d5f2741a0cb5ed47f" title="Since last check the zone has changes to Triggered.">StateTrigger</a>)) {
                                        UpdateRequired = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                                        TheArea = iCounter;
                                        <span class="keywordflow">break</span>; <span class="comment">// \todo check this does not stop multiple areas from working</span>
                                }       
                        }       
                        
                        <span class="comment">// if normal we only update is area is normal</span>
                        <span class="keywordflow">if</span> (CurrentZoneState == <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaff695d83533d89f59fa409f3d0301875" title="Since last check the zone has changed to normal.">StateNormal</a>) {
                                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[iCounter].State == <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaff695d83533d89f59fa409f3d0301875" title="Since last check the zone has changed to normal.">StateNormal</a>) {
                                        UpdateRequired = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                                        TheArea = iCounter;
                                        <span class="keywordflow">break</span>; 
                                }       
                        }       
                        
                }<span class="comment">// isZoneMemberOfArea</span>
        }<span class="comment">// iCounter</span>

        <span class="keywordflow">if</span> (UpdateRequired == <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>) {
                <span class="comment">// Do nothing</span>
                <span class="keywordflow">return</span> 0;
        }


        <span class="comment">//Send the message for this area</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) { <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# SendAreaStateMsg, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }

        <span class="keywordflow">else</span> {
                <span class="comment">// Generate xPL head with type security.zone</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba044979f8b65ecedf0ca73e5ab66bd7ad">Class_Security</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014aa8061dadd063bb50c19c744609e3178f" title="Part of the security schema.">Type_Area</a>);

                <span class="comment">// Trigger event</span>
                <span class="keywordflow">if</span> (CurrentZoneState == <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfa28c4bd56c6dff19d5f2741a0cb5ed47f" title="Since last check the zone has changes to Triggered.">StateTrigger</a>) 
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;event=alert\narea=&quot;</span>);
                
                <span class="comment">// Tamper event</span>
                <span class="keywordflow">if</span> (CurrentZoneState == <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaef85932220f85c5f09ff9f3999755180" title="Since last check the zone has changes to Tampered.">StateTamper</a>) 
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;event=tamper\narea=&quot;</span>);
                
                <span class="comment">// Normal event</span>
                <span class="keywordflow">if</span> (CurrentZoneState == <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaff695d83533d89f59fa409f3d0301875" title="Since last check the zone has changed to normal.">StateNormal</a>) 
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;event=normal\narea=&quot;</span>);
                
                itoa(TheArea, TheAreaTxt);
                UDPPutArray(TheAreaTxt,strlen(TheAreaTxt));
        
                <span class="comment">// Now transmit it.</span>
                UDPFlush();

        }<span class="comment">//UDPIsPutReady(XPLSocket)</span>

<span class="keywordflow">return</span> ++TheArea;

} <span class="comment">// SendAreaStateMsg</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_ae77b19bae92f6c64f9a58f722b4bf193_cgraph.svg" width="531" height="126" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_ae77b19bae92f6c64f9a58f722b4bf193_icgraph.svg" width="747" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae049c3724d5bacc955f50f724483ed91"></a><!-- doxytag: member="SecurityXPLSender.c::SendArmed" ref="ae049c3724d5bacc955f50f724483ed91" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SendArmed </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_security_x_p_l_sender_8c_source.html#l00395">395</a> of file <a class="el" href="_security_x_p_l_sender_8c_source.html">SecurityXPLSender.c</a>.</p>

<p>References <a class="el" href="_security_system_8c_source.html#l00149">AreaConfig</a>, <a class="el" href="_security_system_8h_source.html#l00008">AREACOUNT</a>, <a class="el" href="x_p_l_8h_source.html#l00006">BOOL</a>, <a class="el" href="x_p_l_8h_source.html#l00053">Class_Security</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00066">Type_Gateway</a>, <a class="el" href="_security_system_8c_source.html#l00037">UserID</a>, <a class="el" href="_security_system_8h_source.html#l00009">USERNAMELENGTH</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>, <a class="el" href="_security_system_8c_source.html#l00143">ZoneConfig</a>, and <a class="el" href="_security_system_8h_source.html#l00007">ZONECOUNT</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                      {

        <a class="code" href="x_p_l_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a> isFirst;
        <span class="keywordtype">char</span> TempVal[3];

        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# SendArmed, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {
                <span class="comment">//security.gateway</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba044979f8b65ecedf0ca73e5ab66bd7ad">Class_Security</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a1ffc8fbc4fd8675c7ac9a73abcb5b2ec" title="Part of the security schema.">Type_Gateway</a>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;event=armed\n&quot;</span>);

                <span class="comment">// Zone list</span>
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;zone-list=&quot;</span>);
                isFirst = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                        <span class="keywordflow">if</span>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].IsArmed == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>) {
                                <span class="keywordflow">if</span> (!isFirst) UDPPut(<span class="charliteral">&#39;,&#39;</span>);
                                isFirst = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                                itoa(<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>, TempVal);
                                UDPPutArray(TempVal,strlen(TempVal));
                        }<span class="comment">// isArmed</span>
                }<span class="comment">// for iCount</span>
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n&quot;</span>);

                <span class="comment">// area list</span>
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;area-list=&quot;</span>);
                isFirst = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#af9feef5e257517789486c320b17e82bd">AREACOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                        <span class="keywordflow">if</span>(<a class="code" href="_security_system_8c.html#a6d79e0918c6b94528f6283856d663a9b" title="Stores each Area configuration information.">AreaConfig</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>].IsArmed == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>) {
                                <span class="keywordflow">if</span> (!isFirst) UDPPut(<span class="charliteral">&#39;,&#39;</span>);
                                isFirst = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                                itoa(<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>, TempVal);
                                UDPPutArray(TempVal,strlen(TempVal));
                        }<span class="comment">// isArmed</span>
                }<span class="comment">// for iCount</span>
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n&quot;</span>);


                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#af1c18f7532835833de15218c3aa5d146" title="Name of user.">UserID</a>[0] != <span class="charliteral">&#39;\0&#39;</span>) {
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;user=&quot;</span>);
                        UDPPutString(<a class="code" href="_security_system_8c.html#af1c18f7532835833de15218c3aa5d146" title="Name of user.">UserID</a>);
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n&quot;</span>);
                }

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;}\n&quot;</span>);


                <span class="comment">// Now transmit it.</span>
                UDPFlush();

                <span class="comment">// no more need for UserID to be populated</span>
                memset(<a class="code" href="_security_system_8c.html#af1c18f7532835833de15218c3aa5d146" title="Name of user.">UserID</a>,<span class="charliteral">&#39;\0&#39;</span>,<a class="code" href="_security_system_8h.html#ab2d5f95a4974c4f332df9f6a41022219">USERNAMELENGTH</a>);


<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;SendArmed Message Sent\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

        } <span class="comment">//UDPIsPutReady(XPLSocket)</span>
} <span class="comment">// SendArmed</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_ae049c3724d5bacc955f50f724483ed91_cgraph.svg" width="403" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_ae049c3724d5bacc955f50f724483ed91_icgraph.svg" width="683" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a80218fda4a4753b2d214453e14b400ff"></a><!-- doxytag: member="SecurityXPLSender.c::SendBatteryStat" ref="a80218fda4a4753b2d214453e14b400ff" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SendBatteryStat </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_security_x_p_l_sender_8c_source.html#l00929">929</a> of file <a class="el" href="_security_x_p_l_sender_8c_source.html">SecurityXPLSender.c</a>.</p>

<p>References <a class="el" href="_security_system_8h_source.html#l00053">BATTERY_LOW</a>, <a class="el" href="x_p_l_8h_source.html#l00052">Class_Config</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00066">Type_Gateway</a>, <a class="el" href="_battery_8c_source.html#l00027">VoltageBattery</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, and <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                            {

        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# SendBatteryStat, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {
                <span class="comment">//security.gateway</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba14f0290b427ed1601cbd6b99072f4401">Class_Config</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a1ffc8fbc4fd8675c7ac9a73abcb5b2ec" title="Part of the security schema.">Type_Gateway</a>);

                <span class="keywordflow">if</span> (<a class="code" href="_battery_8c.html#abc18e4dde03a4d8707108764cf095185" title="Battery voltage.">VoltageBattery</a> &lt;  (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) <a class="code" href="_security_system_8h.html#afd318e2ebde322f320606bb98b7b7ba1">BATTERY_LOW</a>)
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;event=low-battery\n}\n&quot;</span>);
                <span class="keywordflow">else</span>
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;event=battery-ok\n}\n&quot;</span>);

                <span class="comment">// Now transmit it.</span>
                UDPFlush();

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;SendBatteryStat sent\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        }<span class="comment">//UDPIsPutReady(XPLSocket)</span>
} <span class="comment">//SendBatteryStat</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_a80218fda4a4753b2d214453e14b400ff_cgraph.svg" width="446" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_a80218fda4a4753b2d214453e14b400ff_icgraph.svg" width="726" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a729b2eb0275e2affcdf87121b20125fc"></a><!-- doxytag: member="SecurityXPLSender.c::SendConfigCurrent" ref="a729b2eb0275e2affcdf87121b20125fc" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SendConfigCurrent </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_security_x_p_l_sender_8c_source.html#l00814">814</a> of file <a class="el" href="_security_x_p_l_sender_8c_source.html">SecurityXPLSender.c</a>.</p>

<p>References <a class="el" href="_main_demo_8c_source.html#l00030">AppConfig</a>, <a class="el" href="x_p_l_8h_source.html#l00052">Class_Config</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_security_x_p_l_sender_8c_source.html#l00871">SendIPValue()</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00063">Type_Current</a>, <a class="el" href="_security_system_8h_source.html#l00202">xPLConfigs::xPL_Heartbeat_Interval</a>, <a class="el" href="_security_system_8h_source.html#l00203">xPLConfigs::xPL_My_Instance_ID</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="_security_system_8c_source.html#l00136">xPLConfig</a>, <a class="el" href="x_p_l_8c_source.html#l00014">xPLMsgKey</a>, <a class="el" href="x_p_l_8h_source.html#l00022">xPLMSGKEYLENGTH</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, and <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>.</p>
<div class="fragment"><pre class="fragment">                              {

        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# SendConfigCurrent, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {
                <span class="comment">//security.gateway</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba14f0290b427ed1601cbd6b99072f4401">Class_Config</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a1168ef3342189eb73f687fbfefa5225c">Type_Current</a>);

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;newconf=&quot;</span>);
                <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; ! <a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a9c46c7c2fe40ff45c5a12adb588bf4d5" title="xPL instance name of this device">xPL_My_Instance_ID</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>] == <span class="charliteral">&#39;\0&#39;</span>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                        UDPPut(<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a9c46c7c2fe40ff45c5a12adb588bf4d5" title="xPL instance name of this device">xPL_My_Instance_ID</a>[<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>]);
                }
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n&quot;</span>);

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;interval=&quot;</span>);
                memset(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>,<span class="charliteral">&#39;\0&#39;</span>,<a class="code" href="x_p_l_8h.html#a8093f823771092ea99bef8d0b1ce5454">xPLMSGKEYLENGTH</a>);
                uitoa((WORD)<a class="code" href="_security_system_8c.html#adaa5e54872217e9a75a2bfdadf293d12" title="Configuration entries.">xPLConfig</a>.<a class="code" href="structx_p_l_configs.html#a7111b59426453cce173352e2d7ef9dc3" title="Interval of the xPL heatbeat message in seconds.">xPL_Heartbeat_Interval</a>, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>);
                UDPPutString(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n&quot;</span>);

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;ip=&quot;</span>);
                <a class="code" href="_security_system_8h.html#a0a59aa6a73171b98b88cf2f9070ceac4">SendIPValue</a>(<a class="code" href="_main_demo_8c.html#a67540808395519081be1333c4e9aa1f8">AppConfig</a>.MyIPAddr);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n&quot;</span>);

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;subnet=&quot;</span>);
                <a class="code" href="_security_system_8h.html#a0a59aa6a73171b98b88cf2f9070ceac4">SendIPValue</a>(<a class="code" href="_main_demo_8c.html#a67540808395519081be1333c4e9aa1f8">AppConfig</a>.MyMask);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n&quot;</span>);


                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;}\n&quot;</span>);

                <span class="comment">// Now transmit it.</span>
                UDPFlush();

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;SendConfigCurrent sent&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        }<span class="comment">//UDPIsPutReady(XPLSocket)</span>

} <span class="comment">// SendAreaList</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_a729b2eb0275e2affcdf87121b20125fc_cgraph.svg" width="464" height="126" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a07582d84515caf26cd22e534fd29f378"></a><!-- doxytag: member="SecurityXPLSender.c::SendConfigList" ref="a07582d84515caf26cd22e534fd29f378" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SendConfigList </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_security_x_p_l_sender_8c_source.html#l00774">774</a> of file <a class="el" href="_security_x_p_l_sender_8c_source.html">SecurityXPLSender.c</a>.</p>

<p>References <a class="el" href="x_p_l_8h_source.html#l00052">Class_Config</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00059">Type_List</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, and <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                           {

        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# SendConfigList, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {
                <span class="comment">//security.gateway</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba14f0290b427ed1601cbd6b99072f4401">Class_Config</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014adf15d91ef041bd13132e6c4fbfcced4f">Type_List</a>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;reconf=newconf\n&quot;</span>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;option=interval\n&quot;</span>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;option=ip\n&quot;</span>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;option=subnet\n&quot;</span>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;}\n&quot;</span>);

                <span class="comment">// Now transmit it.</span>
                UDPFlush();

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;SendConfigList sent&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

        }<span class="comment">//UDPIsPutReady(XPLSocket)</span>

} <span class="comment">// SendAreaList</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_a07582d84515caf26cd22e534fd29f378_cgraph.svg" width="432" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_a07582d84515caf26cd22e534fd29f378_icgraph.svg" width="712" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="af1800c287b83d40961f39fcd9a751322"></a><!-- doxytag: member="SecurityXPLSender.c::SendDisarm" ref="af1800c287b83d40961f39fcd9a751322" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SendDisarm </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_security_x_p_l_sender_8c_source.html#l00504">504</a> of file <a class="el" href="_security_x_p_l_sender_8c_source.html">SecurityXPLSender.c</a>.</p>

<p>References <a class="el" href="x_p_l_8h_source.html#l00053">Class_Security</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00066">Type_Gateway</a>, <a class="el" href="_security_system_8c_source.html#l00037">UserID</a>, <a class="el" href="_security_system_8h_source.html#l00009">USERNAMELENGTH</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, and <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                       {

        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# SendDisarm, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {
                <span class="comment">//security.gateway</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba044979f8b65ecedf0ca73e5ab66bd7ad">Class_Security</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a1ffc8fbc4fd8675c7ac9a73abcb5b2ec" title="Part of the security schema.">Type_Gateway</a>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;event=disarmed\nuser=&quot;</span>);
                UDPPutString(<a class="code" href="_security_system_8c.html#af1c18f7532835833de15218c3aa5d146" title="Name of user.">UserID</a>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n}\n&quot;</span>);
                <span class="comment">// Now transmit it.</span>
                UDPFlush();


                <span class="comment">// no more need for UserID to be populated</span>
                memset(<a class="code" href="_security_system_8c.html#af1c18f7532835833de15218c3aa5d146" title="Name of user.">UserID</a>,<span class="charliteral">&#39;\0&#39;</span>,<a class="code" href="_security_system_8h.html#ab2d5f95a4974c4f332df9f6a41022219">USERNAMELENGTH</a>);

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;SendDisarm Message Sent\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>


        }<span class="comment">//UDPIsPutReady(XPLSocket)</span>

} <span class="comment">// SendDisarm</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_af1800c287b83d40961f39fcd9a751322_cgraph.svg" width="406" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_af1800c287b83d40961f39fcd9a751322_icgraph.svg" width="686" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab29cace49ca20af0048aac94e64c10dd"></a><!-- doxytag: member="SecurityXPLSender.c::SendError" ref="ab29cace49ca20af0048aac94e64c10dd" args="(rom char *ErrorMessage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SendError </td>
          <td>(</td>
          <td class="paramtype">rom char *&#160;</td>
          <td class="paramname"><em>ErrorMessage</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_security_x_p_l_sender_8c_source.html#l00471">471</a> of file <a class="el" href="_security_x_p_l_sender_8c_source.html">SecurityXPLSender.c</a>.</p>

<p>References <a class="el" href="x_p_l_8h_source.html#l00053">Class_Security</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00066">Type_Gateway</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, and <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                                         {

        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# SendError, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {
                <span class="comment">//security.gateway</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba044979f8b65ecedf0ca73e5ab66bd7ad">Class_Security</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a1ffc8fbc4fd8675c7ac9a73abcb5b2ec" title="Part of the security schema.">Type_Gateway</a>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;event=error&quot;</span>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;error=&quot;</span>);

                UDPPutROMString((ROM BYTE*) ErrorMessage);

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n}\n&quot;</span>);

                <span class="comment">// Now transmit it.</span>
                UDPFlush();

        } <span class="comment">//UDPIsPutReady(XPLSocket)</span>

} <span class="comment">// SendError</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_ab29cace49ca20af0048aac94e64c10dd_cgraph.svg" width="390" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_ab29cace49ca20af0048aac94e64c10dd_icgraph.svg" width="670" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aeb4ee205f02bf767a5d3b93608abc736"></a><!-- doxytag: member="SecurityXPLSender.c::SendGateStat" ref="aeb4ee205f02bf767a5d3b93608abc736" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SendGateStat </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_security_x_p_l_sender_8c_source.html#l01002">1002</a> of file <a class="el" href="_security_x_p_l_sender_8c_source.html">SecurityXPLSender.c</a>.</p>

<p>References <a class="el" href="_security_system_8c_source.html#l00017">AlarmState</a>, <a class="el" href="_security_system_8c_source.html#l00044">AlarmTypesText</a>, <a class="el" href="_security_system_8h_source.html#l00008">AREACOUNT</a>, <a class="el" href="_security_system_8h_source.html#l00116">Armed</a>, <a class="el" href="_security_system_8h_source.html#l00115">Armed_LatchKey</a>, <a class="el" href="_security_system_8h_source.html#l00103">Battery_InUse</a>, <a class="el" href="_security_system_8h_source.html#l00053">BATTERY_LOW</a>, <a class="el" href="_battery_8c_source.html#l00026">BatteryState</a>, <a class="el" href="x_p_l_8h_source.html#l00006">BOOL</a>, <a class="el" href="x_p_l_8h_source.html#l00052">Class_Config</a>, <a class="el" href="_security_system_8h_source.html#l00110">Disarmed</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_security_system_8c_source.html#l01467">isZoneMemberOfArea()</a>, <a class="el" href="_security_system_8c_source.html#l00039">LastZoneAlarmed</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00069">Type_Gatestat</a>, <a class="el" href="_battery_8c_source.html#l00027">VoltageBattery</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00014">xPLMsgKey</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>, and <a class="el" href="_security_system_8c_source.html#l00143">ZoneConfig</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                         {

        <span class="keywordtype">char</span> TempVal[3];
        <a class="code" href="x_p_l_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a> isFirstArea;

        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# SendGateStat, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {
                <span class="comment">//security.gateway</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba14f0290b427ed1601cbd6b99072f4401">Class_Config</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014aa146efd7bd1b148961537a64269f53e1" title="Part of the security schema.">Type_Gatestat</a>);

                <span class="comment">// AC power state</span>
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;ac-fail=&quot;</span>);
                <span class="keywordflow">if</span> (<a class="code" href="_battery_8c.html#a35b967426a12072affebab82da722ef3" title="Keeps track of the battery state.">BatteryState</a> == <a class="code" href="_security_system_8h.html#a462bad824ca26348ba295528d4a61f23a11cc1f448ca555568d3c5e4f649c76d9">Battery_InUse</a>)
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;true\n&quot;</span>);
                <span class="keywordflow">else</span>
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;false\n&quot;</span>);

                <span class="comment">// internal battery state</span>
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;low-battery=&quot;</span>);
                <span class="keywordflow">if</span> (<a class="code" href="_battery_8c.html#abc18e4dde03a4d8707108764cf095185" title="Battery voltage.">VoltageBattery</a> &lt;  (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) <a class="code" href="_security_system_8h.html#afd318e2ebde322f320606bb98b7b7ba1">BATTERY_LOW</a>)
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;true\n&quot;</span>);
                <span class="keywordflow">else</span>
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;false\n&quot;</span>);

                <span class="comment">// Alarm state</span>
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;status=&quot;</span>);
                <span class="keywordflow">if</span> ((<a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> == <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfa0943115c51834114c13d76fb189f56d0">Armed</a>) || (<a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> == <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfa8bb76e1105100766672990f93e063c3c">Armed_LatchKey</a>) )
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;armed\n&quot;</span>);
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="_security_system_8c.html#a016286d63fa2bb14fec565ed023b35cf" title="Reflects the state of the alarm.">AlarmState</a> == <a class="code" href="_security_system_8h.html#a2c35ecf033af7102413d9338fc1e9acfacf99f746f17e92913d15be9fc92d708c">Disarmed</a>)
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;disarmed\n&quot;</span>);
                <span class="keywordflow">else</span> { <span class="comment">// must be in an alarming state</span>
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;alarm\n&quot;</span>);
                        uitoa(<a class="code" href="_security_system_8c.html#ab4811cda05bf084486e0e786e68498ea" title="The last zone to change to alarmed state. used in SMTP.c.">LastZoneAlarmed</a>,  TempVal);
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;zone-list=&quot;</span>);
                        UDPPutString(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>);
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n&quot;</span>);
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;area-list=&quot;</span>);

                        isFirstArea = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
                        <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#af9feef5e257517789486c320b17e82bd">AREACOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a290b0da69aaf212aa38c219c45a6d8a9">isZoneMemberOfArea</a>(<a class="code" href="_security_system_8c.html#ab4811cda05bf084486e0e786e68498ea" title="The last zone to change to alarmed state. used in SMTP.c.">LastZoneAlarmed</a>, <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>) == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>) {
                                        <span class="keywordflow">if</span> (!isFirstArea) UDPPut(<span class="charliteral">&#39;,&#39;</span>);
                                        isFirstArea = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                                        UDPPut(<span class="charliteral">&#39;0&#39;</span>+<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>);
                                }<span class="comment">// isZoneMemberOfArea</span>
                        }<span class="comment">// for iCount</span>

                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n&quot;</span>);
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;alarm-type=&quot;</span>);
                        UDPPutROMString(<a class="code" href="_security_system_8c.html#a8cba7131f5350817bd065e867459fa69" title="determines the text outputed in the xPL message for each of the alarm types">AlarmTypesText</a>[<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[<a class="code" href="_security_system_8c.html#ab4811cda05bf084486e0e786e68498ea" title="The last zone to change to alarmed state. used in SMTP.c.">LastZoneAlarmed</a>].ZoneAlarmType]);
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n&quot;</span>);
                }<span class="comment">// alarm state</span>

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;}\n&quot;</span>);
                <span class="comment">// Now transmit it.</span>
                UDPFlush();

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;SendGateStat sent&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        }<span class="comment">//UDPIsPutReady(XPLSocket)</span>


} <span class="comment">//SendGateStat</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_aeb4ee205f02bf767a5d3b93608abc736_cgraph.svg" width="488" height="126" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_aeb4ee205f02bf767a5d3b93608abc736_icgraph.svg" width="704" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2c31ecf27fafa5085703f0719f6decac"></a><!-- doxytag: member="SecurityXPLSender.c::SendGatewayChanged" ref="a2c31ecf27fafa5085703f0719f6decac" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SendGatewayChanged </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_security_x_p_l_sender_8c_source.html#l00894">894</a> of file <a class="el" href="_security_x_p_l_sender_8c_source.html">SecurityXPLSender.c</a>.</p>

<p>References <a class="el" href="x_p_l_8h_source.html#l00052">Class_Config</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00066">Type_Gateway</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, and <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                               {

        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# SendGatewayChanged, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {
                <span class="comment">//security.gateway</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba14f0290b427ed1601cbd6b99072f4401">Class_Config</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a1ffc8fbc4fd8675c7ac9a73abcb5b2ec" title="Part of the security schema.">Type_Gateway</a>);

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;event=changed\n}\n&quot;</span>);

                <span class="comment">// Now transmit it.</span>
                UDPFlush();

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;SendGatewayChanged sent&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        }<span class="comment">//UDPIsPutReady(XPLSocket)</span>


} <span class="comment">//SendGatewayChanged</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_a2c31ecf27fafa5085703f0719f6decac_cgraph.svg" width="494" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_a2c31ecf27fafa5085703f0719f6decac_icgraph.svg" width="774" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a46495fd42c19f6703e4663cb7cf2d1ec"></a><!-- doxytag: member="SecurityXPLSender.c::SendGatewayInfo" ref="a46495fd42c19f6703e4663cb7cf2d1ec" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SendGatewayInfo </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_security_x_p_l_sender_8c_source.html#l00306">306</a> of file <a class="el" href="_security_x_p_l_sender_8c_source.html">SecurityXPLSender.c</a>.</p>

<p>References <a class="el" href="_security_system_8h_source.html#l00008">AREACOUNT</a>, <a class="el" href="x_p_l_8h_source.html#l00053">Class_Security</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00072">Type_Gateinfo</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00014">xPLMsgKey</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>, and <a class="el" href="_security_system_8h_source.html#l00007">ZONECOUNT</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                            {

        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# SendGatewayInfo, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {

                <span class="comment">//Generate xPL head with type security.gateway</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba044979f8b65ecedf0ca73e5ab66bd7ad">Class_Security</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a97711ca78fae9dccbf1d55625f99249d" title="Part of the security schema.">Type_Gateinfo</a>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;protocol=xPL\n&quot;</span>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;description=Alarm system designed for Home Automation\n&quot;</span>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;version=Alpha release\n&quot;</span>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;author=Jarrod Neven\n&quot;</span>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;info-url=www.neven.info\n&quot;</span>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;zone-count=&quot;</span>);
                itoa(<a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>);
                UDPPutArray(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>,strlen(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>));
                UDPPut(<span class="charliteral">&#39;\n&#39;</span>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;area-count=&quot;</span>);
                itoa(<a class="code" href="_security_system_8h.html#af9feef5e257517789486c320b17e82bd">AREACOUNT</a>, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>);
                UDPPutArray(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>,strlen(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>));
                UDPPut(<span class="charliteral">&#39;\n&#39;</span>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;gateway-commands=arm|arm-home|arm-away|arm-latchkey|disarm|panic|isolate|bypass|enable\n&quot;</span>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;zone-commands=arm|isolate|bypass|enable\n&quot;</span>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;area-commands=arm,isolate,bypass,enable\n&quot;</span>);

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;}\n&quot;</span>);

                <span class="comment">// Now transmit it.</span>
                UDPFlush();


<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;SendGatewayInfo Message Sent\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        } <span class="comment">// UDPIsPutReady(XPLSocket)</span>


} <span class="comment">//SendGatewayInfo</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_a46495fd42c19f6703e4663cb7cf2d1ec_cgraph.svg" width="451" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_a46495fd42c19f6703e4663cb7cf2d1ec_icgraph.svg" width="731" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad811bd225b593df01e168e1bb0967713"></a><!-- doxytag: member="SecurityXPLSender.c::SendGatewayReady" ref="ad811bd225b593df01e168e1bb0967713" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SendGatewayReady </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_security_x_p_l_sender_8c_source.html#l00360">360</a> of file <a class="el" href="_security_x_p_l_sender_8c_source.html">SecurityXPLSender.c</a>.</p>

<p>References <a class="el" href="x_p_l_8h_source.html#l00053">Class_Security</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00066">Type_Gateway</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, and <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00193">SchemaInit()</a>.</p>
<div class="fragment"><pre class="fragment">                             {

        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# SendGatewayInfo, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {

                <span class="comment">//Generate xPL head with type security.gateway</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba044979f8b65ecedf0ca73e5ab66bd7ad">Class_Security</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a1ffc8fbc4fd8675c7ac9a73abcb5b2ec" title="Part of the security schema.">Type_Gateway</a>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;event=ready\n}\n&quot;</span>);

                <span class="comment">// Now transmit it.</span>
                UDPFlush();

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;SendGatewayReady Message Sent\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        } <span class="comment">// UDPIsPutReady(XPLSocket)</span>


} <span class="comment">//SendGatewayReady</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_ad811bd225b593df01e168e1bb0967713_cgraph.svg" width="472" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_ad811bd225b593df01e168e1bb0967713_icgraph.svg" width="686" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0a59aa6a73171b98b88cf2f9070ceac4"></a><!-- doxytag: member="SecurityXPLSender.c::SendIPValue" ref="a0a59aa6a73171b98b88cf2f9070ceac4" args="(IP_ADDR IPVal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SendIPValue </td>
          <td>(</td>
          <td class="paramtype">IP_ADDR&#160;</td>
          <td class="paramname"><em>IPVal</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_security_x_p_l_sender_8c_source.html#l00871">871</a> of file <a class="el" href="_security_x_p_l_sender_8c_source.html">SecurityXPLSender.c</a>.</p>

<p>Referenced by <a class="el" href="_security_x_p_l_sender_8c_source.html#l00814">SendConfigCurrent()</a>.</p>
<div class="fragment"><pre class="fragment">                                {
    BYTE IPDigit[4];
        BYTE i;

        <span class="keywordflow">for</span>(i = 0; i &lt; <span class="keyword">sizeof</span>(IP_ADDR); i++) {
            uitoa((WORD)IPVal.v[i], IPDigit);
                UDPPutString(IPDigit);
                <span class="keywordflow">if</span>(i == <span class="keyword">sizeof</span>(IP_ADDR)-1)
                        <span class="keywordflow">break</span>;
                UDPPutROMString((ROM <span class="keywordtype">char</span> *)<span class="stringliteral">&quot;.&quot;</span>);
        }

} <span class="comment">// SendIPValue</span>
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_a0a59aa6a73171b98b88cf2f9070ceac4_icgraph.svg" width="438" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae149da75e2b494aa56f4976837706565"></a><!-- doxytag: member="SecurityXPLSender.c::SendZoneInfo" ref="ae149da75e2b494aa56f4976837706565" args="(int TheZone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SendZoneInfo </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>TheZone</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_security_x_p_l_sender_8c_source.html#l00637">637</a> of file <a class="el" href="_security_x_p_l_sender_8c_source.html">SecurityXPLSender.c</a>.</p>

<p>References <a class="el" href="_security_system_8c_source.html#l00044">AlarmTypesText</a>, <a class="el" href="_security_system_8h_source.html#l00008">AREACOUNT</a>, <a class="el" href="x_p_l_8h_source.html#l00006">BOOL</a>, <a class="el" href="x_p_l_8h_source.html#l00053">Class_Security</a>, <a class="el" href="_security_system_8h_source.html#l00012">DEVICEDESCLENGTH</a>, <a class="el" href="_security_system_8h_source.html#l00044">EEDATASTART_DEVICEDESC</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_security_system_8c_source.html#l01467">isZoneMemberOfArea()</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00071">Type_Zoneinfo</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00014">xPLMsgKey</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>, <a class="el" href="_security_system_8c_source.html#l00143">ZoneConfig</a>, and <a class="el" href="_security_system_8c_source.html#l00058">ZoneTypesText</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                                {

        <span class="keywordtype">int</span> <span class="keywordtype">short</span> iTotal;
        <a class="code" href="x_p_l_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a> isFirstZone = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;

        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# SendZoneInfo, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {
                <span class="comment">//security.gateway</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba044979f8b65ecedf0ca73e5ab66bd7ad">Class_Security</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014aad65302b4ad734d48c32cb1ce9232392" title="Part of the security schema.">Type_Zoneinfo</a>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;zone=&quot;</span>);
                itoa(TheZone, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>);
                UDPPutArray(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>,strlen(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>));
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nzone-type=&quot;</span>);
                UDPPutROMString((ROM BYTE*) <a class="code" href="_security_system_8c.html#aa5d4120799cb431593bcf942bea5e521" title="determines the text outputed in the xpl message for each of the zone types">ZoneTypesText</a>[<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].ZoneType]);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nalarm-type=&quot;</span>);
                UDPPutROMString((ROM BYTE*) <a class="code" href="_security_system_8c.html#a8cba7131f5350817bd065e867459fa69" title="determines the text outputed in the xPL message for each of the alarm types">AlarmTypesText</a>[<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].ZoneAlarmType]);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\narea-list=&quot;</span>);

                iTotal = 0;
                <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#af9feef5e257517789486c320b17e82bd">AREACOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                        <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#a290b0da69aaf212aa38c219c45a6d8a9">isZoneMemberOfArea</a>(TheZone, <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>) == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>) {
                                <span class="keywordflow">if</span> (!isFirstZone) UDPPut(<span class="charliteral">&#39;,&#39;</span>);
                                isFirstZone = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                                UDPPut(<span class="charliteral">&#39;0&#39;</span>+ <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>);
                                iTotal++;
                        } <span class="comment">// isZoneMemberOfArea(TheZone, iCount)</span>
                }<span class="comment">// for iCount</span>

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\narea-count=&quot;</span>);
                itoa(iTotal, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>);
                UDPPutArray(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>,strlen(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>));

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nroom=&quot;</span>);

                <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = <a class="code" href="_security_system_8h.html#aa099c08420f2e838607142a7edaa8aa8">EEDATASTART_DEVICEDESC</a>;
                <span class="keywordflow">if</span> (TheZone != 0)
                        <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> += ((int)TheZone * <a class="code" href="_security_system_8h.html#a61145d9f711460b73af75ef123fc76f6">DEVICEDESCLENGTH</a>) + 1;

                XEEReadArray ((DWORD) <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a> , (BYTE) DEVICEDESCLENGTH);
                TCPPutArray(sktHTTP, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>, DEVICEDESCLENGTH);

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n}\n&quot;</span>);

                <span class="comment">// Now transmit it.</span>
                UDPFlush();

        }<span class="comment">//UDPIsPutReady(XPLSocket)</span>

} <span class="comment">// SendZoneInfo</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_ae149da75e2b494aa56f4976837706565_cgraph.svg" width="486" height="126" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_ae149da75e2b494aa56f4976837706565_icgraph.svg" width="702" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5583c2b95797b8210dfe1b1a5e516c2d"></a><!-- doxytag: member="SecurityXPLSender.c::SendZoneList" ref="a5583c2b95797b8210dfe1b1a5e516c2d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SendZoneList </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_security_x_p_l_sender_8c_source.html#l00545">545</a> of file <a class="el" href="_security_x_p_l_sender_8c_source.html">SecurityXPLSender.c</a>.</p>

<p>References <a class="el" href="x_p_l_8h_source.html#l00006">BOOL</a>, <a class="el" href="x_p_l_8h_source.html#l00053">Class_Security</a>, <a class="el" href="x_p_l_8h_source.html#l00004">FALSE</a>, <a class="el" href="_security_system_8c_source.html#l00035">iCount</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00074">Type_Zonelist</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00014">xPLMsgKey</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>, and <a class="el" href="_security_system_8h_source.html#l00007">ZONECOUNT</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                         {

        <a class="code" href="x_p_l_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a> isFirstZone = <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;

        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# SendZoneList, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {
                <span class="comment">//security.gateway</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba044979f8b65ecedf0ca73e5ab66bd7ad">Class_Security</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a68e81d4a483aae55f1a831d5cfa51fba" title="Part of the security schema.">Type_Zonelist</a>);
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;zone-list=&quot;</span>);

                <span class="keywordflow">for</span> (<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> = 0; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a> &lt; <a class="code" href="_security_system_8h.html#a36673b0aa547051d1b4ee6516939b83b">ZONECOUNT</a>; <a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>++) {
                        <span class="keywordflow">if</span> (!isFirstZone) UDPPut(<span class="charliteral">&#39;,&#39;</span>);
                        isFirstZone = <a class="code" href="x_p_l_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                        itoa(<a class="code" href="_security_system_8c.html#a45c8f1ff198e164451795c949f64747a" title="Counters that are used in a number of places, centraly defined to reduce memory use.">iCount</a>, <a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>);
                        UDPPutArray(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>,strlen(<a class="code" href="x_p_l_8c.html#ab1bd647d7b5e8841a1378eedabb62c2e" title="Security, were most of it is at.">xPLMsgKey</a>));
                }<span class="comment">// for iCount</span>

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n}\n&quot;</span>);

                <span class="comment">// Now transmit it.</span>
                UDPFlush();

        }<span class="comment">//UDPIsPutReady(XPLSocket)</span>

} <span class="comment">// SendZoneList</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_a5583c2b95797b8210dfe1b1a5e516c2d_cgraph.svg" width="419" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_a5583c2b95797b8210dfe1b1a5e516c2d_icgraph.svg" width="699" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7fdbfa1929e90a45cc905c6276ab7cae"></a><!-- doxytag: member="SecurityXPLSender.c::SendZoneStat" ref="a7fdbfa1929e90a45cc905c6276ab7cae" args="(int TheZone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SendZoneStat </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>TheZone</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_security_x_p_l_sender_8c_source.html#l01180">1180</a> of file <a class="el" href="_security_x_p_l_sender_8c_source.html">SecurityXPLSender.c</a>.</p>

<p>References <a class="el" href="_security_system_8c_source.html#l00044">AlarmTypesText</a>, <a class="el" href="x_p_l_8h_source.html#l00052">Class_Config</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00067">Type_Areastat</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>, and <a class="el" href="_security_system_8c_source.html#l00143">ZoneConfig</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00591">SchemaTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                                {


        <span class="keywordtype">char</span> TempVal[3];

        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# SendZoneStat, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {
                <span class="comment">//security.gateway</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba14f0290b427ed1601cbd6b99072f4401">Class_Config</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014abc2a5ebedc397c760915df455e5f20a5" title="Part of the security schema.">Type_Areastat</a>);                     

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;zone=&quot;</span>);
                uitoa(TheZone,  TempVal);
                UDPPut((<span class="keywordtype">char</span> *)TempVal);

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\narmed=&quot;</span>);
                <span class="keywordflow">if</span>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].IsArmed == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;true&quot;</span>);
                <span class="keywordflow">else</span>
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;false&quot;</span>);

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nalert=&quot;</span>);
                <span class="keywordflow">if</span>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].IsTriggered == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;true&quot;</span>);
                <span class="keywordflow">else</span>
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;false&quot;</span>);

                <span class="comment">//state</span>
                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nstate=&quot;</span>);
                <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].IsIsolated) 
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;isolated&quot;</span>);
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].IsBypassed) 
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;bypassed&quot;</span>);
                <span class="keywordflow">else</span> 
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;enabled&quot;</span>);


                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\nalarm=&quot;</span>);
                <span class="keywordflow">if</span>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].IsAlarmed == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>) {

                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;true\nalarm-type=&quot;</span>);
                        UDPPutROMString(<a class="code" href="_security_system_8c.html#a8cba7131f5350817bd065e867459fa69" title="determines the text outputed in the xPL message for each of the alarm types">AlarmTypesText</a>[<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].ZoneAlarmType]);
                }<span class="comment">//     IsAlarmed == TRUE</span>

                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\ntamper=&quot;</span>);
                <span class="keywordflow">if</span>(<a class="code" href="_security_system_8c.html#af027bc313be80301e927d4717cb0dc90" title="Stores each Zones configuration information.">ZoneConfig</a>[TheZone].IsTampered == <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;true&quot;</span>);
                <span class="keywordflow">else</span>
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;false&quot;</span>);


                UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n}\n&quot;</span>);

                <span class="comment">// Now transmit it.</span>
                UDPFlush();

<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;SendZoneStat sent&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        }<span class="comment">//UDPIsPutReady(XPLSocket)</span>


} <span class="comment">//SendGateStat</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_a7fdbfa1929e90a45cc905c6276ab7cae_cgraph.svg" width="424" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_a7fdbfa1929e90a45cc905c6276ab7cae_icgraph.svg" width="704" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab01e7f6872c9f26dd9f91bc24f43f4b6"></a><!-- doxytag: member="SecurityXPLSender.c::SendZoneStateMsg" ref="ab01e7f6872c9f26dd9f91bc24f43f4b6" args="(Zone_States MessageType, int TheZone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SendZoneStateMsg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_security_system_8h.html#abdc99e93ae47c7d6cb907274a3018ff4">Zone_States</a>&#160;</td>
          <td class="paramname"><em>MessageType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>TheZone</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create and send the xPL message for a change in state within a zone. This only covers Tamper, Trigger and normal events, not alarmed</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">MessageType</td><td>only support Tamper, Trigger and normal events </td></tr>
    <tr><td class="paramname">TheZone</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_security_x_p_l_sender_8c_source.html#l00075">75</a> of file <a class="el" href="_security_x_p_l_sender_8c_source.html">SecurityXPLSender.c</a>.</p>

<p>References <a class="el" href="x_p_l_8h_source.html#l00053">Class_Security</a>, <a class="el" href="_hardware_profile_8h_source.html#l00204">putrsUART</a>, <a class="el" href="_security_system_8h_source.html#l00155">StateNormal</a>, <a class="el" href="_security_system_8h_source.html#l00157">StateTamper</a>, <a class="el" href="_security_system_8h_source.html#l00156">StateTrigger</a>, <a class="el" href="x_p_l_8h_source.html#l00005">TRUE</a>, <a class="el" href="x_p_l_8h_source.html#l00065">Type_Zone</a>, <a class="el" href="x_p_l_8h_source.html#l00045">xPL_STATUS</a>, <a class="el" href="x_p_l_8c_source.html#l00349">XPLSendHeader()</a>, and <a class="el" href="x_p_l_8c_source.html#l00081">XPLSocket</a>.</p>

<p>Referenced by <a class="el" href="_security_system_8c_source.html#l00780">IOTasks()</a>.</p>
<div class="fragment"><pre class="fragment">                                                             {

        <span class="keywordtype">char</span> strZoneID[3];
        
        <span class="comment">//Check if we have a MAC transmit port, if not then shit yourself</span>
        <span class="keywordflow">if</span> (!UDPIsPutReady(<a class="code" href="x_p_l_8c.html#a8a7b0f54b3a08b018c41f0355a79e659" title="Declares the Microchip IP socket that will be used for processing xPL messages.">XPLSocket</a>)) {
<span class="preprocessor">#if defined(DEBUG_UART)</span>
<span class="preprocessor"></span>                <a class="code" href="_hardware_profile_8h.html#afa49df8d2ce2ae222717e01eb8ed070e">putrsUART</a>((ROM <span class="keywordtype">char</span>*)<span class="stringliteral">&quot;#ERROR# SendZoneStateMsg, no MAC transmit port\r\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span> {
                
                itoa(TheZone, strZoneID);

                <span class="comment">// Generate xPL head with type security.zone</span>
                <a class="code" href="x_p_l_8c.html#abde6ae0f37ef47bee8e881bba8502169">XPLSendHeader</a>(<a class="code" href="x_p_l_8h.html#a1d49f3afa2112fa9ba4dcad8c37edc57af10c40979d8ddcd078a03ab4cee6baaf">xPL_STATUS</a>, <a class="code" href="x_p_l_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,<a class="code" href="x_p_l_8h.html#ae9f1d693fc799733052946c52e2c294ba044979f8b65ecedf0ca73e5ab66bd7ad">Class_Security</a>,<a class="code" href="x_p_l_8h.html#adc01a55a0e491806b8d110084b598014a898c235db41f75422dc1b6870ab35fa9" title="Part of the security schema.">Type_Zone</a>);
                        
                        
                <span class="keywordflow">if</span> (MessageType == <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfa28c4bd56c6dff19d5f2741a0cb5ed47f" title="Since last check the zone has changes to Triggered.">StateTrigger</a>) {
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;event=alert\nzone=&quot;</span>);
                        UDPPutArray(strZoneID,strlen(strZoneID));
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n}\n&quot;</span>);

                }
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (MessageType == <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaef85932220f85c5f09ff9f3999755180" title="Since last check the zone has changes to Tampered.">StateTamper</a>) {
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;event=tamper\nzone=&quot;</span>);
                        UDPPutArray(strZoneID,strlen(strZoneID));
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n}\n&quot;</span>);
                        
                }
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (MessageType == <a class="code" href="_security_system_8h.html#aa6c45927fecfdf58fd988dacbeca2fbfaff695d83533d89f59fa409f3d0301875" title="Since last check the zone has changed to normal.">StateNormal</a>) {
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;event=normal\nzone=&quot;</span>);
                        UDPPutArray(strZoneID,strlen(strZoneID));
                        UDPPutROMString((ROM BYTE*) <span class="stringliteral">&quot;\n}\n&quot;</span>);
                        
                }

                <span class="comment">// Now transmit it.</span>
                UDPFlush();

        }<span class="comment">//UDPIsPutReady(XPLSocket)</span>
}<span class="comment">// SendZoneStateMsg</span>
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_ab01e7f6872c9f26dd9f91bc24f43f4b6_cgraph.svg" width="467" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe src="_security_x_p_l_sender_8c_ab01e7f6872c9f26dd9f91bc24f43f4b6_icgraph.svg" width="912" height="59" frameborder="0" scrolling="no"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Mon Apr 25 2011 23:31:10 for Alarm Cabinent by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
